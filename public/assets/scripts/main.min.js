$(function() {
	String.prototype.decodeHTML = function() { return $("<div>", {html: "" + this}).html(); };

	var $page = $("#page"), $preloader = $("#preloader"), $counter = 0;

	checkUrl = function(slug) {
		var url = location.href;
		var regex = '^(http[s]?\:\/\/){0,1}(www\.){0,1}[a-zA-Z0-9\.\-\_\:]+(\/)?' + slug + '(\#)?(\/)?$';
		if (url.match(new RegExp(regex))) { return true; } else { return false; };
	},

	engineSideMenu = function() {
		var openedMenu = $('a[href="' + location.href + '"]');
		var anchors = $('#side-menu li.active').removeClass('active');

		if (openedMenu.length <= 0) {
			try {
				openedMenu = $('a[href="' + /http:\/\/([a-zA-Z0-9:.]+)\/([a-zA-Z_]+)/g.exec(location.href)[0] + '"]');
			} catch(err) {
				console.log('[ERROR] At: engineSideMenu, err: ' + err);
			}
		}

		openedMenu.parents('li').each(function(index){
			$(this).find('ul').first().addClass('in').attr('aria-expanded', 'true');
			$(this).addClass('active');
		});
	},

	engineFormValidations = function() {

		$("#simulated_test").validate({
			rules: {
				"simulated_test[grade_ids][]": {
					required: true,
					minlength: 1,
				},
			},
			messages: {
        "simulated_test[grade_ids][]": "Escolha no mínimo uma série para aplicar a este simulado.",
    	},
			errorPlacement: function(error, element) {
				if (element.attr("name") == "simulated_test[grade_ids][]") {
					error.insertAfter($('#grades'));
				} else if (element.parent().hasClass("input-group")) {
					error.insertAfter(element.parent());
				} else if (element.hasClass("chosen-select")) {
					error.insertAfter(element.parent().find(".chosen-container"));
				} else {
					error.insertAfter(element);
				}
			},
			onfocusout: false,
	    invalidHandler: function(form, validator) {
        var errors = validator.numberOfInvalids();
        if (errors) {
           validator.errorList[0].element.focus();
        }
	    }
		});

		$("#student").validate({
			rules: {
				"student[is_college_student]": {
					required: true,
					minlength: 1,
				},
			},
			messages: {
        "student[is_college_student]": "Marque uma das alternativas.",
    	},
			errorPlacement: function(error, element) {
				if (element.attr("name") == "student[is_college_student]") {
					error.insertAfter(element.parent());
				} else if (element.parent().hasClass("input-group")) {
					error.insertAfter(element.parent());
				} else if (element.hasClass("chosen-select")) {
					error.insertAfter(element.parent().find(".chosen-container"));
				} else {
					error.insertAfter(element);
				}
			},
			onfocusout: false,
	    invalidHandler: function(form, validator) {
        var errors = validator.numberOfInvalids();
        if (errors) {
           validator.errorList[0].element.focus();
        }
	    }
		});
	},

	engineGraphs = function(graph, resource, title, categories, xAxisText, yAxisText, sufix) {
		if (graph.length) {
			data = [];
			sufix = sufix || ' aluno(s)';
			xAxisText = xAxisText || 'Porcentagens de Acertos';
			yAxisText = yAxisText || 'Quantidade de Alunos';
			categories = categories || ["0-10%","11-20%","21-30%","31-40%","41-50%","51-60%","61-70%","71-80%","81-90%","91-100%",];

			for (i = 0; i < resource.length; ++i) {
				data[i] = {};
				data[i]["name"] = resource[i][0];
				data[i]["color"] = resource[i][1];
				data[i]["data"] = [];
				for (j = 2; j < resource[i].length; ++j) {
					data[i]["data"].push(parseFloat(resource[i][j]));
				}
			}

			graph.highcharts({
				chart: { type: 'areaspline' },
				title: { text: title },
				plotOptions: {
					series: {
						enableMouseTracking: false,
						shadow: false,
						animation: false,
					}
				},
				xAxis: {
					title: { text: xAxisText },
					categories: categories,
					offset: 20,
				},
				yAxis: { min: 0, max: 100, title: { text: yAxisText }, tickInterval: 10, },
				tooltip: {
					shared: true,
					valueSuffix: sufix,
					crosshairs: true,
          		shared: true
				},
				credits: { enabled: false },
				plotOptions: {
					areaspline: { fillOpacity: 0.5 }
				},
				series: data
			});
		}
	},

	enginePage = function() {
		$('.check-all-input').change(function(){
			input = $(this);
			container = input.closest('.check-all-container');
			if (input.prop("checked")) {
				container.find("input[type='checkbox']").prop("checked", true);
			} else {
				container.find("input[type='checkbox']").prop("checked", false);
			}
		});

		$('.check-all-container input[type="checkbox"]').not('.check-all-input').change(function(){
			input = $(this);
			container = input.closest('.check-all-container');
			input_check_all = container.find('.check-all-input');
			if (input_check_all.prop("checked")) { input_check_all.prop("checked", false) };
		});
		
		$('[data-toggle="tooltip"]').tooltip();

		if (checkUrl("simulated_tests/new")) {
			console.log('[INFO] enginePage called at: simulated_tests/new.');

			var engineDatepickers = function() {
				$('#page .input-group.date').datepicker({
					todayBtn: "linked",
					keyboardNavigation: false,
					forceParse: false,
					calendarWeeks: true,
					autoclose: true,
					format: 'dd/mm/yyyy',
				});
			}

			var engineSelects = function() {
				$('#page .chosen-select').chosen({width: 'inherit'});
			}

			var engineIChecks = function() {
				$('#page .i-checks').iCheck({
					checkboxClass: 'icheckbox_square-green',
					radioClass: 'iradio_square-green',
				});
			}

			engineDatepickers();
			engineIChecks();
			engineSelects();

			$('#dates').on('cocoon:after-insert', function() {
				engineDatepickers();
			});

			$('#questions').on('cocoon:after-insert', function() {
				engineSelects();
				engineIChecks();
			});

			$('.add-question').trigger('click');
		} else if (checkUrl("(simulated_tests)/[0-9]+")) {
			console.log('[INFO] enginePage called at: simulated_tests/[0-9]+.');

			simulatedTestTable = $('#simulated-test-table');
			if (simulatedTestTable.length > 0) {
				jQuery.extend( jQuery.fn.dataTableExt.oSort, {
					"only-float-pre": function ( a ) {
						result = parseFloat(a.match(/[0-9]*\.[0-9]*\%/g)[0].replace("%", ""));
						return result;
					},
					"only-float-asc": function ( a, b ) {
						return ((a < b) ? -1 : ((a > b) ? 1 : 0));
					},
					"only-float-desc": function ( a, b ) {
						return ((a < b) ? 1 : ((a > b) ? -1 : 0));
					}
				});
				var t = simulatedTestTable.dataTable({
					responsive: true,
					"order": [[ 3, "desc" ], [ 4, "desc" ], [ 5, "desc" ], [ 6, "desc" ], [ 7, "desc" ],],
					"aoColumnDefs": [
					{ "sType": 'only-float', "asSorting": [ "desc", "asc"], "aTargets": [ 3, 4, 5, 6, 7 ], },
					{ "orderable": false, "targets": [2], }
					],
					language: {
						"sEmptyTable": "Nenhum registro encontrado",
						"sInfo": "Mostrando de _START_ até _END_ de _TOTAL_ registros",
						"sInfoEmpty": "Mostrando 0 até 0 de 0 registros",
						"sInfoFiltered": "(Filtrados de _MAX_ registros)",
						"sInfoPostFix": "",
						"sInfoThousands": ".",
						"sLengthMenu": "_MENU_ &nbsp; resultados por página",
						"sLoadingRecords": "Carregando...",
						"sProcessing": "Processando...",
						"sZeroRecords": "Nenhum registro encontrado",
						"sSearch": "Pesquisar &nbsp;&nbsp;",
						"oPaginate": {
							"sNext": "Próximo",
							"sPrevious": "Anterior",
							"sFirst": "Primeiro",
							"sLast": "Último"
						},
						"oAria": {
							"sSortAscending": ": Ordenar colunas de forma ascendente",
							"sSortDescending": ": Ordenar colunas de forma descendente"
						}
					},
				});
			} else {
				console.log('[INFO] simulatedTestTable already loaded.');
			}
		} else if (checkUrl("simulated_tests")) {
			console.log('[INFO] enginePage called at: simulated_tests.');

			simulatedTestsTable = $('#simulated-tests-table');
			if (simulatedTestsTable.length > 0) {
				var t = simulatedTestsTable.dataTable({
					responsive: true,
					"columnDefs": [ { "targets": [2, 3, 4, 5, 6, 7], "orderable": false } ],
					language: {
						"sEmptyTable": "Nenhum registro encontrado",
						"sInfo": "Mostrando de _START_ até _END_ de _TOTAL_ registros",
						"sInfoEmpty": "Mostrando 0 até 0 de 0 registros",
						"sInfoFiltered": "(Filtrados de _MAX_ registros)",
						"sInfoPostFix": "",
						"sInfoThousands": ".",
						"sLengthMenu": "_MENU_ &nbsp; resultados por página",
						"sLoadingRecords": "Carregando...",
						"sProcessing": "Processando...",
						"sZeroRecords": "Nenhum registro encontrado",
						"sSearch": "Pesquisar &nbsp;&nbsp;",
						"oPaginate": {
							"sNext": "Próximo",
							"sPrevious": "Anterior",
							"sFirst": "Primeiro",
							"sLast": "Último"
						},
						"oAria": {
							"sSortAscending": ": Ordenar colunas de forma ascendente",
							"sSortDescending": ": Ordenar colunas de forma descendente"
						}
					},
				});
			} else {
				console.log('[INFO] simulatedTestsTable already loaded.');
			}
		} else if (checkUrl("(simulated_tests/)[0-9]+(/edit_questions)[a-zA-Z0-9\/\?\=\%\&\\+\.\%\-\_]*")) {
			console.log('[INFO] enginePage called at: simulated_tests/[0-9]+/edit_questions.');

			var engineSelects = function() {
				$('#page .chosen-select').chosen({width: 'inherit'});
			}

			var engineIChecks = function() {
				$('#page .i-checks').iCheck({
					checkboxClass: 'icheckbox_square-green',
					radioClass: 'iradio_square-green',
				});
			}

			engineIChecks();
			engineSelects();

			$('#questions .question .knowledge-area-select').change(function() {
				select = $(this);
				question = select.closest('.question');
				question.find('.knowledge-object-select option').prop('selected', false);
				question.find('.skill-select option').prop('selected', false);
				question.find('.chosen-container').remove();
				question.find('.knowledge-object-select.chosen-select').chosen('destroy');
				question.find('.skill-select.chosen-select').chosen('destroy');
				question.find('.knowledge-object-select').addClass('hidden').removeClass('chosen-select');
				question.find('.skill-select').addClass('hidden').removeClass('chosen-select');

				question.find('.from-knowledge-area-' + select.val()).removeClass('hidden').addClass('chosen-select').chosen({width: 'inherit'});
			});
		} else if (checkUrl("(simulated_tests/)[0-9]+(/edit)[a-zA-Z0-9\/\?\=\%\&\\+\.\%\-\_]*")) {
			console.log('[INFO] enginePage called at: simulated_tests/[0-9]+/edit.');

			var engineDatepickers = function() {
				$('#page .input-group.date').datepicker({
					todayBtn: "linked",
					keyboardNavigation: false,
					forceParse: false,
					calendarWeeks: true,
					autoclose: true,
					format: 'dd/mm/yyyy',
				});
			}

			var engineIChecks = function() {
				$('#page .i-checks').iCheck({
					checkboxClass: 'icheckbox_square-green',
					radioClass: 'iradio_square-green',
				});
			}

			engineDatepickers();
			engineIChecks();

			$('#dates').on('cocoon:after-insert', function() {
				engineDatepickers();
			});
		} else if (checkUrl("(simulated_tests/)[0-9\/]*(show_statistic_report)[a-zA-Z0-9\/\?\=\%\&\\+\.\%\-\_]*")) {
			console.log('[INFO] enginePage called at: simulated_tests/[0-9]+/show_statistic_report.');

			var resource1 = $('table#statistic-report-resource__general tr').get().map(function(row) {
				return $(row).find('td').get().map(function(cell) {
					return $(cell).html();
				});
			});
			var resource2 = $('table#statistic-report-resource__1 tr').get().map(function(row) {
				return $(row).find('td').get().map(function(cell) {
					return $(cell).html();
				});
			});
			var resource3 = $('table#statistic-report-resource__2 tr').get().map(function(row) {
				return $(row).find('td').get().map(function(cell) {
					return $(cell).html();
				});
			});

			graph1 = $("#statistic-report-graph1");
			graph2 = $("#statistic-report-graph2");
			graph3 = $("#statistic-report-graph3");
			engineGraphs(graph1, resource1, "Médias de Acertos Geral");
			engineGraphs(graph2, resource2, "Médias de Acertos por Área de Conhecimento - Parte 1");
			engineGraphs(graph3, resource3, "Médias de Acertos por Área de Conhecimento - Parte 2");

			$('.nestable-list').nestable();
			$('[data-action="collapse"').trigger('click');
		} else if (checkUrl("(simulated_tests/)[0-9]+(/new_answers)")){
			console.log('[INFO] enginePage called at: simulated_tests/[0-9]+/new_answers.');

			var newAnswersDropzone = new Dropzone("#new-answers-dropzone", {
				paramName: "answers",
				autoProcessQueue: false,
			});
			newAnswersDropzone.element.querySelector("button[type=submit]").addEventListener("click", function(e) {
				e.preventDefault();
				e.stopPropagation();
				newAnswersDropzone.processQueue();
			});
		} else if (checkUrl("simulated_tests/show_answer_cards")){
			$('#simulated_test_id').chosen({width: 'inherit'});
		} else if (checkUrl("students/[0-9]+/dashboard")) {
			console.log('[INFO] enginePage called at: students/[0-9]+/dashboard.');

			if ($('table#dashboard-simulated-test-graph-resource').length > 0) {
				var resource = $('table#dashboard-simulated-test-graph-resource tr').get().map(function(row) {
					return $(row).find('td').get().map(function(cell) {
						return $(cell).html();
					});
				});

				categories = [];
				for (i = 2; i < resource.length; ++i) {
					categories.push(resource[i][0]);
				}
				data = [];
				for (j = 1; j < resource[0].length; ++j) {
					data[j-1] = {};
					data[j-1]["data"] = [];
					data[j-1]["name"] = resource[0][j];
					data[j-1]["color"] = resource[1][j];

					for (k = 2; k < resource.length; ++k) {
						data[j-1]["data"].push(parseFloat(resource[k][j]));
					}
				}

				$('#dashboard-simulated-test-graph').highcharts({
					chart: {
						type: 'column',
						height: 220,
					},
					title: { text: ' '  },
					legend: {
						layout: 'horizontal',
						align: 'center',
						verticalAlign: 'top',
					},
					credits: false,
					xAxis: {
						categories: categories,
						crosshair: true
					},
					yAxis: {
				// min: 0,
				// max: 100,
				tickInterval: 10,
				title: {
					text: 'Porcentagem de acertos'
				}
				},
				tooltip: {
					headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
					pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
					'<td style="padding:0"><b>{point.y:.1f} %</b></td></tr>',
					footerFormat: '</table>',
					shared: true,
					useHTML: true
				},
				plotOptions: {
					column: {
						pointPadding: 0.2,
						borderWidth: 0
					}
				},
				series: data
				});
			}
		} else if (checkUrl("students/new")) {
		} else if (checkUrl("students/[0-9]+")) {
			console.log('[INFO] enginePage called at: students/[0-9]+.');

			$('.histograms').each(function(index){
				table1 = $(this).find('table.statistic-report-resource__general tr');
				table2 = $(this).find('table.statistic-report-resource__1 tr');
				table3 = $(this).find('table.statistic-report-resource__2 tr');
				graph1 = $(this).find('.histogram1');
				graph2 = $(this).find('.histogram2');
				graph3 = $(this).find('.histogram3');

				var resource1 = table1.get().map(function(row) {
					return $(row).find('td').get().map(function(cell) {
						return $(cell).html();
					});
				});
				var resource2 = table2.get().map(function(row) {
					return $(row).find('td').get().map(function(cell) {
						return $(cell).html();
					});
				});
				var resource3 = table3.get().map(function(row) {
					return $(row).find('td').get().map(function(cell) {
						return $(cell).html();
					});
				});

				engineGraphs(graph1, resource1, "Médias de Acertos Geral");
				engineGraphs(graph2, resource2, "Médias de Acertos por Área de Conhecimento - Parte 2");
				engineGraphs(graph3, resource3, "Médias de Acertos por Área de Conhecimento - Parte 2");
			});


			$('.nestable-list').nestable();
			$('[data-action="collapse"').trigger('click');
			$('span.pie').peity('pie', { fill: ['#1ab394', '#d7d7d7', '#ffffff'] });
		} else if (checkUrl("students")) {
			console.log('[INFO] enginePage called at: students.');

			studentsTable = $('#students-table');
			if (studentsTable.length > 0) {
				var t = studentsTable.dataTable({
					responsive: true,
					"columnDefs": [ { "targets": [4, 5, 6], "orderable": false } ],
					language: {
						"sEmptyTable": "Nenhum registro encontrado",
						"sInfo": "Mostrando de _START_ até _END_ de _TOTAL_ registros",
						"sInfoEmpty": "Mostrando 0 até 0 de 0 registros",
						"sInfoFiltered": "(Filtrados de _MAX_ registros)",
						"sInfoPostFix": "",
						"sInfoThousands": ".",
						"sLengthMenu": "_MENU_ &nbsp; resultados por página",
						"sLoadingRecords": "Carregando...",
						"sProcessing": "Processando...",
						"sZeroRecords": "Nenhum registro encontrado",
						"sSearch": "Pesquisar &nbsp;&nbsp;",
						"oPaginate": {
							"sNext": "Próximo",
							"sPrevious": "Anterior",
							"sFirst": "Primeiro",
							"sLast": "Último"
						},
						"oAria": {
							"sSortAscending": ": Ordenar colunas de forma ascendente",
							"sSortDescending": ": Ordenar colunas de forma descendente"
						}
					},
				});
			} else {
				console.log('[INFO] studentsTable already loaded.');
			}
		} else if (checkUrl("students/results")) {
			console.log('[INFO] enginePage called at: students/results.');

			studentsResultsTable = $('#students-results-table');
			if (studentsResultsTable.length > 0) {
				var t = studentsResultsTable.dataTable({
					responsive: true,
					language: {
						"sEmptyTable": "Nenhum registro encontrado",
						"sInfo": "Mostrando de _START_ até _END_ de _TOTAL_ registros",
						"sInfoEmpty": "Mostrando 0 até 0 de 0 registros",
						"sInfoFiltered": "(Filtrados de _MAX_ registros)",
						"sInfoPostFix": "",
						"sInfoThousands": ".",
						"sLengthMenu": "_MENU_ &nbsp; resultados por página",
						"sLoadingRecords": "Carregando...",
						"sProcessing": "Processando...",
						"sZeroRecords": "Nenhum registro encontrado",
						"sSearch": "Pesquisar &nbsp;&nbsp;",
						"oPaginate": {
							"sNext": "Próximo",
							"sPrevious": "Anterior",
							"sFirst": "Primeiro",
							"sLast": "Último"
						},
						"oAria": {
							"sSortAscending": ": Ordenar colunas de forma ascendente",
							"sSortDescending": ": Ordenar colunas de forma descendente"
						}
					},
				});
			}
		} else if (checkUrl("(students/)[0-9]+(/show_simulated_tests)[a-zA-Z0-9\/\?\=\%\&\\+\.\%\-\_]*")) {
			console.log('[INFO] enginePage called at: students/0-9/show_simulated_tests.');

			$('.histograms').each(function(index){
				table = $(this).find('table tr');
				graph1 = $(this).find('.histogram1');
				graph2 = $(this).find('.histogram2');

				var resource = table.get().map(function(row) {
					return $(row).find('td').get().map(function(cell) {
						return $(cell).html();
					});
				});

				engineGraphs(graph1, resource.slice(0, 3), "Médias de Acertos por Área de Conhecimento - Parte 1");
				engineGraphs(graph2, resource.slice(3, 5), "Médias de Acertos por Área de Conhecimento - Parte 2");
			});


			$('.nestable-list').nestable();
			$('[data-action="collapse"').trigger('click');
			$('span.pie').peity('pie', { fill: ['#1ab394', '#d7d7d7', '#ffffff'] });
		} else if (checkUrl("(students/)[0-9]+(/simulated_tests)")) {
			console.log('[INFO] enginePage called at: students/[0-9]+/simulated_tests.');

			availableSimulatedTestsTable = $('#avaliable-simulated-tests-table');
			registeredSimulatedTestsTable = $('#registered-simulated-tests-table');
			if (availableSimulatedTestsTable.length > 0) {
				var t = availableSimulatedTestsTable.dataTable({
					responsive: true,
					"columnDefs": [ { "targets": [2, 3, 4], "orderable": false } ],
					language: {
						"sEmptyTable": "Nenhum registro encontrado",
						"sInfo": "Mostrando de _START_ até _END_ de _TOTAL_ registros",
						"sInfoEmpty": "Mostrando 0 até 0 de 0 registros",
						"sInfoFiltered": "(Filtrados de _MAX_ registros)",
						"sInfoPostFix": "",
						"sInfoThousands": ".",
						"sLengthMenu": "_MENU_ &nbsp; resultados por página",
						"sLoadingRecords": "Carregando...",
						"sProcessing": "Processando...",
						"sZeroRecords": "Nenhum registro encontrado",
						"sSearch": "Pesquisar &nbsp;&nbsp;",
						"oPaginate": {
							"sNext": "Próximo",
							"sPrevious": "Anterior",
							"sFirst": "Primeiro",
							"sLast": "Último"
						},
						"oAria": {
							"sSortAscending": ": Ordenar colunas de forma ascendente",
							"sSortDescending": ": Ordenar colunas de forma descendente"
						}
					},
				});
			}
			if (registeredSimulatedTestsTable.length > 0) {
				var t = registeredSimulatedTestsTable.dataTable({
					responsive: true,
					"columnDefs": [ { "targets": [2], "orderable": false } ],
					language: {
						"sEmptyTable": "Nenhum registro encontrado",
						"sInfo": "Mostrando de _START_ até _END_ de _TOTAL_ registros",
						"sInfoEmpty": "Mostrando 0 até 0 de 0 registros",
						"sInfoFiltered": "(Filtrados de _MAX_ registros)",
						"sInfoPostFix": "",
						"sInfoThousands": ".",
						"sLengthMenu": "_MENU_ &nbsp; resultados por página",
						"sLoadingRecords": "Carregando...",
						"sProcessing": "Processando...",
						"sZeroRecords": "Nenhum registro encontrado",
						"sSearch": "Pesquisar &nbsp;&nbsp;",
						"oPaginate": {
							"sNext": "Próximo",
							"sPrevious": "Anterior",
							"sFirst": "Primeiro",
							"sLast": "Último"
						},
						"oAria": {
							"sSortAscending": ": Ordenar colunas de forma ascendente",
							"sSortDescending": ": Ordenar colunas de forma descendente"
						}
					},
				});
			}
		} else if (checkUrl("users")) {
			console.log('[INFO] enginePage called at: users.');

			usersTable = $('#users-table');
			if (usersTable.length > 0) {
				var t = usersTable.dataTable({
					responsive: true,
					"columnDefs": [ { "targets": [2, 3], "orderable": false } ],
					language: {
						"sEmptyTable": "Nenhum registro encontrado",
						"sInfo": "Mostrando de _START_ até _END_ de _TOTAL_ registros",
						"sInfoEmpty": "Mostrando 0 até 0 de 0 registros",
						"sInfoFiltered": "(Filtrados de _MAX_ registros)",
						"sInfoPostFix": "",
						"sInfoThousands": ".",
						"sLengthMenu": "_MENU_ &nbsp; resultados por página",
						"sLoadingRecords": "Carregando...",
						"sProcessing": "Processando...",
						"sZeroRecords": "Nenhum registro encontrado",
						"sSearch": "Pesquisar &nbsp;&nbsp;",
						"oPaginate": {
							"sNext": "Próximo",
							"sPrevious": "Anterior",
							"sFirst": "Primeiro",
							"sLast": "Último"
						},
						"oAria": {
							"sSortAscending": ": Ordenar colunas de forma ascendente",
							"sSortDescending": ": Ordenar colunas de forma descendente"
						}
					},
				});
			} else {
				console.log('[INFO] studentsTable already loaded.');
			}
		} else if (checkUrl("knowledge_areas")) {
			console.log('[INFO] enginePage called at: knowledge_areas.');

			table = $('#knowledge-areas-table');
			if (table.length > 0) {
				var t = table.dataTable({
					responsive: true,
					"columnDefs": [ { "targets": [2, 3], "orderable": false } ],
					language: {
						"sEmptyTable": "Nenhum registro encontrado",
						"sInfo": "Mostrando de _START_ até _END_ de _TOTAL_ registros",
						"sInfoEmpty": "Mostrando 0 até 0 de 0 registros",
						"sInfoFiltered": "(Filtrados de _MAX_ registros)",
						"sInfoPostFix": "",
						"sInfoThousands": ".",
						"sLengthMenu": "_MENU_ &nbsp; resultados por página",
						"sLoadingRecords": "Carregando...",
						"sProcessing": "Processando...",
						"sZeroRecords": "Nenhum registro encontrado",
						"sSearch": "Pesquisar &nbsp;&nbsp;",
						"oPaginate": {
							"sNext": "Próximo",
							"sPrevious": "Anterior",
							"sFirst": "Primeiro",
							"sLast": "Último"
						},
						"oAria": {
							"sSortAscending": ": Ordenar colunas de forma ascendente",
							"sSortDescending": ": Ordenar colunas de forma descendente"
						}
					},
				});
			} else {
				console.log('[INFO] studentsTable already loaded.');
			}
		} else if (checkUrl("knowledge_objects")) {
			console.log('[INFO] enginePage called at: knowledge_objects.');

			table = $('#knowledge-objects-table');
			if (table.length > 0) {
				var t = table.dataTable({
					responsive: true,
					"columnDefs": [ { "targets": [2, 3], "orderable": false } ],
					language: {
						"sEmptyTable": "Nenhum registro encontrado",
						"sInfo": "Mostrando de _START_ até _END_ de _TOTAL_ registros",
						"sInfoEmpty": "Mostrando 0 até 0 de 0 registros",
						"sInfoFiltered": "(Filtrados de _MAX_ registros)",
						"sInfoPostFix": "",
						"sInfoThousands": ".",
						"sLengthMenu": "_MENU_ &nbsp; resultados por página",
						"sLoadingRecords": "Carregando...",
						"sProcessing": "Processando...",
						"sZeroRecords": "Nenhum registro encontrado",
						"sSearch": "Pesquisar &nbsp;&nbsp;",
						"oPaginate": {
							"sNext": "Próximo",
							"sPrevious": "Anterior",
							"sFirst": "Primeiro",
							"sLast": "Último"
						},
						"oAria": {
							"sSortAscending": ": Ordenar colunas de forma ascendente",
							"sSortDescending": ": Ordenar colunas de forma descendente"
						}
					},
				});
			} else {
				console.log('[INFO] studentsTable already loaded.');
			}
		} else if (checkUrl("competences")) {
			console.log('[INFO] enginePage called at: competences.');

			table = $('#competences-table');
			if (table.length > 0) {
				var t = table.dataTable({
					responsive: true,
					"order": [[ 1, "desc" ], [ 0, "desc" ]],
					"columnDefs": [ { "targets": [2, 3], "orderable": false } ],
					language: {
						"sEmptyTable": "Nenhum registro encontrado",
						"sInfo": "Mostrando de _START_ até _END_ de _TOTAL_ registros",
						"sInfoEmpty": "Mostrando 0 até 0 de 0 registros",
						"sInfoFiltered": "(Filtrados de _MAX_ registros)",
						"sInfoPostFix": "",
						"sInfoThousands": ".",
						"sLengthMenu": "_MENU_ &nbsp; resultados por página",
						"sLoadingRecords": "Carregando...",
						"sProcessing": "Processando...",
						"sZeroRecords": "Nenhum registro encontrado",
						"sSearch": "Pesquisar &nbsp;&nbsp;",
						"oPaginate": {
							"sNext": "Próximo",
							"sPrevious": "Anterior",
							"sFirst": "Primeiro",
							"sLast": "Último"
						},
						"oAria": {
							"sSortAscending": ": Ordenar colunas de forma ascendente",
							"sSortDescending": ": Ordenar colunas de forma descendente"
						}
					},
				});
			} else {
				console.log('[INFO] studentsTable already loaded.');
			}
		} else if (checkUrl("skills")) {
			console.log('[INFO] enginePage called at: skills.');

			table = $('#skills-table');
			if (table.length > 0) {
				var t = table.dataTable({
					responsive: true,
					"order": [[ 2, "desc" ], [ 1, "desc" ], [ 0, "asc" ]],
					"columnDefs": [ { "targets": [3, 4], "orderable": false } ],
					language: {
						"sEmptyTable": "Nenhum registro encontrado",
						"sInfo": "Mostrando de _START_ até _END_ de _TOTAL_ registros",
						"sInfoEmpty": "Mostrando 0 até 0 de 0 registros",
						"sInfoFiltered": "(Filtrados de _MAX_ registros)",
						"sInfoPostFix": "",
						"sInfoThousands": ".",
						"sLengthMenu": "_MENU_ &nbsp; resultados por página",
						"sLoadingRecords": "Carregando...",
						"sProcessing": "Processando...",
						"sZeroRecords": "Nenhum registro encontrado",
						"sSearch": "Pesquisar &nbsp;&nbsp;",
						"oPaginate": {
							"sNext": "Próximo",
							"sPrevious": "Anterior",
							"sFirst": "Primeiro",
							"sLast": "Último"
						},
						"oAria": {
							"sSortAscending": ": Ordenar colunas de forma ascendente",
							"sSortDescending": ": Ordenar colunas de forma descendente"
						}
					},
				});
			} else {
				console.log('[INFO] studentsTable already loaded.');
			}
		} else if (checkUrl("jobs")) {
			console.log('[INFO] enginePage called at: jobs.');

			table = $('#jobs-table');
			if (table.length > 0) {
				var t = table.dataTable({
					responsive: true,
					"order": [[ 0, "asc" ]],
					"columnDefs": [ { "targets": [1, 2], "orderable": false } ],
					language: {
						"sEmptyTable": "Nenhum registro encontrado",
						"sInfo": "Mostrando de _START_ até _END_ de _TOTAL_ registros",
						"sInfoEmpty": "Mostrando 0 até 0 de 0 registros",
						"sInfoFiltered": "(Filtrados de _MAX_ registros)",
						"sInfoPostFix": "",
						"sInfoThousands": ".",
						"sLengthMenu": "_MENU_ &nbsp; resultados por página",
						"sLoadingRecords": "Carregando...",
						"sProcessing": "Processando...",
						"sZeroRecords": "Nenhum registro encontrado",
						"sSearch": "Pesquisar &nbsp;&nbsp;",
						"oPaginate": {
							"sNext": "Próximo",
							"sPrevious": "Anterior",
							"sFirst": "Primeiro",
							"sLast": "Último"
						},
						"oAria": {
							"sSortAscending": ": Ordenar colunas de forma ascendente",
							"sSortDescending": ": Ordenar colunas de forma descendente"
						}
					},
				});
			} else {
				console.log('[INFO] studentsTable already loaded.');
			}
		} else if (checkUrl("grades")) {
			console.log('[INFO] enginePage called at: grades.');

			table = $('#grades-table');
			if (table.length > 0) {
				var t = table.dataTable({
					responsive: true,
					"order": [[ 0, "asc" ]],
					"columnDefs": [ { "targets": [1, 2], "orderable": false } ],
					language: {
						"sEmptyTable": "Nenhum registro encontrado",
						"sInfo": "Mostrando de _START_ até _END_ de _TOTAL_ registros",
						"sInfoEmpty": "Mostrando 0 até 0 de 0 registros",
						"sInfoFiltered": "(Filtrados de _MAX_ registros)",
						"sInfoPostFix": "",
						"sInfoThousands": ".",
						"sLengthMenu": "_MENU_ &nbsp; resultados por página",
						"sLoadingRecords": "Carregando...",
						"sProcessing": "Processando...",
						"sZeroRecords": "Nenhum registro encontrado",
						"sSearch": "Pesquisar &nbsp;&nbsp;",
						"oPaginate": {
							"sNext": "Próximo",
							"sPrevious": "Anterior",
							"sFirst": "Primeiro",
							"sLast": "Último"
						},
						"oAria": {
							"sSortAscending": ": Ordenar colunas de forma ascendente",
							"sSortDescending": ": Ordenar colunas de forma descendente"
						}
					},
				});
			} else {
				console.log('[INFO] studentsTable already loaded.');
			}
		} else if (checkUrl("normals")) {
			console.log('[INFO] enginePage called at: normals.');

			table = $('#normals-table');
			if (table.length > 0) {
				var t = table.dataTable({
					responsive: true,
					"order": [[ 0, "asc" ]],
					"columnDefs": [ { "targets": [1, 2], "orderable": false } ],
					language: {
						"sEmptyTable": "Nenhum registro encontrado",
						"sInfo": "Mostrando de _START_ até _END_ de _TOTAL_ registros",
						"sInfoEmpty": "Mostrando 0 até 0 de 0 registros",
						"sInfoFiltered": "(Filtrados de _MAX_ registros)",
						"sInfoPostFix": "",
						"sInfoThousands": ".",
						"sLengthMenu": "_MENU_ &nbsp; resultados por página",
						"sLoadingRecords": "Carregando...",
						"sProcessing": "Processando...",
						"sZeroRecords": "Nenhum registro encontrado",
						"sSearch": "Pesquisar &nbsp;&nbsp;",
						"oPaginate": {
							"sNext": "Próximo",
							"sPrevious": "Anterior",
							"sFirst": "Primeiro",
							"sLast": "Último"
						},
						"oAria": {
							"sSortAscending": ": Ordenar colunas de forma ascendente",
							"sSortDescending": ": Ordenar colunas de forma descendente"
						}
					},
				});
			} else {
				console.log('[INFO] normalsTable already loaded.');
			}
		} else if (checkUrl("subjects")) {
			console.log('[INFO] enginePage called at: subjects.');

			table = $('#subjects-table');
			if (table.length > 0) {
				var t = table.dataTable({
					responsive: true,
					"order": [[ 0, "asc" ]],
					"columnDefs": [ { "targets": [1, 2], "orderable": false } ],
					language: {
						"sEmptyTable": "Nenhum registro encontrado",
						"sInfo": "Mostrando de _START_ até _END_ de _TOTAL_ registros",
						"sInfoEmpty": "Mostrando 0 até 0 de 0 registros",
						"sInfoFiltered": "(Filtrados de _MAX_ registros)",
						"sInfoPostFix": "",
						"sInfoThousands": ".",
						"sLengthMenu": "_MENU_ &nbsp; resultados por página",
						"sLoadingRecords": "Carregando...",
						"sProcessing": "Processando...",
						"sZeroRecords": "Nenhum registro encontrado",
						"sSearch": "Pesquisar &nbsp;&nbsp;",
						"oPaginate": {
							"sNext": "Próximo",
							"sPrevious": "Anterior",
							"sFirst": "Primeiro",
							"sLast": "Último"
						},
						"oAria": {
							"sSortAscending": ": Ordenar colunas de forma ascendente",
							"sSortDescending": ": Ordenar colunas de forma descendente"
						}
					},
				});
			} else {
				console.log('[INFO] studentsTable already loaded.');
			}
		} else if (checkUrl("exams/new")) {
			console.log('[INFO] enginePage called at: exam/new.');

			var engineDatepickers = function() {
				$('#page .input-group.date').datepicker({
					todayBtn: "linked",
					keyboardNavigation: false,
					forceParse: false,
					calendarWeeks: true,
					autoclose: true,
					format: 'dd/mm/yyyy',
				});
			}

			var engineSelects = function() {
				$('#page .chosen-select').chosen({width: 'inherit'});
			}

			var engineIChecks = function() {
				$('#page .i-checks').iCheck({
					checkboxClass: 'icheckbox_square-green',
					radioClass: 'iradio_square-green',
				});
			}

			engineDatepickers();
			engineIChecks();
			engineSelects();

			$('#exam_dates').on('cocoon:after-insert', function() {
				engineDatepickers();
			});

			$('#exam_questions').on('cocoon:after-insert', function() {
				engineSelects();
				engineIChecks();
			});

			$('.add-question').trigger('click');
		} else if (checkUrl("(exams)/[0-9]+")) {
			console.log('[INFO] enginePage called at: exams/[0-9]+.');

			examTable = $('#exam-table');
			if (examTable.length > 0) {
				jQuery.extend( jQuery.fn.dataTableExt.oSort, {
					"only-float-pre": function ( a ) {
						result = parseFloat(a.match(/[0-9]*\.[0-9]*\%/g)[0].replace("%", ""));
						return result;
					},
					"only-float-asc": function ( a, b ) {
						return ((a < b) ? -1 : ((a > b) ? 1 : 0));
					},
					"only-float-desc": function ( a, b ) {
						return ((a < b) ? 1 : ((a > b) ? -1 : 0));
					}
				});
				targets = [3,]
				for (i = 0; i < parseInt(examTable.attr('data-subjects')); i++) {
					targets.push(3 + 1 + i);
				}
				var t = examTable.dataTable({
					responsive: true,
					"order": [[ 3, "desc" ],],
					"aoColumnDefs": [
						{ "sType": 'only-float', "asSorting": [ "desc", "asc"], "aTargets": targets, },
						{ "orderable": false, "targets": [2], }
					],
					language: {
						"sEmptyTable": "Nenhum registro encontrado",
						"sInfo": "Mostrando de _START_ até _END_ de _TOTAL_ registros",
						"sInfoEmpty": "Mostrando 0 até 0 de 0 registros",
						"sInfoFiltered": "(Filtrados de _MAX_ registros)",
						"sInfoPostFix": "",
						"sInfoThousands": ".",
						"sLengthMenu": "_MENU_ &nbsp; resultados por página",
						"sLoadingRecords": "Carregando...",
						"sProcessing": "Processando...",
						"sZeroRecords": "Nenhum registro encontrado",
						"sSearch": "Pesquisar &nbsp;&nbsp;",
						"oPaginate": {
							"sNext": "Próximo",
							"sPrevious": "Anterior",
							"sFirst": "Primeiro",
							"sLast": "Último"
						},
						"oAria": {
							"sSortAscending": ": Ordenar colunas de forma ascendente",
							"sSortDescending": ": Ordenar colunas de forma descendente"
						}
					},
				});
			} else {
				console.log('[INFO] examTable already loaded.');
			}
		} else if (checkUrl("exams")) {
			console.log('[INFO] enginePage called at: exams.');

			examsTable = $('#exams-table');
			if (examsTable.length > 0) {
				var t = examsTable.dataTable({
					responsive: true,
					"columnDefs": [ { "targets": [2, 3, 4, 5, 6], "orderable": false } ],
					language: {
						"sEmptyTable": "Nenhum registro encontrado",
						"sInfo": "Mostrando de _START_ até _END_ de _TOTAL_ registros",
						"sInfoEmpty": "Mostrando 0 até 0 de 0 registros",
						"sInfoFiltered": "(Filtrados de _MAX_ registros)",
						"sInfoPostFix": "",
						"sInfoThousands": ".",
						"sLengthMenu": "_MENU_ &nbsp; resultados por página",
						"sLoadingRecords": "Carregando...",
						"sProcessing": "Processando...",
						"sZeroRecords": "Nenhum registro encontrado",
						"sSearch": "Pesquisar &nbsp;&nbsp;",
						"oPaginate": {
							"sNext": "Próximo",
							"sPrevious": "Anterior",
							"sFirst": "Primeiro",
							"sLast": "Último"
						},
						"oAria": {
							"sSortAscending": ": Ordenar colunas de forma ascendente",
							"sSortDescending": ": Ordenar colunas de forma descendente"
						}
					},
				});
			} else {
				console.log('[INFO] examsTable already loaded.');
			}
		} else if (checkUrl("(exams/)[0-9]+(/edit_questions)[a-zA-Z0-9\/\?\=\%\&\\+\.\%\-\_]*")) {
			console.log('[INFO] enginePage called at: exams/[0-9]+/edit_questions.');

			var engineSelects = function() {
				$('#page .chosen-select').chosen({width: 'inherit'});
			}

			var engineIChecks = function() {
				$('#page .i-checks').iCheck({
					checkboxClass: 'icheckbox_square-green',
					radioClass: 'iradio_square-green',
				});
			}

			engineIChecks();
			engineSelects();

			$('#questions .question .knowledge-area-select').change(function() {
				select = $(this);
				question = select.closest('.question');
				question.find('.knowledge-object-select option').prop('selected', false);
				question.find('.skill-select option').prop('selected', false);
				question.find('.chosen-container').remove();
				question.find('.knowledge-object-select.chosen-select').chosen('destroy');
				question.find('.skill-select.chosen-select').chosen('destroy');
				question.find('.knowledge-object-select').addClass('hidden').removeClass('chosen-select');
				question.find('.skill-select').addClass('hidden').removeClass('chosen-select');

				question.find('.from-knowledge-area-' + select.val()).removeClass('hidden').addClass('chosen-select').chosen({width: 'inherit'});
			});
		} else if (checkUrl("(exams/)[0-9]+(/edit)[a-zA-Z0-9\/\?\=\%\&\\+\.\%\-\_]*")) {
			console.log('[INFO] enginePage called at: exams/[0-9]+/edit.');

			var engineDatepickers = function() {
				$('#page .input-group.date').datepicker({
					todayBtn: "linked",
					keyboardNavigation: false,
					forceParse: false,
					calendarWeeks: true,
					autoclose: true,
					format: 'dd/mm/yyyy',
				});
			}

			var engineIChecks = function() {
				$('#page .i-checks').iCheck({
					checkboxClass: 'icheckbox_square-green',
					radioClass: 'iradio_square-green',
				});
			}

			engineDatepickers();
			engineIChecks();

			$('#dates').on('cocoon:after-insert', function() {
				engineDatepickers();
			});
		} else if (checkUrl("(exams/)[0-9\/]*(show_statistic_report)[a-zA-Z0-9\/\?\=\%\&\\+\.\%\-\_]*")) {
			console.log('[INFO] enginePage called at: exams/[0-9]+/show_statistic_report.');

			var resource1 = $('table#statistic-report-resource__1 tr').get().map(function(row) {
				return $(row).find('td').get().map(function(cell) {
					return $(cell).html();
				});
			});
			var resource2 = $('table#statistic-report-resource__2 tr').get().map(function(row) {
				return $(row).find('td').get().map(function(cell) {
					return $(cell).html();
				});
			});
			var resource2__categories = $('table#statistic-report-resource__2 td[data-cat]').get().map(function(cell) {
				return $(cell).attr('data-cat');
			});

			console.log(resource2__categories)

			graph1 = $("#statistic-report-graph1");
			engineGraphs(graph1, resource1, "Acertos", ["0", "10", "20", "30", "40", "50", "60", "70", "80", "90", "100"], 'Notas', 'Porcentagem de Alunos', '%');
			graph2 = $("#statistic-report-graph2");
			engineGraphs(graph2, resource2, "Acertos por Questão", resource2__categories, 'Questões', 'Porcentam de Alunos', '%');

			$('.nestable-list').nestable();
			$('[data-action="collapse"').trigger('click');
		} else if (checkUrl("(exams/)[0-9]+(/new_answers)")){
			console.log('[INFO] enginePage called at: exams/[0-9]+/new_answers.');

			var newAnswersDropzone = new Dropzone("#new-answers-dropzone", {
				paramName: "answers",
				autoProcessQueue: false,
			});
			newAnswersDropzone.element.querySelector("button[type=submit]").addEventListener("click", function(e) {
				e.preventDefault();
				e.stopPropagation();
				newAnswersDropzone.processQueue();
			});
		} else {
			console.log('[INFO] enginePage called at generic page.');

			if ($('table#dashboard-simulated-test-graph-resource').length > 0) {
				var resource = $('table#dashboard-simulated-test-graph-resource tr').get().map(function(row) {
					return $(row).find('td').get().map(function(cell) {
						return $(cell).html();
					});
				});

				categories = [];
				for (i = 2; i < resource.length; ++i) {
					categories.push(resource[i][0]);
				}
				data = [];
				for (j = 1; j < resource[0].length; ++j) {
					data[j-1] = {};
					data[j-1]["data"] = [];
					data[j-1]["name"] = resource[0][j];
					data[j-1]["color"] = resource[1][j];

					for (k = 2; k < resource.length; ++k) {
						data[j-1]["data"].push(parseFloat(resource[k][j]));
					}
				}

				$('#dashboard-simulated-test-graph').highcharts({
					chart: {
						type: 'column',
						height: 220,
					},
					title: { text: ' '  },
					legend: {
						layout: 'horizontal',
						align: 'center',
						verticalAlign: 'top',
					},
					credits: false,
					xAxis: {
						categories: categories,
						crosshair: true
					},
					yAxis: {
						min: 0,
						max: 100,
						tickInterval: 20,
						title: {
							text: 'Porcentagem de acertos'
						}
					},
					tooltip: {
						headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
						pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
						'<td style="padding:0"><b>{point.y:.1f} %</b></td></tr>',
						footerFormat: '</table>',
						shared: true,
						useHTML: true
					},
					plotOptions: {
						column: {
							pointPadding: 0.2,
							borderWidth: 0
						}
					},
					series: data
				});
			}

			if ($('#flot-chart1').length > 0) {
				var d1 = [[1262304000000, 6], [1264982400000, 3057], [1267401600000, 20434], [1270080000000, 31982], [1272672000000, 26602], [1275350400000, 27826], [1277942400000, 24302], [1280620800000, 24237], [1283299200000, 21004], [1285891200000, 12144], [1288569600000, 10577], [1291161600000, 10295]];
				var d2 = [[1262304000000, 5], [1264982400000, 200], [1267401600000, 1605], [1270080000000, 6129], [1272672000000, 11643], [1275350400000, 19055], [1277942400000, 30062], [1280620800000, 39197], [1283299200000, 37000], [1285891200000, 27000], [1288569600000, 21000], [1291161600000, 17000]];

				var data1 = [
				{ label: "Data 1", data: d1, color: '#17a084'},
				{ label: "Data 2", data: d2, color: '#127e68' }
				];
				$.plot($("#flot-chart1"), data1, {
					xaxis: {
						tickDecimals: 0
					},
					series: {
						lines: {
							show: true,
							fill: true,
							fillColor: {
								colors: [{
									opacity: 1
								}, {
									opacity: 1
								}]
							},
						},
						points: {
							width: 0.1,
							show: false
						},
					},
					grid: {
						show: false,
						borderWidth: 0
					},
					legend: {
						show: false,
					}
				});
			}
		}
	},

	init = function() {
		engineSideMenu();
		enginePage();
		engineFormValidations();
	},

	ajaxLoad = function(html, status, xhr) {
		$counter++;
		console.log("- -- --- ---- ----- " + $counter + "º ajax call ----- ---- --- -- -");
		console.log("[INFO] Ajax Request Status: " + status);
		console.log("[INFO] Ajax Request XHR: " + xhr);
		if ( status == "error" ) {
			var msg = "Sorry but there was an error: ";
			alert(msg + xhr.status + " " + xhr.statusText);
		} else {
			$preloader.hide( 500 );
			document.title = html
				.match(/<title>(.*?)<\/title>/)[1]
				.trim()
				.decodeHTML();
			init();
		}
	},

	loadPage = function(href) {
		$page.load(href + ' #page>*', ajaxLoad);
	};

	init();

	$(window).on("popstate", function(e) {
		if (e.originalEvent.state !== null) {
			loadPage(location.href);
		}
	});

	$(document).on("click", "a, [data-href]", function(ev) {
		var href = $(this).attr("href");
		var dataAjax = $(this).attr("data-ajax");

		if (dataAjax == "false" || href == undefined || href == '#') { return; }

		ev.preventDefault();

		if (href.indexOf(document.domain) > -1 || href.indexOf(':') === -1) {
			$preloader.show( 500 );
			history.pushState({}, '', href);
			loadPage(href);
			return false;
		} else {
				console.log('[INFO] At: click.data-ajax');
		}
	});
});

(function() {
    var clickable = {
        elements: document.querySelectorAll('[data-href]'),

        redirect_to: function(href, target) {
            target = target || "";
            clickable.simulate_anchor(href, target);
        },

        simulate_anchor: function(href, target) {
            var anchor = document.createElement("a");
            anchor.setAttribute('href', href);
            anchor.setAttribute('target', target);
            anchor.click();
        },

        init: function() {
            for (var i = 0; i < this.elements.length; i++) {
                var element = this.elements[i];
                element.style.cursor = 'pointer';
                element.addEventListener('click', function() {
                    if ($(this).attr('data-target') == "_blank") {
                        var win = window.open($(this).attr('data-href'), '_blank');
                        win.focus();
                    } else {
                        window.location = $(this).attr('data-href');
                    }
                    // clickable.redirect_to(
                    //     this.getAttribute('data-href'),
                    //     this.getAttribute('data-target')
                    // );
                }, false);
            }
        }
    };

    clickable.init();
})();

Dropzone.autoDiscover = false;

/*
 *
 * Document ready
 * --------------------------------*/

$(document).ready(function(){
    var config = {
        '.chosen-select'           : {width:"inherit"},
        '.chosen-select-deselect'  : {allow_single_deselect:true},
        '.chosen-select-no-single' : {disable_search_threshold:10},
        '.chosen-select-no-results': {no_results_text:'Oops, nothing found!'},
        '.chosen-select-width'     : {width:"95%"}
    }
    for (var selector in config) {
        $(selector).chosen(config[selector]);
    }
});

$(document).on('click', '[data-order-the-table]', function(){
	ordenator = $(this);
	value = ordenator.attr('data-order-the-table');

	$('[data-order-the-table]').removeClass("active");
	ordenator.addClass("active");

	$('[data-pos-' + value + ']').each(function(index) {
		$(this).html($(this).attr('data-pos-' + value));
	});
});

$(document).on('click', '.pagination a', function(){
	ordenator = $('[data-order-the-table].active');

	if (ordenator.length) {
		value = ordenator.attr('data-order-the-table');

		$('[data-pos-' + value + ']').each(function(index) {
			$(this).html($(this).attr('data-pos-' + value));
		});
	}
});




jQuery.extend(jQuery.validator.messages, {
    required: "Este campo é de preenchimento obrigatório.",
    remote: "Please fix this field.",
    email: "Please enter a valid email address.",
    url: "Please enter a valid URL.",
    date: "Please enter a valid date.",
    dateISO: "Please enter a valid date (ISO).",
    number: "Please enter a valid number.",
    digits: "Please enter only digits.",
    creditcard: "Please enter a valid credit card number.",
    equalTo: "Please enter the same value again.",
    accept: "Please enter a value with a valid extension.",
    maxlength: jQuery.validator.format("Please enter no more than {0} characters."),
    minlength: jQuery.validator.format("Please enter at least {0} characters."),
    rangelength: jQuery.validator.format("Please enter a value between {0} and {1} characters long."),
    range: jQuery.validator.format("Please enter a value between {0} and {1}."),
    max: jQuery.validator.format("Please enter a value less than or equal to {0}."),
    min: jQuery.validator.format("Please enter a value greater than or equal to {0}.")
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFqYXhSZXF1ZXN0cy5qcyIsImNsaWNrYWJsZS5qcyIsIm1haW4uanMiLCJ2YWxpZGF0aW9ucy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNyMENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3RDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDOUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIkKGZ1bmN0aW9uKCkge1xuXHRTdHJpbmcucHJvdG90eXBlLmRlY29kZUhUTUwgPSBmdW5jdGlvbigpIHsgcmV0dXJuICQoXCI8ZGl2PlwiLCB7aHRtbDogXCJcIiArIHRoaXN9KS5odG1sKCk7IH07XG5cblx0dmFyICRwYWdlID0gJChcIiNwYWdlXCIpLCAkcHJlbG9hZGVyID0gJChcIiNwcmVsb2FkZXJcIiksICRjb3VudGVyID0gMDtcblxuXHRjaGVja1VybCA9IGZ1bmN0aW9uKHNsdWcpIHtcblx0XHR2YXIgdXJsID0gbG9jYXRpb24uaHJlZjtcblx0XHR2YXIgcmVnZXggPSAnXihodHRwW3NdP1xcOlxcL1xcLyl7MCwxfSh3d3dcXC4pezAsMX1bYS16QS1aMC05XFwuXFwtXFxfXFw6XSsoXFwvKT8nICsgc2x1ZyArICcoXFwjKT8oXFwvKT8kJztcblx0XHRpZiAodXJsLm1hdGNoKG5ldyBSZWdFeHAocmVnZXgpKSkgeyByZXR1cm4gdHJ1ZTsgfSBlbHNlIHsgcmV0dXJuIGZhbHNlOyB9O1xuXHR9LFxuXG5cdGVuZ2luZVNpZGVNZW51ID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG9wZW5lZE1lbnUgPSAkKCdhW2hyZWY9XCInICsgbG9jYXRpb24uaHJlZiArICdcIl0nKTtcblx0XHR2YXIgYW5jaG9ycyA9ICQoJyNzaWRlLW1lbnUgbGkuYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXG5cdFx0aWYgKG9wZW5lZE1lbnUubGVuZ3RoIDw9IDApIHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdG9wZW5lZE1lbnUgPSAkKCdhW2hyZWY9XCInICsgL2h0dHA6XFwvXFwvKFthLXpBLVowLTk6Ll0rKVxcLyhbYS16QS1aX10rKS9nLmV4ZWMobG9jYXRpb24uaHJlZilbMF0gKyAnXCJdJyk7XG5cdFx0XHR9IGNhdGNoKGVycikge1xuXHRcdFx0XHRjb25zb2xlLmxvZygnW0VSUk9SXSBBdDogZW5naW5lU2lkZU1lbnUsIGVycjogJyArIGVycik7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0b3BlbmVkTWVudS5wYXJlbnRzKCdsaScpLmVhY2goZnVuY3Rpb24oaW5kZXgpe1xuXHRcdFx0JCh0aGlzKS5maW5kKCd1bCcpLmZpcnN0KCkuYWRkQ2xhc3MoJ2luJykuYXR0cignYXJpYS1leHBhbmRlZCcsICd0cnVlJyk7XG5cdFx0XHQkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKTtcblx0XHR9KTtcblx0fSxcblxuXHRlbmdpbmVGb3JtVmFsaWRhdGlvbnMgPSBmdW5jdGlvbigpIHtcblxuXHRcdCQoXCIjc2ltdWxhdGVkX3Rlc3RcIikudmFsaWRhdGUoe1xuXHRcdFx0cnVsZXM6IHtcblx0XHRcdFx0XCJzaW11bGF0ZWRfdGVzdFtncmFkZV9pZHNdW11cIjoge1xuXHRcdFx0XHRcdHJlcXVpcmVkOiB0cnVlLFxuXHRcdFx0XHRcdG1pbmxlbmd0aDogMSxcblx0XHRcdFx0fSxcblx0XHRcdH0sXG5cdFx0XHRtZXNzYWdlczoge1xuICAgICAgICBcInNpbXVsYXRlZF90ZXN0W2dyYWRlX2lkc11bXVwiOiBcIkVzY29saGEgbm8gbcOtbmltbyB1bWEgc8OpcmllIHBhcmEgYXBsaWNhciBhIGVzdGUgc2ltdWxhZG8uXCIsXG4gICAgXHR9LFxuXHRcdFx0ZXJyb3JQbGFjZW1lbnQ6IGZ1bmN0aW9uKGVycm9yLCBlbGVtZW50KSB7XG5cdFx0XHRcdGlmIChlbGVtZW50LmF0dHIoXCJuYW1lXCIpID09IFwic2ltdWxhdGVkX3Rlc3RbZ3JhZGVfaWRzXVtdXCIpIHtcblx0XHRcdFx0XHRlcnJvci5pbnNlcnRBZnRlcigkKCcjZ3JhZGVzJykpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGVsZW1lbnQucGFyZW50KCkuaGFzQ2xhc3MoXCJpbnB1dC1ncm91cFwiKSkge1xuXHRcdFx0XHRcdGVycm9yLmluc2VydEFmdGVyKGVsZW1lbnQucGFyZW50KCkpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGVsZW1lbnQuaGFzQ2xhc3MoXCJjaG9zZW4tc2VsZWN0XCIpKSB7XG5cdFx0XHRcdFx0ZXJyb3IuaW5zZXJ0QWZ0ZXIoZWxlbWVudC5wYXJlbnQoKS5maW5kKFwiLmNob3Nlbi1jb250YWluZXJcIikpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGVycm9yLmluc2VydEFmdGVyKGVsZW1lbnQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0b25mb2N1c291dDogZmFsc2UsXG5cdCAgICBpbnZhbGlkSGFuZGxlcjogZnVuY3Rpb24oZm9ybSwgdmFsaWRhdG9yKSB7XG4gICAgICAgIHZhciBlcnJvcnMgPSB2YWxpZGF0b3IubnVtYmVyT2ZJbnZhbGlkcygpO1xuICAgICAgICBpZiAoZXJyb3JzKSB7XG4gICAgICAgICAgIHZhbGlkYXRvci5lcnJvckxpc3RbMF0uZWxlbWVudC5mb2N1cygpO1xuICAgICAgICB9XG5cdCAgICB9XG5cdFx0fSk7XG5cblx0XHQkKFwiI3N0dWRlbnRcIikudmFsaWRhdGUoe1xuXHRcdFx0cnVsZXM6IHtcblx0XHRcdFx0XCJzdHVkZW50W2lzX2NvbGxlZ2Vfc3R1ZGVudF1cIjoge1xuXHRcdFx0XHRcdHJlcXVpcmVkOiB0cnVlLFxuXHRcdFx0XHRcdG1pbmxlbmd0aDogMSxcblx0XHRcdFx0fSxcblx0XHRcdH0sXG5cdFx0XHRtZXNzYWdlczoge1xuICAgICAgICBcInN0dWRlbnRbaXNfY29sbGVnZV9zdHVkZW50XVwiOiBcIk1hcnF1ZSB1bWEgZGFzIGFsdGVybmF0aXZhcy5cIixcbiAgICBcdH0sXG5cdFx0XHRlcnJvclBsYWNlbWVudDogZnVuY3Rpb24oZXJyb3IsIGVsZW1lbnQpIHtcblx0XHRcdFx0aWYgKGVsZW1lbnQuYXR0cihcIm5hbWVcIikgPT0gXCJzdHVkZW50W2lzX2NvbGxlZ2Vfc3R1ZGVudF1cIikge1xuXHRcdFx0XHRcdGVycm9yLmluc2VydEFmdGVyKGVsZW1lbnQucGFyZW50KCkpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGVsZW1lbnQucGFyZW50KCkuaGFzQ2xhc3MoXCJpbnB1dC1ncm91cFwiKSkge1xuXHRcdFx0XHRcdGVycm9yLmluc2VydEFmdGVyKGVsZW1lbnQucGFyZW50KCkpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGVsZW1lbnQuaGFzQ2xhc3MoXCJjaG9zZW4tc2VsZWN0XCIpKSB7XG5cdFx0XHRcdFx0ZXJyb3IuaW5zZXJ0QWZ0ZXIoZWxlbWVudC5wYXJlbnQoKS5maW5kKFwiLmNob3Nlbi1jb250YWluZXJcIikpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGVycm9yLmluc2VydEFmdGVyKGVsZW1lbnQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0b25mb2N1c291dDogZmFsc2UsXG5cdCAgICBpbnZhbGlkSGFuZGxlcjogZnVuY3Rpb24oZm9ybSwgdmFsaWRhdG9yKSB7XG4gICAgICAgIHZhciBlcnJvcnMgPSB2YWxpZGF0b3IubnVtYmVyT2ZJbnZhbGlkcygpO1xuICAgICAgICBpZiAoZXJyb3JzKSB7XG4gICAgICAgICAgIHZhbGlkYXRvci5lcnJvckxpc3RbMF0uZWxlbWVudC5mb2N1cygpO1xuICAgICAgICB9XG5cdCAgICB9XG5cdFx0fSk7XG5cdH0sXG5cblx0ZW5naW5lR3JhcGhzID0gZnVuY3Rpb24oZ3JhcGgsIHJlc291cmNlLCB0aXRsZSwgY2F0ZWdvcmllcywgeEF4aXNUZXh0LCB5QXhpc1RleHQsIHN1Zml4KSB7XG5cdFx0aWYgKGdyYXBoLmxlbmd0aCkge1xuXHRcdFx0ZGF0YSA9IFtdO1xuXHRcdFx0c3VmaXggPSBzdWZpeCB8fCAnIGFsdW5vKHMpJztcblx0XHRcdHhBeGlzVGV4dCA9IHhBeGlzVGV4dCB8fCAnUG9yY2VudGFnZW5zIGRlIEFjZXJ0b3MnO1xuXHRcdFx0eUF4aXNUZXh0ID0geUF4aXNUZXh0IHx8ICdRdWFudGlkYWRlIGRlIEFsdW5vcyc7XG5cdFx0XHRjYXRlZ29yaWVzID0gY2F0ZWdvcmllcyB8fCBbXCIwLTEwJVwiLFwiMTEtMjAlXCIsXCIyMS0zMCVcIixcIjMxLTQwJVwiLFwiNDEtNTAlXCIsXCI1MS02MCVcIixcIjYxLTcwJVwiLFwiNzEtODAlXCIsXCI4MS05MCVcIixcIjkxLTEwMCVcIixdO1xuXG5cdFx0XHRmb3IgKGkgPSAwOyBpIDwgcmVzb3VyY2UubGVuZ3RoOyArK2kpIHtcblx0XHRcdFx0ZGF0YVtpXSA9IHt9O1xuXHRcdFx0XHRkYXRhW2ldW1wibmFtZVwiXSA9IHJlc291cmNlW2ldWzBdO1xuXHRcdFx0XHRkYXRhW2ldW1wiY29sb3JcIl0gPSByZXNvdXJjZVtpXVsxXTtcblx0XHRcdFx0ZGF0YVtpXVtcImRhdGFcIl0gPSBbXTtcblx0XHRcdFx0Zm9yIChqID0gMjsgaiA8IHJlc291cmNlW2ldLmxlbmd0aDsgKytqKSB7XG5cdFx0XHRcdFx0ZGF0YVtpXVtcImRhdGFcIl0ucHVzaChwYXJzZUZsb2F0KHJlc291cmNlW2ldW2pdKSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Z3JhcGguaGlnaGNoYXJ0cyh7XG5cdFx0XHRcdGNoYXJ0OiB7IHR5cGU6ICdhcmVhc3BsaW5lJyB9LFxuXHRcdFx0XHR0aXRsZTogeyB0ZXh0OiB0aXRsZSB9LFxuXHRcdFx0XHRwbG90T3B0aW9uczoge1xuXHRcdFx0XHRcdHNlcmllczoge1xuXHRcdFx0XHRcdFx0ZW5hYmxlTW91c2VUcmFja2luZzogZmFsc2UsXG5cdFx0XHRcdFx0XHRzaGFkb3c6IGZhbHNlLFxuXHRcdFx0XHRcdFx0YW5pbWF0aW9uOiBmYWxzZSxcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHhBeGlzOiB7XG5cdFx0XHRcdFx0dGl0bGU6IHsgdGV4dDogeEF4aXNUZXh0IH0sXG5cdFx0XHRcdFx0Y2F0ZWdvcmllczogY2F0ZWdvcmllcyxcblx0XHRcdFx0XHRvZmZzZXQ6IDIwLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR5QXhpczogeyBtaW46IDAsIG1heDogMTAwLCB0aXRsZTogeyB0ZXh0OiB5QXhpc1RleHQgfSwgdGlja0ludGVydmFsOiAxMCwgfSxcblx0XHRcdFx0dG9vbHRpcDoge1xuXHRcdFx0XHRcdHNoYXJlZDogdHJ1ZSxcblx0XHRcdFx0XHR2YWx1ZVN1ZmZpeDogc3VmaXgsXG5cdFx0XHRcdFx0Y3Jvc3NoYWlyczogdHJ1ZSxcbiAgICAgICAgICBcdFx0c2hhcmVkOiB0cnVlXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGNyZWRpdHM6IHsgZW5hYmxlZDogZmFsc2UgfSxcblx0XHRcdFx0cGxvdE9wdGlvbnM6IHtcblx0XHRcdFx0XHRhcmVhc3BsaW5lOiB7IGZpbGxPcGFjaXR5OiAwLjUgfVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRzZXJpZXM6IGRhdGFcblx0XHRcdH0pO1xuXHRcdH1cblx0fSxcblxuXHRlbmdpbmVQYWdlID0gZnVuY3Rpb24oKSB7XG5cdFx0JCgnLmNoZWNrLWFsbC1pbnB1dCcpLmNoYW5nZShmdW5jdGlvbigpe1xuXHRcdFx0aW5wdXQgPSAkKHRoaXMpO1xuXHRcdFx0Y29udGFpbmVyID0gaW5wdXQuY2xvc2VzdCgnLmNoZWNrLWFsbC1jb250YWluZXInKTtcblx0XHRcdGlmIChpbnB1dC5wcm9wKFwiY2hlY2tlZFwiKSkge1xuXHRcdFx0XHRjb250YWluZXIuZmluZChcImlucHV0W3R5cGU9J2NoZWNrYm94J11cIikucHJvcChcImNoZWNrZWRcIiwgdHJ1ZSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb250YWluZXIuZmluZChcImlucHV0W3R5cGU9J2NoZWNrYm94J11cIikucHJvcChcImNoZWNrZWRcIiwgZmFsc2UpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0JCgnLmNoZWNrLWFsbC1jb250YWluZXIgaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJykubm90KCcuY2hlY2stYWxsLWlucHV0JykuY2hhbmdlKGZ1bmN0aW9uKCl7XG5cdFx0XHRpbnB1dCA9ICQodGhpcyk7XG5cdFx0XHRjb250YWluZXIgPSBpbnB1dC5jbG9zZXN0KCcuY2hlY2stYWxsLWNvbnRhaW5lcicpO1xuXHRcdFx0aW5wdXRfY2hlY2tfYWxsID0gY29udGFpbmVyLmZpbmQoJy5jaGVjay1hbGwtaW5wdXQnKTtcblx0XHRcdGlmIChpbnB1dF9jaGVja19hbGwucHJvcChcImNoZWNrZWRcIikpIHsgaW5wdXRfY2hlY2tfYWxsLnByb3AoXCJjaGVja2VkXCIsIGZhbHNlKSB9O1xuXHRcdH0pO1xuXHRcdFxuXHRcdCQoJ1tkYXRhLXRvZ2dsZT1cInRvb2x0aXBcIl0nKS50b29sdGlwKCk7XG5cblx0XHRpZiAoY2hlY2tVcmwoXCJzaW11bGF0ZWRfdGVzdHMvbmV3XCIpKSB7XG5cdFx0XHRjb25zb2xlLmxvZygnW0lORk9dIGVuZ2luZVBhZ2UgY2FsbGVkIGF0OiBzaW11bGF0ZWRfdGVzdHMvbmV3LicpO1xuXG5cdFx0XHR2YXIgZW5naW5lRGF0ZXBpY2tlcnMgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0JCgnI3BhZ2UgLmlucHV0LWdyb3VwLmRhdGUnKS5kYXRlcGlja2VyKHtcblx0XHRcdFx0XHR0b2RheUJ0bjogXCJsaW5rZWRcIixcblx0XHRcdFx0XHRrZXlib2FyZE5hdmlnYXRpb246IGZhbHNlLFxuXHRcdFx0XHRcdGZvcmNlUGFyc2U6IGZhbHNlLFxuXHRcdFx0XHRcdGNhbGVuZGFyV2Vla3M6IHRydWUsXG5cdFx0XHRcdFx0YXV0b2Nsb3NlOiB0cnVlLFxuXHRcdFx0XHRcdGZvcm1hdDogJ2RkL21tL3l5eXknLFxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblxuXHRcdFx0dmFyIGVuZ2luZVNlbGVjdHMgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0JCgnI3BhZ2UgLmNob3Nlbi1zZWxlY3QnKS5jaG9zZW4oe3dpZHRoOiAnaW5oZXJpdCd9KTtcblx0XHRcdH1cblxuXHRcdFx0dmFyIGVuZ2luZUlDaGVja3MgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0JCgnI3BhZ2UgLmktY2hlY2tzJykuaUNoZWNrKHtcblx0XHRcdFx0XHRjaGVja2JveENsYXNzOiAnaWNoZWNrYm94X3NxdWFyZS1ncmVlbicsXG5cdFx0XHRcdFx0cmFkaW9DbGFzczogJ2lyYWRpb19zcXVhcmUtZ3JlZW4nLFxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblxuXHRcdFx0ZW5naW5lRGF0ZXBpY2tlcnMoKTtcblx0XHRcdGVuZ2luZUlDaGVja3MoKTtcblx0XHRcdGVuZ2luZVNlbGVjdHMoKTtcblxuXHRcdFx0JCgnI2RhdGVzJykub24oJ2NvY29vbjphZnRlci1pbnNlcnQnLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0ZW5naW5lRGF0ZXBpY2tlcnMoKTtcblx0XHRcdH0pO1xuXG5cdFx0XHQkKCcjcXVlc3Rpb25zJykub24oJ2NvY29vbjphZnRlci1pbnNlcnQnLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0ZW5naW5lU2VsZWN0cygpO1xuXHRcdFx0XHRlbmdpbmVJQ2hlY2tzKCk7XG5cdFx0XHR9KTtcblxuXHRcdFx0JCgnLmFkZC1xdWVzdGlvbicpLnRyaWdnZXIoJ2NsaWNrJyk7XG5cdFx0fSBlbHNlIGlmIChjaGVja1VybChcIihzaW11bGF0ZWRfdGVzdHMpL1swLTldK1wiKSkge1xuXHRcdFx0Y29uc29sZS5sb2coJ1tJTkZPXSBlbmdpbmVQYWdlIGNhbGxlZCBhdDogc2ltdWxhdGVkX3Rlc3RzL1swLTldKy4nKTtcblxuXHRcdFx0c2ltdWxhdGVkVGVzdFRhYmxlID0gJCgnI3NpbXVsYXRlZC10ZXN0LXRhYmxlJyk7XG5cdFx0XHRpZiAoc2ltdWxhdGVkVGVzdFRhYmxlLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0alF1ZXJ5LmV4dGVuZCggalF1ZXJ5LmZuLmRhdGFUYWJsZUV4dC5vU29ydCwge1xuXHRcdFx0XHRcdFwib25seS1mbG9hdC1wcmVcIjogZnVuY3Rpb24gKCBhICkge1xuXHRcdFx0XHRcdFx0cmVzdWx0ID0gcGFyc2VGbG9hdChhLm1hdGNoKC9bMC05XSpcXC5bMC05XSpcXCUvZylbMF0ucmVwbGFjZShcIiVcIiwgXCJcIikpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFwib25seS1mbG9hdC1hc2NcIjogZnVuY3Rpb24gKCBhLCBiICkge1xuXHRcdFx0XHRcdFx0cmV0dXJuICgoYSA8IGIpID8gLTEgOiAoKGEgPiBiKSA/IDEgOiAwKSk7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcIm9ubHktZmxvYXQtZGVzY1wiOiBmdW5jdGlvbiAoIGEsIGIgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gKChhIDwgYikgPyAxIDogKChhID4gYikgPyAtMSA6IDApKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHR2YXIgdCA9IHNpbXVsYXRlZFRlc3RUYWJsZS5kYXRhVGFibGUoe1xuXHRcdFx0XHRcdHJlc3BvbnNpdmU6IHRydWUsXG5cdFx0XHRcdFx0XCJvcmRlclwiOiBbWyAzLCBcImRlc2NcIiBdLCBbIDQsIFwiZGVzY1wiIF0sIFsgNSwgXCJkZXNjXCIgXSwgWyA2LCBcImRlc2NcIiBdLCBbIDcsIFwiZGVzY1wiIF0sXSxcblx0XHRcdFx0XHRcImFvQ29sdW1uRGVmc1wiOiBbXG5cdFx0XHRcdFx0eyBcInNUeXBlXCI6ICdvbmx5LWZsb2F0JywgXCJhc1NvcnRpbmdcIjogWyBcImRlc2NcIiwgXCJhc2NcIl0sIFwiYVRhcmdldHNcIjogWyAzLCA0LCA1LCA2LCA3IF0sIH0sXG5cdFx0XHRcdFx0eyBcIm9yZGVyYWJsZVwiOiBmYWxzZSwgXCJ0YXJnZXRzXCI6IFsyXSwgfVxuXHRcdFx0XHRcdF0sXG5cdFx0XHRcdFx0bGFuZ3VhZ2U6IHtcblx0XHRcdFx0XHRcdFwic0VtcHR5VGFibGVcIjogXCJOZW5odW0gcmVnaXN0cm8gZW5jb250cmFkb1wiLFxuXHRcdFx0XHRcdFx0XCJzSW5mb1wiOiBcIk1vc3RyYW5kbyBkZSBfU1RBUlRfIGF0w6kgX0VORF8gZGUgX1RPVEFMXyByZWdpc3Ryb3NcIixcblx0XHRcdFx0XHRcdFwic0luZm9FbXB0eVwiOiBcIk1vc3RyYW5kbyAwIGF0w6kgMCBkZSAwIHJlZ2lzdHJvc1wiLFxuXHRcdFx0XHRcdFx0XCJzSW5mb0ZpbHRlcmVkXCI6IFwiKEZpbHRyYWRvcyBkZSBfTUFYXyByZWdpc3Ryb3MpXCIsXG5cdFx0XHRcdFx0XHRcInNJbmZvUG9zdEZpeFwiOiBcIlwiLFxuXHRcdFx0XHRcdFx0XCJzSW5mb1Rob3VzYW5kc1wiOiBcIi5cIixcblx0XHRcdFx0XHRcdFwic0xlbmd0aE1lbnVcIjogXCJfTUVOVV8gJm5ic3A7IHJlc3VsdGFkb3MgcG9yIHDDoWdpbmFcIixcblx0XHRcdFx0XHRcdFwic0xvYWRpbmdSZWNvcmRzXCI6IFwiQ2FycmVnYW5kby4uLlwiLFxuXHRcdFx0XHRcdFx0XCJzUHJvY2Vzc2luZ1wiOiBcIlByb2Nlc3NhbmRvLi4uXCIsXG5cdFx0XHRcdFx0XHRcInNaZXJvUmVjb3Jkc1wiOiBcIk5lbmh1bSByZWdpc3RybyBlbmNvbnRyYWRvXCIsXG5cdFx0XHRcdFx0XHRcInNTZWFyY2hcIjogXCJQZXNxdWlzYXIgJm5ic3A7Jm5ic3A7XCIsXG5cdFx0XHRcdFx0XHRcIm9QYWdpbmF0ZVwiOiB7XG5cdFx0XHRcdFx0XHRcdFwic05leHRcIjogXCJQcsOzeGltb1wiLFxuXHRcdFx0XHRcdFx0XHRcInNQcmV2aW91c1wiOiBcIkFudGVyaW9yXCIsXG5cdFx0XHRcdFx0XHRcdFwic0ZpcnN0XCI6IFwiUHJpbWVpcm9cIixcblx0XHRcdFx0XHRcdFx0XCJzTGFzdFwiOiBcIsOabHRpbW9cIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFwib0FyaWFcIjoge1xuXHRcdFx0XHRcdFx0XHRcInNTb3J0QXNjZW5kaW5nXCI6IFwiOiBPcmRlbmFyIGNvbHVuYXMgZGUgZm9ybWEgYXNjZW5kZW50ZVwiLFxuXHRcdFx0XHRcdFx0XHRcInNTb3J0RGVzY2VuZGluZ1wiOiBcIjogT3JkZW5hciBjb2x1bmFzIGRlIGZvcm1hIGRlc2NlbmRlbnRlXCJcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdbSU5GT10gc2ltdWxhdGVkVGVzdFRhYmxlIGFscmVhZHkgbG9hZGVkLicpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSBpZiAoY2hlY2tVcmwoXCJzaW11bGF0ZWRfdGVzdHNcIikpIHtcblx0XHRcdGNvbnNvbGUubG9nKCdbSU5GT10gZW5naW5lUGFnZSBjYWxsZWQgYXQ6IHNpbXVsYXRlZF90ZXN0cy4nKTtcblxuXHRcdFx0c2ltdWxhdGVkVGVzdHNUYWJsZSA9ICQoJyNzaW11bGF0ZWQtdGVzdHMtdGFibGUnKTtcblx0XHRcdGlmIChzaW11bGF0ZWRUZXN0c1RhYmxlLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0dmFyIHQgPSBzaW11bGF0ZWRUZXN0c1RhYmxlLmRhdGFUYWJsZSh7XG5cdFx0XHRcdFx0cmVzcG9uc2l2ZTogdHJ1ZSxcblx0XHRcdFx0XHRcImNvbHVtbkRlZnNcIjogWyB7IFwidGFyZ2V0c1wiOiBbMiwgMywgNCwgNSwgNiwgN10sIFwib3JkZXJhYmxlXCI6IGZhbHNlIH0gXSxcblx0XHRcdFx0XHRsYW5ndWFnZToge1xuXHRcdFx0XHRcdFx0XCJzRW1wdHlUYWJsZVwiOiBcIk5lbmh1bSByZWdpc3RybyBlbmNvbnRyYWRvXCIsXG5cdFx0XHRcdFx0XHRcInNJbmZvXCI6IFwiTW9zdHJhbmRvIGRlIF9TVEFSVF8gYXTDqSBfRU5EXyBkZSBfVE9UQUxfIHJlZ2lzdHJvc1wiLFxuXHRcdFx0XHRcdFx0XCJzSW5mb0VtcHR5XCI6IFwiTW9zdHJhbmRvIDAgYXTDqSAwIGRlIDAgcmVnaXN0cm9zXCIsXG5cdFx0XHRcdFx0XHRcInNJbmZvRmlsdGVyZWRcIjogXCIoRmlsdHJhZG9zIGRlIF9NQVhfIHJlZ2lzdHJvcylcIixcblx0XHRcdFx0XHRcdFwic0luZm9Qb3N0Rml4XCI6IFwiXCIsXG5cdFx0XHRcdFx0XHRcInNJbmZvVGhvdXNhbmRzXCI6IFwiLlwiLFxuXHRcdFx0XHRcdFx0XCJzTGVuZ3RoTWVudVwiOiBcIl9NRU5VXyAmbmJzcDsgcmVzdWx0YWRvcyBwb3IgcMOhZ2luYVwiLFxuXHRcdFx0XHRcdFx0XCJzTG9hZGluZ1JlY29yZHNcIjogXCJDYXJyZWdhbmRvLi4uXCIsXG5cdFx0XHRcdFx0XHRcInNQcm9jZXNzaW5nXCI6IFwiUHJvY2Vzc2FuZG8uLi5cIixcblx0XHRcdFx0XHRcdFwic1plcm9SZWNvcmRzXCI6IFwiTmVuaHVtIHJlZ2lzdHJvIGVuY29udHJhZG9cIixcblx0XHRcdFx0XHRcdFwic1NlYXJjaFwiOiBcIlBlc3F1aXNhciAmbmJzcDsmbmJzcDtcIixcblx0XHRcdFx0XHRcdFwib1BhZ2luYXRlXCI6IHtcblx0XHRcdFx0XHRcdFx0XCJzTmV4dFwiOiBcIlByw7N4aW1vXCIsXG5cdFx0XHRcdFx0XHRcdFwic1ByZXZpb3VzXCI6IFwiQW50ZXJpb3JcIixcblx0XHRcdFx0XHRcdFx0XCJzRmlyc3RcIjogXCJQcmltZWlyb1wiLFxuXHRcdFx0XHRcdFx0XHRcInNMYXN0XCI6IFwiw5psdGltb1wiXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XCJvQXJpYVwiOiB7XG5cdFx0XHRcdFx0XHRcdFwic1NvcnRBc2NlbmRpbmdcIjogXCI6IE9yZGVuYXIgY29sdW5hcyBkZSBmb3JtYSBhc2NlbmRlbnRlXCIsXG5cdFx0XHRcdFx0XHRcdFwic1NvcnREZXNjZW5kaW5nXCI6IFwiOiBPcmRlbmFyIGNvbHVuYXMgZGUgZm9ybWEgZGVzY2VuZGVudGVcIlxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29uc29sZS5sb2coJ1tJTkZPXSBzaW11bGF0ZWRUZXN0c1RhYmxlIGFscmVhZHkgbG9hZGVkLicpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSBpZiAoY2hlY2tVcmwoXCIoc2ltdWxhdGVkX3Rlc3RzLylbMC05XSsoL2VkaXRfcXVlc3Rpb25zKVthLXpBLVowLTlcXC9cXD9cXD1cXCVcXCZcXFxcK1xcLlxcJVxcLVxcX10qXCIpKSB7XG5cdFx0XHRjb25zb2xlLmxvZygnW0lORk9dIGVuZ2luZVBhZ2UgY2FsbGVkIGF0OiBzaW11bGF0ZWRfdGVzdHMvWzAtOV0rL2VkaXRfcXVlc3Rpb25zLicpO1xuXG5cdFx0XHR2YXIgZW5naW5lU2VsZWN0cyA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHQkKCcjcGFnZSAuY2hvc2VuLXNlbGVjdCcpLmNob3Nlbih7d2lkdGg6ICdpbmhlcml0J30pO1xuXHRcdFx0fVxuXG5cdFx0XHR2YXIgZW5naW5lSUNoZWNrcyA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHQkKCcjcGFnZSAuaS1jaGVja3MnKS5pQ2hlY2soe1xuXHRcdFx0XHRcdGNoZWNrYm94Q2xhc3M6ICdpY2hlY2tib3hfc3F1YXJlLWdyZWVuJyxcblx0XHRcdFx0XHRyYWRpb0NsYXNzOiAnaXJhZGlvX3NxdWFyZS1ncmVlbicsXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXG5cdFx0XHRlbmdpbmVJQ2hlY2tzKCk7XG5cdFx0XHRlbmdpbmVTZWxlY3RzKCk7XG5cblx0XHRcdCQoJyNxdWVzdGlvbnMgLnF1ZXN0aW9uIC5rbm93bGVkZ2UtYXJlYS1zZWxlY3QnKS5jaGFuZ2UoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHNlbGVjdCA9ICQodGhpcyk7XG5cdFx0XHRcdHF1ZXN0aW9uID0gc2VsZWN0LmNsb3Nlc3QoJy5xdWVzdGlvbicpO1xuXHRcdFx0XHRxdWVzdGlvbi5maW5kKCcua25vd2xlZGdlLW9iamVjdC1zZWxlY3Qgb3B0aW9uJykucHJvcCgnc2VsZWN0ZWQnLCBmYWxzZSk7XG5cdFx0XHRcdHF1ZXN0aW9uLmZpbmQoJy5za2lsbC1zZWxlY3Qgb3B0aW9uJykucHJvcCgnc2VsZWN0ZWQnLCBmYWxzZSk7XG5cdFx0XHRcdHF1ZXN0aW9uLmZpbmQoJy5jaG9zZW4tY29udGFpbmVyJykucmVtb3ZlKCk7XG5cdFx0XHRcdHF1ZXN0aW9uLmZpbmQoJy5rbm93bGVkZ2Utb2JqZWN0LXNlbGVjdC5jaG9zZW4tc2VsZWN0JykuY2hvc2VuKCdkZXN0cm95Jyk7XG5cdFx0XHRcdHF1ZXN0aW9uLmZpbmQoJy5za2lsbC1zZWxlY3QuY2hvc2VuLXNlbGVjdCcpLmNob3NlbignZGVzdHJveScpO1xuXHRcdFx0XHRxdWVzdGlvbi5maW5kKCcua25vd2xlZGdlLW9iamVjdC1zZWxlY3QnKS5hZGRDbGFzcygnaGlkZGVuJykucmVtb3ZlQ2xhc3MoJ2Nob3Nlbi1zZWxlY3QnKTtcblx0XHRcdFx0cXVlc3Rpb24uZmluZCgnLnNraWxsLXNlbGVjdCcpLmFkZENsYXNzKCdoaWRkZW4nKS5yZW1vdmVDbGFzcygnY2hvc2VuLXNlbGVjdCcpO1xuXG5cdFx0XHRcdHF1ZXN0aW9uLmZpbmQoJy5mcm9tLWtub3dsZWRnZS1hcmVhLScgKyBzZWxlY3QudmFsKCkpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKS5hZGRDbGFzcygnY2hvc2VuLXNlbGVjdCcpLmNob3Nlbih7d2lkdGg6ICdpbmhlcml0J30pO1xuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIGlmIChjaGVja1VybChcIihzaW11bGF0ZWRfdGVzdHMvKVswLTldKygvZWRpdClbYS16QS1aMC05XFwvXFw/XFw9XFwlXFwmXFxcXCtcXC5cXCVcXC1cXF9dKlwiKSkge1xuXHRcdFx0Y29uc29sZS5sb2coJ1tJTkZPXSBlbmdpbmVQYWdlIGNhbGxlZCBhdDogc2ltdWxhdGVkX3Rlc3RzL1swLTldKy9lZGl0LicpO1xuXG5cdFx0XHR2YXIgZW5naW5lRGF0ZXBpY2tlcnMgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0JCgnI3BhZ2UgLmlucHV0LWdyb3VwLmRhdGUnKS5kYXRlcGlja2VyKHtcblx0XHRcdFx0XHR0b2RheUJ0bjogXCJsaW5rZWRcIixcblx0XHRcdFx0XHRrZXlib2FyZE5hdmlnYXRpb246IGZhbHNlLFxuXHRcdFx0XHRcdGZvcmNlUGFyc2U6IGZhbHNlLFxuXHRcdFx0XHRcdGNhbGVuZGFyV2Vla3M6IHRydWUsXG5cdFx0XHRcdFx0YXV0b2Nsb3NlOiB0cnVlLFxuXHRcdFx0XHRcdGZvcm1hdDogJ2RkL21tL3l5eXknLFxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblxuXHRcdFx0dmFyIGVuZ2luZUlDaGVja3MgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0JCgnI3BhZ2UgLmktY2hlY2tzJykuaUNoZWNrKHtcblx0XHRcdFx0XHRjaGVja2JveENsYXNzOiAnaWNoZWNrYm94X3NxdWFyZS1ncmVlbicsXG5cdFx0XHRcdFx0cmFkaW9DbGFzczogJ2lyYWRpb19zcXVhcmUtZ3JlZW4nLFxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblxuXHRcdFx0ZW5naW5lRGF0ZXBpY2tlcnMoKTtcblx0XHRcdGVuZ2luZUlDaGVja3MoKTtcblxuXHRcdFx0JCgnI2RhdGVzJykub24oJ2NvY29vbjphZnRlci1pbnNlcnQnLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0ZW5naW5lRGF0ZXBpY2tlcnMoKTtcblx0XHRcdH0pO1xuXHRcdH0gZWxzZSBpZiAoY2hlY2tVcmwoXCIoc2ltdWxhdGVkX3Rlc3RzLylbMC05XFwvXSooc2hvd19zdGF0aXN0aWNfcmVwb3J0KVthLXpBLVowLTlcXC9cXD9cXD1cXCVcXCZcXFxcK1xcLlxcJVxcLVxcX10qXCIpKSB7XG5cdFx0XHRjb25zb2xlLmxvZygnW0lORk9dIGVuZ2luZVBhZ2UgY2FsbGVkIGF0OiBzaW11bGF0ZWRfdGVzdHMvWzAtOV0rL3Nob3dfc3RhdGlzdGljX3JlcG9ydC4nKTtcblxuXHRcdFx0dmFyIHJlc291cmNlMSA9ICQoJ3RhYmxlI3N0YXRpc3RpYy1yZXBvcnQtcmVzb3VyY2VfX2dlbmVyYWwgdHInKS5nZXQoKS5tYXAoZnVuY3Rpb24ocm93KSB7XG5cdFx0XHRcdHJldHVybiAkKHJvdykuZmluZCgndGQnKS5nZXQoKS5tYXAoZnVuY3Rpb24oY2VsbCkge1xuXHRcdFx0XHRcdHJldHVybiAkKGNlbGwpLmh0bWwoKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHRcdHZhciByZXNvdXJjZTIgPSAkKCd0YWJsZSNzdGF0aXN0aWMtcmVwb3J0LXJlc291cmNlX18xIHRyJykuZ2V0KCkubWFwKGZ1bmN0aW9uKHJvdykge1xuXHRcdFx0XHRyZXR1cm4gJChyb3cpLmZpbmQoJ3RkJykuZ2V0KCkubWFwKGZ1bmN0aW9uKGNlbGwpIHtcblx0XHRcdFx0XHRyZXR1cm4gJChjZWxsKS5odG1sKCk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0XHR2YXIgcmVzb3VyY2UzID0gJCgndGFibGUjc3RhdGlzdGljLXJlcG9ydC1yZXNvdXJjZV9fMiB0cicpLmdldCgpLm1hcChmdW5jdGlvbihyb3cpIHtcblx0XHRcdFx0cmV0dXJuICQocm93KS5maW5kKCd0ZCcpLmdldCgpLm1hcChmdW5jdGlvbihjZWxsKSB7XG5cdFx0XHRcdFx0cmV0dXJuICQoY2VsbCkuaHRtbCgpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0XHRncmFwaDEgPSAkKFwiI3N0YXRpc3RpYy1yZXBvcnQtZ3JhcGgxXCIpO1xuXHRcdFx0Z3JhcGgyID0gJChcIiNzdGF0aXN0aWMtcmVwb3J0LWdyYXBoMlwiKTtcblx0XHRcdGdyYXBoMyA9ICQoXCIjc3RhdGlzdGljLXJlcG9ydC1ncmFwaDNcIik7XG5cdFx0XHRlbmdpbmVHcmFwaHMoZ3JhcGgxLCByZXNvdXJjZTEsIFwiTcOpZGlhcyBkZSBBY2VydG9zIEdlcmFsXCIpO1xuXHRcdFx0ZW5naW5lR3JhcGhzKGdyYXBoMiwgcmVzb3VyY2UyLCBcIk3DqWRpYXMgZGUgQWNlcnRvcyBwb3Igw4FyZWEgZGUgQ29uaGVjaW1lbnRvIC0gUGFydGUgMVwiKTtcblx0XHRcdGVuZ2luZUdyYXBocyhncmFwaDMsIHJlc291cmNlMywgXCJNw6lkaWFzIGRlIEFjZXJ0b3MgcG9yIMOBcmVhIGRlIENvbmhlY2ltZW50byAtIFBhcnRlIDJcIik7XG5cblx0XHRcdCQoJy5uZXN0YWJsZS1saXN0JykubmVzdGFibGUoKTtcblx0XHRcdCQoJ1tkYXRhLWFjdGlvbj1cImNvbGxhcHNlXCInKS50cmlnZ2VyKCdjbGljaycpO1xuXHRcdH0gZWxzZSBpZiAoY2hlY2tVcmwoXCIoc2ltdWxhdGVkX3Rlc3RzLylbMC05XSsoL25ld19hbnN3ZXJzKVwiKSl7XG5cdFx0XHRjb25zb2xlLmxvZygnW0lORk9dIGVuZ2luZVBhZ2UgY2FsbGVkIGF0OiBzaW11bGF0ZWRfdGVzdHMvWzAtOV0rL25ld19hbnN3ZXJzLicpO1xuXG5cdFx0XHR2YXIgbmV3QW5zd2Vyc0Ryb3B6b25lID0gbmV3IERyb3B6b25lKFwiI25ldy1hbnN3ZXJzLWRyb3B6b25lXCIsIHtcblx0XHRcdFx0cGFyYW1OYW1lOiBcImFuc3dlcnNcIixcblx0XHRcdFx0YXV0b1Byb2Nlc3NRdWV1ZTogZmFsc2UsXG5cdFx0XHR9KTtcblx0XHRcdG5ld0Fuc3dlcnNEcm9wem9uZS5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJidXR0b25bdHlwZT1zdWJtaXRdXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihlKSB7XG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0bmV3QW5zd2Vyc0Ryb3B6b25lLnByb2Nlc3NRdWV1ZSgpO1xuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIGlmIChjaGVja1VybChcInNpbXVsYXRlZF90ZXN0cy9zaG93X2Fuc3dlcl9jYXJkc1wiKSl7XG5cdFx0XHQkKCcjc2ltdWxhdGVkX3Rlc3RfaWQnKS5jaG9zZW4oe3dpZHRoOiAnaW5oZXJpdCd9KTtcblx0XHR9IGVsc2UgaWYgKGNoZWNrVXJsKFwic3R1ZGVudHMvWzAtOV0rL2Rhc2hib2FyZFwiKSkge1xuXHRcdFx0Y29uc29sZS5sb2coJ1tJTkZPXSBlbmdpbmVQYWdlIGNhbGxlZCBhdDogc3R1ZGVudHMvWzAtOV0rL2Rhc2hib2FyZC4nKTtcblxuXHRcdFx0aWYgKCQoJ3RhYmxlI2Rhc2hib2FyZC1zaW11bGF0ZWQtdGVzdC1ncmFwaC1yZXNvdXJjZScpLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0dmFyIHJlc291cmNlID0gJCgndGFibGUjZGFzaGJvYXJkLXNpbXVsYXRlZC10ZXN0LWdyYXBoLXJlc291cmNlIHRyJykuZ2V0KCkubWFwKGZ1bmN0aW9uKHJvdykge1xuXHRcdFx0XHRcdHJldHVybiAkKHJvdykuZmluZCgndGQnKS5nZXQoKS5tYXAoZnVuY3Rpb24oY2VsbCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuICQoY2VsbCkuaHRtbCgpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHRjYXRlZ29yaWVzID0gW107XG5cdFx0XHRcdGZvciAoaSA9IDI7IGkgPCByZXNvdXJjZS5sZW5ndGg7ICsraSkge1xuXHRcdFx0XHRcdGNhdGVnb3JpZXMucHVzaChyZXNvdXJjZVtpXVswXSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZGF0YSA9IFtdO1xuXHRcdFx0XHRmb3IgKGogPSAxOyBqIDwgcmVzb3VyY2VbMF0ubGVuZ3RoOyArK2opIHtcblx0XHRcdFx0XHRkYXRhW2otMV0gPSB7fTtcblx0XHRcdFx0XHRkYXRhW2otMV1bXCJkYXRhXCJdID0gW107XG5cdFx0XHRcdFx0ZGF0YVtqLTFdW1wibmFtZVwiXSA9IHJlc291cmNlWzBdW2pdO1xuXHRcdFx0XHRcdGRhdGFbai0xXVtcImNvbG9yXCJdID0gcmVzb3VyY2VbMV1bal07XG5cblx0XHRcdFx0XHRmb3IgKGsgPSAyOyBrIDwgcmVzb3VyY2UubGVuZ3RoOyArK2spIHtcblx0XHRcdFx0XHRcdGRhdGFbai0xXVtcImRhdGFcIl0ucHVzaChwYXJzZUZsb2F0KHJlc291cmNlW2tdW2pdKSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0JCgnI2Rhc2hib2FyZC1zaW11bGF0ZWQtdGVzdC1ncmFwaCcpLmhpZ2hjaGFydHMoe1xuXHRcdFx0XHRcdGNoYXJ0OiB7XG5cdFx0XHRcdFx0XHR0eXBlOiAnY29sdW1uJyxcblx0XHRcdFx0XHRcdGhlaWdodDogMjIwLFxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0dGl0bGU6IHsgdGV4dDogJyAnICB9LFxuXHRcdFx0XHRcdGxlZ2VuZDoge1xuXHRcdFx0XHRcdFx0bGF5b3V0OiAnaG9yaXpvbnRhbCcsXG5cdFx0XHRcdFx0XHRhbGlnbjogJ2NlbnRlcicsXG5cdFx0XHRcdFx0XHR2ZXJ0aWNhbEFsaWduOiAndG9wJyxcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGNyZWRpdHM6IGZhbHNlLFxuXHRcdFx0XHRcdHhBeGlzOiB7XG5cdFx0XHRcdFx0XHRjYXRlZ29yaWVzOiBjYXRlZ29yaWVzLFxuXHRcdFx0XHRcdFx0Y3Jvc3NoYWlyOiB0cnVlXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHR5QXhpczoge1xuXHRcdFx0XHQvLyBtaW46IDAsXG5cdFx0XHRcdC8vIG1heDogMTAwLFxuXHRcdFx0XHR0aWNrSW50ZXJ2YWw6IDEwLFxuXHRcdFx0XHR0aXRsZToge1xuXHRcdFx0XHRcdHRleHQ6ICdQb3JjZW50YWdlbSBkZSBhY2VydG9zJ1xuXHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHRvb2x0aXA6IHtcblx0XHRcdFx0XHRoZWFkZXJGb3JtYXQ6ICc8c3BhbiBzdHlsZT1cImZvbnQtc2l6ZToxMHB4XCI+e3BvaW50LmtleX08L3NwYW4+PHRhYmxlPicsXG5cdFx0XHRcdFx0cG9pbnRGb3JtYXQ6ICc8dHI+PHRkIHN0eWxlPVwiY29sb3I6e3Nlcmllcy5jb2xvcn07cGFkZGluZzowXCI+e3Nlcmllcy5uYW1lfTogPC90ZD4nICtcblx0XHRcdFx0XHQnPHRkIHN0eWxlPVwicGFkZGluZzowXCI+PGI+e3BvaW50Lnk6LjFmfSAlPC9iPjwvdGQ+PC90cj4nLFxuXHRcdFx0XHRcdGZvb3RlckZvcm1hdDogJzwvdGFibGU+Jyxcblx0XHRcdFx0XHRzaGFyZWQ6IHRydWUsXG5cdFx0XHRcdFx0dXNlSFRNTDogdHJ1ZVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRwbG90T3B0aW9uczoge1xuXHRcdFx0XHRcdGNvbHVtbjoge1xuXHRcdFx0XHRcdFx0cG9pbnRQYWRkaW5nOiAwLjIsXG5cdFx0XHRcdFx0XHRib3JkZXJXaWR0aDogMFxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0c2VyaWVzOiBkYXRhXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSBpZiAoY2hlY2tVcmwoXCJzdHVkZW50cy9uZXdcIikpIHtcblx0XHR9IGVsc2UgaWYgKGNoZWNrVXJsKFwic3R1ZGVudHMvWzAtOV0rXCIpKSB7XG5cdFx0XHRjb25zb2xlLmxvZygnW0lORk9dIGVuZ2luZVBhZ2UgY2FsbGVkIGF0OiBzdHVkZW50cy9bMC05XSsuJyk7XG5cblx0XHRcdCQoJy5oaXN0b2dyYW1zJykuZWFjaChmdW5jdGlvbihpbmRleCl7XG5cdFx0XHRcdHRhYmxlMSA9ICQodGhpcykuZmluZCgndGFibGUuc3RhdGlzdGljLXJlcG9ydC1yZXNvdXJjZV9fZ2VuZXJhbCB0cicpO1xuXHRcdFx0XHR0YWJsZTIgPSAkKHRoaXMpLmZpbmQoJ3RhYmxlLnN0YXRpc3RpYy1yZXBvcnQtcmVzb3VyY2VfXzEgdHInKTtcblx0XHRcdFx0dGFibGUzID0gJCh0aGlzKS5maW5kKCd0YWJsZS5zdGF0aXN0aWMtcmVwb3J0LXJlc291cmNlX18yIHRyJyk7XG5cdFx0XHRcdGdyYXBoMSA9ICQodGhpcykuZmluZCgnLmhpc3RvZ3JhbTEnKTtcblx0XHRcdFx0Z3JhcGgyID0gJCh0aGlzKS5maW5kKCcuaGlzdG9ncmFtMicpO1xuXHRcdFx0XHRncmFwaDMgPSAkKHRoaXMpLmZpbmQoJy5oaXN0b2dyYW0zJyk7XG5cblx0XHRcdFx0dmFyIHJlc291cmNlMSA9IHRhYmxlMS5nZXQoKS5tYXAoZnVuY3Rpb24ocm93KSB7XG5cdFx0XHRcdFx0cmV0dXJuICQocm93KS5maW5kKCd0ZCcpLmdldCgpLm1hcChmdW5jdGlvbihjZWxsKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gJChjZWxsKS5odG1sKCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHR2YXIgcmVzb3VyY2UyID0gdGFibGUyLmdldCgpLm1hcChmdW5jdGlvbihyb3cpIHtcblx0XHRcdFx0XHRyZXR1cm4gJChyb3cpLmZpbmQoJ3RkJykuZ2V0KCkubWFwKGZ1bmN0aW9uKGNlbGwpIHtcblx0XHRcdFx0XHRcdHJldHVybiAkKGNlbGwpLmh0bWwoKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdHZhciByZXNvdXJjZTMgPSB0YWJsZTMuZ2V0KCkubWFwKGZ1bmN0aW9uKHJvdykge1xuXHRcdFx0XHRcdHJldHVybiAkKHJvdykuZmluZCgndGQnKS5nZXQoKS5tYXAoZnVuY3Rpb24oY2VsbCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuICQoY2VsbCkuaHRtbCgpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHRlbmdpbmVHcmFwaHMoZ3JhcGgxLCByZXNvdXJjZTEsIFwiTcOpZGlhcyBkZSBBY2VydG9zIEdlcmFsXCIpO1xuXHRcdFx0XHRlbmdpbmVHcmFwaHMoZ3JhcGgyLCByZXNvdXJjZTIsIFwiTcOpZGlhcyBkZSBBY2VydG9zIHBvciDDgXJlYSBkZSBDb25oZWNpbWVudG8gLSBQYXJ0ZSAyXCIpO1xuXHRcdFx0XHRlbmdpbmVHcmFwaHMoZ3JhcGgzLCByZXNvdXJjZTMsIFwiTcOpZGlhcyBkZSBBY2VydG9zIHBvciDDgXJlYSBkZSBDb25oZWNpbWVudG8gLSBQYXJ0ZSAyXCIpO1xuXHRcdFx0fSk7XG5cblxuXHRcdFx0JCgnLm5lc3RhYmxlLWxpc3QnKS5uZXN0YWJsZSgpO1xuXHRcdFx0JCgnW2RhdGEtYWN0aW9uPVwiY29sbGFwc2VcIicpLnRyaWdnZXIoJ2NsaWNrJyk7XG5cdFx0XHQkKCdzcGFuLnBpZScpLnBlaXR5KCdwaWUnLCB7IGZpbGw6IFsnIzFhYjM5NCcsICcjZDdkN2Q3JywgJyNmZmZmZmYnXSB9KTtcblx0XHR9IGVsc2UgaWYgKGNoZWNrVXJsKFwic3R1ZGVudHNcIikpIHtcblx0XHRcdGNvbnNvbGUubG9nKCdbSU5GT10gZW5naW5lUGFnZSBjYWxsZWQgYXQ6IHN0dWRlbnRzLicpO1xuXG5cdFx0XHRzdHVkZW50c1RhYmxlID0gJCgnI3N0dWRlbnRzLXRhYmxlJyk7XG5cdFx0XHRpZiAoc3R1ZGVudHNUYWJsZS5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdHZhciB0ID0gc3R1ZGVudHNUYWJsZS5kYXRhVGFibGUoe1xuXHRcdFx0XHRcdHJlc3BvbnNpdmU6IHRydWUsXG5cdFx0XHRcdFx0XCJjb2x1bW5EZWZzXCI6IFsgeyBcInRhcmdldHNcIjogWzQsIDUsIDZdLCBcIm9yZGVyYWJsZVwiOiBmYWxzZSB9IF0sXG5cdFx0XHRcdFx0bGFuZ3VhZ2U6IHtcblx0XHRcdFx0XHRcdFwic0VtcHR5VGFibGVcIjogXCJOZW5odW0gcmVnaXN0cm8gZW5jb250cmFkb1wiLFxuXHRcdFx0XHRcdFx0XCJzSW5mb1wiOiBcIk1vc3RyYW5kbyBkZSBfU1RBUlRfIGF0w6kgX0VORF8gZGUgX1RPVEFMXyByZWdpc3Ryb3NcIixcblx0XHRcdFx0XHRcdFwic0luZm9FbXB0eVwiOiBcIk1vc3RyYW5kbyAwIGF0w6kgMCBkZSAwIHJlZ2lzdHJvc1wiLFxuXHRcdFx0XHRcdFx0XCJzSW5mb0ZpbHRlcmVkXCI6IFwiKEZpbHRyYWRvcyBkZSBfTUFYXyByZWdpc3Ryb3MpXCIsXG5cdFx0XHRcdFx0XHRcInNJbmZvUG9zdEZpeFwiOiBcIlwiLFxuXHRcdFx0XHRcdFx0XCJzSW5mb1Rob3VzYW5kc1wiOiBcIi5cIixcblx0XHRcdFx0XHRcdFwic0xlbmd0aE1lbnVcIjogXCJfTUVOVV8gJm5ic3A7IHJlc3VsdGFkb3MgcG9yIHDDoWdpbmFcIixcblx0XHRcdFx0XHRcdFwic0xvYWRpbmdSZWNvcmRzXCI6IFwiQ2FycmVnYW5kby4uLlwiLFxuXHRcdFx0XHRcdFx0XCJzUHJvY2Vzc2luZ1wiOiBcIlByb2Nlc3NhbmRvLi4uXCIsXG5cdFx0XHRcdFx0XHRcInNaZXJvUmVjb3Jkc1wiOiBcIk5lbmh1bSByZWdpc3RybyBlbmNvbnRyYWRvXCIsXG5cdFx0XHRcdFx0XHRcInNTZWFyY2hcIjogXCJQZXNxdWlzYXIgJm5ic3A7Jm5ic3A7XCIsXG5cdFx0XHRcdFx0XHRcIm9QYWdpbmF0ZVwiOiB7XG5cdFx0XHRcdFx0XHRcdFwic05leHRcIjogXCJQcsOzeGltb1wiLFxuXHRcdFx0XHRcdFx0XHRcInNQcmV2aW91c1wiOiBcIkFudGVyaW9yXCIsXG5cdFx0XHRcdFx0XHRcdFwic0ZpcnN0XCI6IFwiUHJpbWVpcm9cIixcblx0XHRcdFx0XHRcdFx0XCJzTGFzdFwiOiBcIsOabHRpbW9cIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFwib0FyaWFcIjoge1xuXHRcdFx0XHRcdFx0XHRcInNTb3J0QXNjZW5kaW5nXCI6IFwiOiBPcmRlbmFyIGNvbHVuYXMgZGUgZm9ybWEgYXNjZW5kZW50ZVwiLFxuXHRcdFx0XHRcdFx0XHRcInNTb3J0RGVzY2VuZGluZ1wiOiBcIjogT3JkZW5hciBjb2x1bmFzIGRlIGZvcm1hIGRlc2NlbmRlbnRlXCJcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdbSU5GT10gc3R1ZGVudHNUYWJsZSBhbHJlYWR5IGxvYWRlZC4nKTtcblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKGNoZWNrVXJsKFwic3R1ZGVudHMvcmVzdWx0c1wiKSkge1xuXHRcdFx0Y29uc29sZS5sb2coJ1tJTkZPXSBlbmdpbmVQYWdlIGNhbGxlZCBhdDogc3R1ZGVudHMvcmVzdWx0cy4nKTtcblxuXHRcdFx0c3R1ZGVudHNSZXN1bHRzVGFibGUgPSAkKCcjc3R1ZGVudHMtcmVzdWx0cy10YWJsZScpO1xuXHRcdFx0aWYgKHN0dWRlbnRzUmVzdWx0c1RhYmxlLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0dmFyIHQgPSBzdHVkZW50c1Jlc3VsdHNUYWJsZS5kYXRhVGFibGUoe1xuXHRcdFx0XHRcdHJlc3BvbnNpdmU6IHRydWUsXG5cdFx0XHRcdFx0bGFuZ3VhZ2U6IHtcblx0XHRcdFx0XHRcdFwic0VtcHR5VGFibGVcIjogXCJOZW5odW0gcmVnaXN0cm8gZW5jb250cmFkb1wiLFxuXHRcdFx0XHRcdFx0XCJzSW5mb1wiOiBcIk1vc3RyYW5kbyBkZSBfU1RBUlRfIGF0w6kgX0VORF8gZGUgX1RPVEFMXyByZWdpc3Ryb3NcIixcblx0XHRcdFx0XHRcdFwic0luZm9FbXB0eVwiOiBcIk1vc3RyYW5kbyAwIGF0w6kgMCBkZSAwIHJlZ2lzdHJvc1wiLFxuXHRcdFx0XHRcdFx0XCJzSW5mb0ZpbHRlcmVkXCI6IFwiKEZpbHRyYWRvcyBkZSBfTUFYXyByZWdpc3Ryb3MpXCIsXG5cdFx0XHRcdFx0XHRcInNJbmZvUG9zdEZpeFwiOiBcIlwiLFxuXHRcdFx0XHRcdFx0XCJzSW5mb1Rob3VzYW5kc1wiOiBcIi5cIixcblx0XHRcdFx0XHRcdFwic0xlbmd0aE1lbnVcIjogXCJfTUVOVV8gJm5ic3A7IHJlc3VsdGFkb3MgcG9yIHDDoWdpbmFcIixcblx0XHRcdFx0XHRcdFwic0xvYWRpbmdSZWNvcmRzXCI6IFwiQ2FycmVnYW5kby4uLlwiLFxuXHRcdFx0XHRcdFx0XCJzUHJvY2Vzc2luZ1wiOiBcIlByb2Nlc3NhbmRvLi4uXCIsXG5cdFx0XHRcdFx0XHRcInNaZXJvUmVjb3Jkc1wiOiBcIk5lbmh1bSByZWdpc3RybyBlbmNvbnRyYWRvXCIsXG5cdFx0XHRcdFx0XHRcInNTZWFyY2hcIjogXCJQZXNxdWlzYXIgJm5ic3A7Jm5ic3A7XCIsXG5cdFx0XHRcdFx0XHRcIm9QYWdpbmF0ZVwiOiB7XG5cdFx0XHRcdFx0XHRcdFwic05leHRcIjogXCJQcsOzeGltb1wiLFxuXHRcdFx0XHRcdFx0XHRcInNQcmV2aW91c1wiOiBcIkFudGVyaW9yXCIsXG5cdFx0XHRcdFx0XHRcdFwic0ZpcnN0XCI6IFwiUHJpbWVpcm9cIixcblx0XHRcdFx0XHRcdFx0XCJzTGFzdFwiOiBcIsOabHRpbW9cIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFwib0FyaWFcIjoge1xuXHRcdFx0XHRcdFx0XHRcInNTb3J0QXNjZW5kaW5nXCI6IFwiOiBPcmRlbmFyIGNvbHVuYXMgZGUgZm9ybWEgYXNjZW5kZW50ZVwiLFxuXHRcdFx0XHRcdFx0XHRcInNTb3J0RGVzY2VuZGluZ1wiOiBcIjogT3JkZW5hciBjb2x1bmFzIGRlIGZvcm1hIGRlc2NlbmRlbnRlXCJcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKGNoZWNrVXJsKFwiKHN0dWRlbnRzLylbMC05XSsoL3Nob3dfc2ltdWxhdGVkX3Rlc3RzKVthLXpBLVowLTlcXC9cXD9cXD1cXCVcXCZcXFxcK1xcLlxcJVxcLVxcX10qXCIpKSB7XG5cdFx0XHRjb25zb2xlLmxvZygnW0lORk9dIGVuZ2luZVBhZ2UgY2FsbGVkIGF0OiBzdHVkZW50cy8wLTkvc2hvd19zaW11bGF0ZWRfdGVzdHMuJyk7XG5cblx0XHRcdCQoJy5oaXN0b2dyYW1zJykuZWFjaChmdW5jdGlvbihpbmRleCl7XG5cdFx0XHRcdHRhYmxlID0gJCh0aGlzKS5maW5kKCd0YWJsZSB0cicpO1xuXHRcdFx0XHRncmFwaDEgPSAkKHRoaXMpLmZpbmQoJy5oaXN0b2dyYW0xJyk7XG5cdFx0XHRcdGdyYXBoMiA9ICQodGhpcykuZmluZCgnLmhpc3RvZ3JhbTInKTtcblxuXHRcdFx0XHR2YXIgcmVzb3VyY2UgPSB0YWJsZS5nZXQoKS5tYXAoZnVuY3Rpb24ocm93KSB7XG5cdFx0XHRcdFx0cmV0dXJuICQocm93KS5maW5kKCd0ZCcpLmdldCgpLm1hcChmdW5jdGlvbihjZWxsKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gJChjZWxsKS5odG1sKCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdGVuZ2luZUdyYXBocyhncmFwaDEsIHJlc291cmNlLnNsaWNlKDAsIDMpLCBcIk3DqWRpYXMgZGUgQWNlcnRvcyBwb3Igw4FyZWEgZGUgQ29uaGVjaW1lbnRvIC0gUGFydGUgMVwiKTtcblx0XHRcdFx0ZW5naW5lR3JhcGhzKGdyYXBoMiwgcmVzb3VyY2Uuc2xpY2UoMywgNSksIFwiTcOpZGlhcyBkZSBBY2VydG9zIHBvciDDgXJlYSBkZSBDb25oZWNpbWVudG8gLSBQYXJ0ZSAyXCIpO1xuXHRcdFx0fSk7XG5cblxuXHRcdFx0JCgnLm5lc3RhYmxlLWxpc3QnKS5uZXN0YWJsZSgpO1xuXHRcdFx0JCgnW2RhdGEtYWN0aW9uPVwiY29sbGFwc2VcIicpLnRyaWdnZXIoJ2NsaWNrJyk7XG5cdFx0XHQkKCdzcGFuLnBpZScpLnBlaXR5KCdwaWUnLCB7IGZpbGw6IFsnIzFhYjM5NCcsICcjZDdkN2Q3JywgJyNmZmZmZmYnXSB9KTtcblx0XHR9IGVsc2UgaWYgKGNoZWNrVXJsKFwiKHN0dWRlbnRzLylbMC05XSsoL3NpbXVsYXRlZF90ZXN0cylcIikpIHtcblx0XHRcdGNvbnNvbGUubG9nKCdbSU5GT10gZW5naW5lUGFnZSBjYWxsZWQgYXQ6IHN0dWRlbnRzL1swLTldKy9zaW11bGF0ZWRfdGVzdHMuJyk7XG5cblx0XHRcdGF2YWlsYWJsZVNpbXVsYXRlZFRlc3RzVGFibGUgPSAkKCcjYXZhbGlhYmxlLXNpbXVsYXRlZC10ZXN0cy10YWJsZScpO1xuXHRcdFx0cmVnaXN0ZXJlZFNpbXVsYXRlZFRlc3RzVGFibGUgPSAkKCcjcmVnaXN0ZXJlZC1zaW11bGF0ZWQtdGVzdHMtdGFibGUnKTtcblx0XHRcdGlmIChhdmFpbGFibGVTaW11bGF0ZWRUZXN0c1RhYmxlLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0dmFyIHQgPSBhdmFpbGFibGVTaW11bGF0ZWRUZXN0c1RhYmxlLmRhdGFUYWJsZSh7XG5cdFx0XHRcdFx0cmVzcG9uc2l2ZTogdHJ1ZSxcblx0XHRcdFx0XHRcImNvbHVtbkRlZnNcIjogWyB7IFwidGFyZ2V0c1wiOiBbMiwgMywgNF0sIFwib3JkZXJhYmxlXCI6IGZhbHNlIH0gXSxcblx0XHRcdFx0XHRsYW5ndWFnZToge1xuXHRcdFx0XHRcdFx0XCJzRW1wdHlUYWJsZVwiOiBcIk5lbmh1bSByZWdpc3RybyBlbmNvbnRyYWRvXCIsXG5cdFx0XHRcdFx0XHRcInNJbmZvXCI6IFwiTW9zdHJhbmRvIGRlIF9TVEFSVF8gYXTDqSBfRU5EXyBkZSBfVE9UQUxfIHJlZ2lzdHJvc1wiLFxuXHRcdFx0XHRcdFx0XCJzSW5mb0VtcHR5XCI6IFwiTW9zdHJhbmRvIDAgYXTDqSAwIGRlIDAgcmVnaXN0cm9zXCIsXG5cdFx0XHRcdFx0XHRcInNJbmZvRmlsdGVyZWRcIjogXCIoRmlsdHJhZG9zIGRlIF9NQVhfIHJlZ2lzdHJvcylcIixcblx0XHRcdFx0XHRcdFwic0luZm9Qb3N0Rml4XCI6IFwiXCIsXG5cdFx0XHRcdFx0XHRcInNJbmZvVGhvdXNhbmRzXCI6IFwiLlwiLFxuXHRcdFx0XHRcdFx0XCJzTGVuZ3RoTWVudVwiOiBcIl9NRU5VXyAmbmJzcDsgcmVzdWx0YWRvcyBwb3IgcMOhZ2luYVwiLFxuXHRcdFx0XHRcdFx0XCJzTG9hZGluZ1JlY29yZHNcIjogXCJDYXJyZWdhbmRvLi4uXCIsXG5cdFx0XHRcdFx0XHRcInNQcm9jZXNzaW5nXCI6IFwiUHJvY2Vzc2FuZG8uLi5cIixcblx0XHRcdFx0XHRcdFwic1plcm9SZWNvcmRzXCI6IFwiTmVuaHVtIHJlZ2lzdHJvIGVuY29udHJhZG9cIixcblx0XHRcdFx0XHRcdFwic1NlYXJjaFwiOiBcIlBlc3F1aXNhciAmbmJzcDsmbmJzcDtcIixcblx0XHRcdFx0XHRcdFwib1BhZ2luYXRlXCI6IHtcblx0XHRcdFx0XHRcdFx0XCJzTmV4dFwiOiBcIlByw7N4aW1vXCIsXG5cdFx0XHRcdFx0XHRcdFwic1ByZXZpb3VzXCI6IFwiQW50ZXJpb3JcIixcblx0XHRcdFx0XHRcdFx0XCJzRmlyc3RcIjogXCJQcmltZWlyb1wiLFxuXHRcdFx0XHRcdFx0XHRcInNMYXN0XCI6IFwiw5psdGltb1wiXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XCJvQXJpYVwiOiB7XG5cdFx0XHRcdFx0XHRcdFwic1NvcnRBc2NlbmRpbmdcIjogXCI6IE9yZGVuYXIgY29sdW5hcyBkZSBmb3JtYSBhc2NlbmRlbnRlXCIsXG5cdFx0XHRcdFx0XHRcdFwic1NvcnREZXNjZW5kaW5nXCI6IFwiOiBPcmRlbmFyIGNvbHVuYXMgZGUgZm9ybWEgZGVzY2VuZGVudGVcIlxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHJlZ2lzdGVyZWRTaW11bGF0ZWRUZXN0c1RhYmxlLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0dmFyIHQgPSByZWdpc3RlcmVkU2ltdWxhdGVkVGVzdHNUYWJsZS5kYXRhVGFibGUoe1xuXHRcdFx0XHRcdHJlc3BvbnNpdmU6IHRydWUsXG5cdFx0XHRcdFx0XCJjb2x1bW5EZWZzXCI6IFsgeyBcInRhcmdldHNcIjogWzJdLCBcIm9yZGVyYWJsZVwiOiBmYWxzZSB9IF0sXG5cdFx0XHRcdFx0bGFuZ3VhZ2U6IHtcblx0XHRcdFx0XHRcdFwic0VtcHR5VGFibGVcIjogXCJOZW5odW0gcmVnaXN0cm8gZW5jb250cmFkb1wiLFxuXHRcdFx0XHRcdFx0XCJzSW5mb1wiOiBcIk1vc3RyYW5kbyBkZSBfU1RBUlRfIGF0w6kgX0VORF8gZGUgX1RPVEFMXyByZWdpc3Ryb3NcIixcblx0XHRcdFx0XHRcdFwic0luZm9FbXB0eVwiOiBcIk1vc3RyYW5kbyAwIGF0w6kgMCBkZSAwIHJlZ2lzdHJvc1wiLFxuXHRcdFx0XHRcdFx0XCJzSW5mb0ZpbHRlcmVkXCI6IFwiKEZpbHRyYWRvcyBkZSBfTUFYXyByZWdpc3Ryb3MpXCIsXG5cdFx0XHRcdFx0XHRcInNJbmZvUG9zdEZpeFwiOiBcIlwiLFxuXHRcdFx0XHRcdFx0XCJzSW5mb1Rob3VzYW5kc1wiOiBcIi5cIixcblx0XHRcdFx0XHRcdFwic0xlbmd0aE1lbnVcIjogXCJfTUVOVV8gJm5ic3A7IHJlc3VsdGFkb3MgcG9yIHDDoWdpbmFcIixcblx0XHRcdFx0XHRcdFwic0xvYWRpbmdSZWNvcmRzXCI6IFwiQ2FycmVnYW5kby4uLlwiLFxuXHRcdFx0XHRcdFx0XCJzUHJvY2Vzc2luZ1wiOiBcIlByb2Nlc3NhbmRvLi4uXCIsXG5cdFx0XHRcdFx0XHRcInNaZXJvUmVjb3Jkc1wiOiBcIk5lbmh1bSByZWdpc3RybyBlbmNvbnRyYWRvXCIsXG5cdFx0XHRcdFx0XHRcInNTZWFyY2hcIjogXCJQZXNxdWlzYXIgJm5ic3A7Jm5ic3A7XCIsXG5cdFx0XHRcdFx0XHRcIm9QYWdpbmF0ZVwiOiB7XG5cdFx0XHRcdFx0XHRcdFwic05leHRcIjogXCJQcsOzeGltb1wiLFxuXHRcdFx0XHRcdFx0XHRcInNQcmV2aW91c1wiOiBcIkFudGVyaW9yXCIsXG5cdFx0XHRcdFx0XHRcdFwic0ZpcnN0XCI6IFwiUHJpbWVpcm9cIixcblx0XHRcdFx0XHRcdFx0XCJzTGFzdFwiOiBcIsOabHRpbW9cIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFwib0FyaWFcIjoge1xuXHRcdFx0XHRcdFx0XHRcInNTb3J0QXNjZW5kaW5nXCI6IFwiOiBPcmRlbmFyIGNvbHVuYXMgZGUgZm9ybWEgYXNjZW5kZW50ZVwiLFxuXHRcdFx0XHRcdFx0XHRcInNTb3J0RGVzY2VuZGluZ1wiOiBcIjogT3JkZW5hciBjb2x1bmFzIGRlIGZvcm1hIGRlc2NlbmRlbnRlXCJcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKGNoZWNrVXJsKFwidXNlcnNcIikpIHtcblx0XHRcdGNvbnNvbGUubG9nKCdbSU5GT10gZW5naW5lUGFnZSBjYWxsZWQgYXQ6IHVzZXJzLicpO1xuXG5cdFx0XHR1c2Vyc1RhYmxlID0gJCgnI3VzZXJzLXRhYmxlJyk7XG5cdFx0XHRpZiAodXNlcnNUYWJsZS5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdHZhciB0ID0gdXNlcnNUYWJsZS5kYXRhVGFibGUoe1xuXHRcdFx0XHRcdHJlc3BvbnNpdmU6IHRydWUsXG5cdFx0XHRcdFx0XCJjb2x1bW5EZWZzXCI6IFsgeyBcInRhcmdldHNcIjogWzIsIDNdLCBcIm9yZGVyYWJsZVwiOiBmYWxzZSB9IF0sXG5cdFx0XHRcdFx0bGFuZ3VhZ2U6IHtcblx0XHRcdFx0XHRcdFwic0VtcHR5VGFibGVcIjogXCJOZW5odW0gcmVnaXN0cm8gZW5jb250cmFkb1wiLFxuXHRcdFx0XHRcdFx0XCJzSW5mb1wiOiBcIk1vc3RyYW5kbyBkZSBfU1RBUlRfIGF0w6kgX0VORF8gZGUgX1RPVEFMXyByZWdpc3Ryb3NcIixcblx0XHRcdFx0XHRcdFwic0luZm9FbXB0eVwiOiBcIk1vc3RyYW5kbyAwIGF0w6kgMCBkZSAwIHJlZ2lzdHJvc1wiLFxuXHRcdFx0XHRcdFx0XCJzSW5mb0ZpbHRlcmVkXCI6IFwiKEZpbHRyYWRvcyBkZSBfTUFYXyByZWdpc3Ryb3MpXCIsXG5cdFx0XHRcdFx0XHRcInNJbmZvUG9zdEZpeFwiOiBcIlwiLFxuXHRcdFx0XHRcdFx0XCJzSW5mb1Rob3VzYW5kc1wiOiBcIi5cIixcblx0XHRcdFx0XHRcdFwic0xlbmd0aE1lbnVcIjogXCJfTUVOVV8gJm5ic3A7IHJlc3VsdGFkb3MgcG9yIHDDoWdpbmFcIixcblx0XHRcdFx0XHRcdFwic0xvYWRpbmdSZWNvcmRzXCI6IFwiQ2FycmVnYW5kby4uLlwiLFxuXHRcdFx0XHRcdFx0XCJzUHJvY2Vzc2luZ1wiOiBcIlByb2Nlc3NhbmRvLi4uXCIsXG5cdFx0XHRcdFx0XHRcInNaZXJvUmVjb3Jkc1wiOiBcIk5lbmh1bSByZWdpc3RybyBlbmNvbnRyYWRvXCIsXG5cdFx0XHRcdFx0XHRcInNTZWFyY2hcIjogXCJQZXNxdWlzYXIgJm5ic3A7Jm5ic3A7XCIsXG5cdFx0XHRcdFx0XHRcIm9QYWdpbmF0ZVwiOiB7XG5cdFx0XHRcdFx0XHRcdFwic05leHRcIjogXCJQcsOzeGltb1wiLFxuXHRcdFx0XHRcdFx0XHRcInNQcmV2aW91c1wiOiBcIkFudGVyaW9yXCIsXG5cdFx0XHRcdFx0XHRcdFwic0ZpcnN0XCI6IFwiUHJpbWVpcm9cIixcblx0XHRcdFx0XHRcdFx0XCJzTGFzdFwiOiBcIsOabHRpbW9cIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFwib0FyaWFcIjoge1xuXHRcdFx0XHRcdFx0XHRcInNTb3J0QXNjZW5kaW5nXCI6IFwiOiBPcmRlbmFyIGNvbHVuYXMgZGUgZm9ybWEgYXNjZW5kZW50ZVwiLFxuXHRcdFx0XHRcdFx0XHRcInNTb3J0RGVzY2VuZGluZ1wiOiBcIjogT3JkZW5hciBjb2x1bmFzIGRlIGZvcm1hIGRlc2NlbmRlbnRlXCJcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdbSU5GT10gc3R1ZGVudHNUYWJsZSBhbHJlYWR5IGxvYWRlZC4nKTtcblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKGNoZWNrVXJsKFwia25vd2xlZGdlX2FyZWFzXCIpKSB7XG5cdFx0XHRjb25zb2xlLmxvZygnW0lORk9dIGVuZ2luZVBhZ2UgY2FsbGVkIGF0OiBrbm93bGVkZ2VfYXJlYXMuJyk7XG5cblx0XHRcdHRhYmxlID0gJCgnI2tub3dsZWRnZS1hcmVhcy10YWJsZScpO1xuXHRcdFx0aWYgKHRhYmxlLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0dmFyIHQgPSB0YWJsZS5kYXRhVGFibGUoe1xuXHRcdFx0XHRcdHJlc3BvbnNpdmU6IHRydWUsXG5cdFx0XHRcdFx0XCJjb2x1bW5EZWZzXCI6IFsgeyBcInRhcmdldHNcIjogWzIsIDNdLCBcIm9yZGVyYWJsZVwiOiBmYWxzZSB9IF0sXG5cdFx0XHRcdFx0bGFuZ3VhZ2U6IHtcblx0XHRcdFx0XHRcdFwic0VtcHR5VGFibGVcIjogXCJOZW5odW0gcmVnaXN0cm8gZW5jb250cmFkb1wiLFxuXHRcdFx0XHRcdFx0XCJzSW5mb1wiOiBcIk1vc3RyYW5kbyBkZSBfU1RBUlRfIGF0w6kgX0VORF8gZGUgX1RPVEFMXyByZWdpc3Ryb3NcIixcblx0XHRcdFx0XHRcdFwic0luZm9FbXB0eVwiOiBcIk1vc3RyYW5kbyAwIGF0w6kgMCBkZSAwIHJlZ2lzdHJvc1wiLFxuXHRcdFx0XHRcdFx0XCJzSW5mb0ZpbHRlcmVkXCI6IFwiKEZpbHRyYWRvcyBkZSBfTUFYXyByZWdpc3Ryb3MpXCIsXG5cdFx0XHRcdFx0XHRcInNJbmZvUG9zdEZpeFwiOiBcIlwiLFxuXHRcdFx0XHRcdFx0XCJzSW5mb1Rob3VzYW5kc1wiOiBcIi5cIixcblx0XHRcdFx0XHRcdFwic0xlbmd0aE1lbnVcIjogXCJfTUVOVV8gJm5ic3A7IHJlc3VsdGFkb3MgcG9yIHDDoWdpbmFcIixcblx0XHRcdFx0XHRcdFwic0xvYWRpbmdSZWNvcmRzXCI6IFwiQ2FycmVnYW5kby4uLlwiLFxuXHRcdFx0XHRcdFx0XCJzUHJvY2Vzc2luZ1wiOiBcIlByb2Nlc3NhbmRvLi4uXCIsXG5cdFx0XHRcdFx0XHRcInNaZXJvUmVjb3Jkc1wiOiBcIk5lbmh1bSByZWdpc3RybyBlbmNvbnRyYWRvXCIsXG5cdFx0XHRcdFx0XHRcInNTZWFyY2hcIjogXCJQZXNxdWlzYXIgJm5ic3A7Jm5ic3A7XCIsXG5cdFx0XHRcdFx0XHRcIm9QYWdpbmF0ZVwiOiB7XG5cdFx0XHRcdFx0XHRcdFwic05leHRcIjogXCJQcsOzeGltb1wiLFxuXHRcdFx0XHRcdFx0XHRcInNQcmV2aW91c1wiOiBcIkFudGVyaW9yXCIsXG5cdFx0XHRcdFx0XHRcdFwic0ZpcnN0XCI6IFwiUHJpbWVpcm9cIixcblx0XHRcdFx0XHRcdFx0XCJzTGFzdFwiOiBcIsOabHRpbW9cIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFwib0FyaWFcIjoge1xuXHRcdFx0XHRcdFx0XHRcInNTb3J0QXNjZW5kaW5nXCI6IFwiOiBPcmRlbmFyIGNvbHVuYXMgZGUgZm9ybWEgYXNjZW5kZW50ZVwiLFxuXHRcdFx0XHRcdFx0XHRcInNTb3J0RGVzY2VuZGluZ1wiOiBcIjogT3JkZW5hciBjb2x1bmFzIGRlIGZvcm1hIGRlc2NlbmRlbnRlXCJcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdbSU5GT10gc3R1ZGVudHNUYWJsZSBhbHJlYWR5IGxvYWRlZC4nKTtcblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKGNoZWNrVXJsKFwia25vd2xlZGdlX29iamVjdHNcIikpIHtcblx0XHRcdGNvbnNvbGUubG9nKCdbSU5GT10gZW5naW5lUGFnZSBjYWxsZWQgYXQ6IGtub3dsZWRnZV9vYmplY3RzLicpO1xuXG5cdFx0XHR0YWJsZSA9ICQoJyNrbm93bGVkZ2Utb2JqZWN0cy10YWJsZScpO1xuXHRcdFx0aWYgKHRhYmxlLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0dmFyIHQgPSB0YWJsZS5kYXRhVGFibGUoe1xuXHRcdFx0XHRcdHJlc3BvbnNpdmU6IHRydWUsXG5cdFx0XHRcdFx0XCJjb2x1bW5EZWZzXCI6IFsgeyBcInRhcmdldHNcIjogWzIsIDNdLCBcIm9yZGVyYWJsZVwiOiBmYWxzZSB9IF0sXG5cdFx0XHRcdFx0bGFuZ3VhZ2U6IHtcblx0XHRcdFx0XHRcdFwic0VtcHR5VGFibGVcIjogXCJOZW5odW0gcmVnaXN0cm8gZW5jb250cmFkb1wiLFxuXHRcdFx0XHRcdFx0XCJzSW5mb1wiOiBcIk1vc3RyYW5kbyBkZSBfU1RBUlRfIGF0w6kgX0VORF8gZGUgX1RPVEFMXyByZWdpc3Ryb3NcIixcblx0XHRcdFx0XHRcdFwic0luZm9FbXB0eVwiOiBcIk1vc3RyYW5kbyAwIGF0w6kgMCBkZSAwIHJlZ2lzdHJvc1wiLFxuXHRcdFx0XHRcdFx0XCJzSW5mb0ZpbHRlcmVkXCI6IFwiKEZpbHRyYWRvcyBkZSBfTUFYXyByZWdpc3Ryb3MpXCIsXG5cdFx0XHRcdFx0XHRcInNJbmZvUG9zdEZpeFwiOiBcIlwiLFxuXHRcdFx0XHRcdFx0XCJzSW5mb1Rob3VzYW5kc1wiOiBcIi5cIixcblx0XHRcdFx0XHRcdFwic0xlbmd0aE1lbnVcIjogXCJfTUVOVV8gJm5ic3A7IHJlc3VsdGFkb3MgcG9yIHDDoWdpbmFcIixcblx0XHRcdFx0XHRcdFwic0xvYWRpbmdSZWNvcmRzXCI6IFwiQ2FycmVnYW5kby4uLlwiLFxuXHRcdFx0XHRcdFx0XCJzUHJvY2Vzc2luZ1wiOiBcIlByb2Nlc3NhbmRvLi4uXCIsXG5cdFx0XHRcdFx0XHRcInNaZXJvUmVjb3Jkc1wiOiBcIk5lbmh1bSByZWdpc3RybyBlbmNvbnRyYWRvXCIsXG5cdFx0XHRcdFx0XHRcInNTZWFyY2hcIjogXCJQZXNxdWlzYXIgJm5ic3A7Jm5ic3A7XCIsXG5cdFx0XHRcdFx0XHRcIm9QYWdpbmF0ZVwiOiB7XG5cdFx0XHRcdFx0XHRcdFwic05leHRcIjogXCJQcsOzeGltb1wiLFxuXHRcdFx0XHRcdFx0XHRcInNQcmV2aW91c1wiOiBcIkFudGVyaW9yXCIsXG5cdFx0XHRcdFx0XHRcdFwic0ZpcnN0XCI6IFwiUHJpbWVpcm9cIixcblx0XHRcdFx0XHRcdFx0XCJzTGFzdFwiOiBcIsOabHRpbW9cIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFwib0FyaWFcIjoge1xuXHRcdFx0XHRcdFx0XHRcInNTb3J0QXNjZW5kaW5nXCI6IFwiOiBPcmRlbmFyIGNvbHVuYXMgZGUgZm9ybWEgYXNjZW5kZW50ZVwiLFxuXHRcdFx0XHRcdFx0XHRcInNTb3J0RGVzY2VuZGluZ1wiOiBcIjogT3JkZW5hciBjb2x1bmFzIGRlIGZvcm1hIGRlc2NlbmRlbnRlXCJcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdbSU5GT10gc3R1ZGVudHNUYWJsZSBhbHJlYWR5IGxvYWRlZC4nKTtcblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKGNoZWNrVXJsKFwiY29tcGV0ZW5jZXNcIikpIHtcblx0XHRcdGNvbnNvbGUubG9nKCdbSU5GT10gZW5naW5lUGFnZSBjYWxsZWQgYXQ6IGNvbXBldGVuY2VzLicpO1xuXG5cdFx0XHR0YWJsZSA9ICQoJyNjb21wZXRlbmNlcy10YWJsZScpO1xuXHRcdFx0aWYgKHRhYmxlLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0dmFyIHQgPSB0YWJsZS5kYXRhVGFibGUoe1xuXHRcdFx0XHRcdHJlc3BvbnNpdmU6IHRydWUsXG5cdFx0XHRcdFx0XCJvcmRlclwiOiBbWyAxLCBcImRlc2NcIiBdLCBbIDAsIFwiZGVzY1wiIF1dLFxuXHRcdFx0XHRcdFwiY29sdW1uRGVmc1wiOiBbIHsgXCJ0YXJnZXRzXCI6IFsyLCAzXSwgXCJvcmRlcmFibGVcIjogZmFsc2UgfSBdLFxuXHRcdFx0XHRcdGxhbmd1YWdlOiB7XG5cdFx0XHRcdFx0XHRcInNFbXB0eVRhYmxlXCI6IFwiTmVuaHVtIHJlZ2lzdHJvIGVuY29udHJhZG9cIixcblx0XHRcdFx0XHRcdFwic0luZm9cIjogXCJNb3N0cmFuZG8gZGUgX1NUQVJUXyBhdMOpIF9FTkRfIGRlIF9UT1RBTF8gcmVnaXN0cm9zXCIsXG5cdFx0XHRcdFx0XHRcInNJbmZvRW1wdHlcIjogXCJNb3N0cmFuZG8gMCBhdMOpIDAgZGUgMCByZWdpc3Ryb3NcIixcblx0XHRcdFx0XHRcdFwic0luZm9GaWx0ZXJlZFwiOiBcIihGaWx0cmFkb3MgZGUgX01BWF8gcmVnaXN0cm9zKVwiLFxuXHRcdFx0XHRcdFx0XCJzSW5mb1Bvc3RGaXhcIjogXCJcIixcblx0XHRcdFx0XHRcdFwic0luZm9UaG91c2FuZHNcIjogXCIuXCIsXG5cdFx0XHRcdFx0XHRcInNMZW5ndGhNZW51XCI6IFwiX01FTlVfICZuYnNwOyByZXN1bHRhZG9zIHBvciBww6FnaW5hXCIsXG5cdFx0XHRcdFx0XHRcInNMb2FkaW5nUmVjb3Jkc1wiOiBcIkNhcnJlZ2FuZG8uLi5cIixcblx0XHRcdFx0XHRcdFwic1Byb2Nlc3NpbmdcIjogXCJQcm9jZXNzYW5kby4uLlwiLFxuXHRcdFx0XHRcdFx0XCJzWmVyb1JlY29yZHNcIjogXCJOZW5odW0gcmVnaXN0cm8gZW5jb250cmFkb1wiLFxuXHRcdFx0XHRcdFx0XCJzU2VhcmNoXCI6IFwiUGVzcXVpc2FyICZuYnNwOyZuYnNwO1wiLFxuXHRcdFx0XHRcdFx0XCJvUGFnaW5hdGVcIjoge1xuXHRcdFx0XHRcdFx0XHRcInNOZXh0XCI6IFwiUHLDs3hpbW9cIixcblx0XHRcdFx0XHRcdFx0XCJzUHJldmlvdXNcIjogXCJBbnRlcmlvclwiLFxuXHRcdFx0XHRcdFx0XHRcInNGaXJzdFwiOiBcIlByaW1laXJvXCIsXG5cdFx0XHRcdFx0XHRcdFwic0xhc3RcIjogXCLDmmx0aW1vXCJcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcIm9BcmlhXCI6IHtcblx0XHRcdFx0XHRcdFx0XCJzU29ydEFzY2VuZGluZ1wiOiBcIjogT3JkZW5hciBjb2x1bmFzIGRlIGZvcm1hIGFzY2VuZGVudGVcIixcblx0XHRcdFx0XHRcdFx0XCJzU29ydERlc2NlbmRpbmdcIjogXCI6IE9yZGVuYXIgY29sdW5hcyBkZSBmb3JtYSBkZXNjZW5kZW50ZVwiXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb25zb2xlLmxvZygnW0lORk9dIHN0dWRlbnRzVGFibGUgYWxyZWFkeSBsb2FkZWQuJyk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmIChjaGVja1VybChcInNraWxsc1wiKSkge1xuXHRcdFx0Y29uc29sZS5sb2coJ1tJTkZPXSBlbmdpbmVQYWdlIGNhbGxlZCBhdDogc2tpbGxzLicpO1xuXG5cdFx0XHR0YWJsZSA9ICQoJyNza2lsbHMtdGFibGUnKTtcblx0XHRcdGlmICh0YWJsZS5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdHZhciB0ID0gdGFibGUuZGF0YVRhYmxlKHtcblx0XHRcdFx0XHRyZXNwb25zaXZlOiB0cnVlLFxuXHRcdFx0XHRcdFwib3JkZXJcIjogW1sgMiwgXCJkZXNjXCIgXSwgWyAxLCBcImRlc2NcIiBdLCBbIDAsIFwiYXNjXCIgXV0sXG5cdFx0XHRcdFx0XCJjb2x1bW5EZWZzXCI6IFsgeyBcInRhcmdldHNcIjogWzMsIDRdLCBcIm9yZGVyYWJsZVwiOiBmYWxzZSB9IF0sXG5cdFx0XHRcdFx0bGFuZ3VhZ2U6IHtcblx0XHRcdFx0XHRcdFwic0VtcHR5VGFibGVcIjogXCJOZW5odW0gcmVnaXN0cm8gZW5jb250cmFkb1wiLFxuXHRcdFx0XHRcdFx0XCJzSW5mb1wiOiBcIk1vc3RyYW5kbyBkZSBfU1RBUlRfIGF0w6kgX0VORF8gZGUgX1RPVEFMXyByZWdpc3Ryb3NcIixcblx0XHRcdFx0XHRcdFwic0luZm9FbXB0eVwiOiBcIk1vc3RyYW5kbyAwIGF0w6kgMCBkZSAwIHJlZ2lzdHJvc1wiLFxuXHRcdFx0XHRcdFx0XCJzSW5mb0ZpbHRlcmVkXCI6IFwiKEZpbHRyYWRvcyBkZSBfTUFYXyByZWdpc3Ryb3MpXCIsXG5cdFx0XHRcdFx0XHRcInNJbmZvUG9zdEZpeFwiOiBcIlwiLFxuXHRcdFx0XHRcdFx0XCJzSW5mb1Rob3VzYW5kc1wiOiBcIi5cIixcblx0XHRcdFx0XHRcdFwic0xlbmd0aE1lbnVcIjogXCJfTUVOVV8gJm5ic3A7IHJlc3VsdGFkb3MgcG9yIHDDoWdpbmFcIixcblx0XHRcdFx0XHRcdFwic0xvYWRpbmdSZWNvcmRzXCI6IFwiQ2FycmVnYW5kby4uLlwiLFxuXHRcdFx0XHRcdFx0XCJzUHJvY2Vzc2luZ1wiOiBcIlByb2Nlc3NhbmRvLi4uXCIsXG5cdFx0XHRcdFx0XHRcInNaZXJvUmVjb3Jkc1wiOiBcIk5lbmh1bSByZWdpc3RybyBlbmNvbnRyYWRvXCIsXG5cdFx0XHRcdFx0XHRcInNTZWFyY2hcIjogXCJQZXNxdWlzYXIgJm5ic3A7Jm5ic3A7XCIsXG5cdFx0XHRcdFx0XHRcIm9QYWdpbmF0ZVwiOiB7XG5cdFx0XHRcdFx0XHRcdFwic05leHRcIjogXCJQcsOzeGltb1wiLFxuXHRcdFx0XHRcdFx0XHRcInNQcmV2aW91c1wiOiBcIkFudGVyaW9yXCIsXG5cdFx0XHRcdFx0XHRcdFwic0ZpcnN0XCI6IFwiUHJpbWVpcm9cIixcblx0XHRcdFx0XHRcdFx0XCJzTGFzdFwiOiBcIsOabHRpbW9cIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFwib0FyaWFcIjoge1xuXHRcdFx0XHRcdFx0XHRcInNTb3J0QXNjZW5kaW5nXCI6IFwiOiBPcmRlbmFyIGNvbHVuYXMgZGUgZm9ybWEgYXNjZW5kZW50ZVwiLFxuXHRcdFx0XHRcdFx0XHRcInNTb3J0RGVzY2VuZGluZ1wiOiBcIjogT3JkZW5hciBjb2x1bmFzIGRlIGZvcm1hIGRlc2NlbmRlbnRlXCJcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdbSU5GT10gc3R1ZGVudHNUYWJsZSBhbHJlYWR5IGxvYWRlZC4nKTtcblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKGNoZWNrVXJsKFwiam9ic1wiKSkge1xuXHRcdFx0Y29uc29sZS5sb2coJ1tJTkZPXSBlbmdpbmVQYWdlIGNhbGxlZCBhdDogam9icy4nKTtcblxuXHRcdFx0dGFibGUgPSAkKCcjam9icy10YWJsZScpO1xuXHRcdFx0aWYgKHRhYmxlLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0dmFyIHQgPSB0YWJsZS5kYXRhVGFibGUoe1xuXHRcdFx0XHRcdHJlc3BvbnNpdmU6IHRydWUsXG5cdFx0XHRcdFx0XCJvcmRlclwiOiBbWyAwLCBcImFzY1wiIF1dLFxuXHRcdFx0XHRcdFwiY29sdW1uRGVmc1wiOiBbIHsgXCJ0YXJnZXRzXCI6IFsxLCAyXSwgXCJvcmRlcmFibGVcIjogZmFsc2UgfSBdLFxuXHRcdFx0XHRcdGxhbmd1YWdlOiB7XG5cdFx0XHRcdFx0XHRcInNFbXB0eVRhYmxlXCI6IFwiTmVuaHVtIHJlZ2lzdHJvIGVuY29udHJhZG9cIixcblx0XHRcdFx0XHRcdFwic0luZm9cIjogXCJNb3N0cmFuZG8gZGUgX1NUQVJUXyBhdMOpIF9FTkRfIGRlIF9UT1RBTF8gcmVnaXN0cm9zXCIsXG5cdFx0XHRcdFx0XHRcInNJbmZvRW1wdHlcIjogXCJNb3N0cmFuZG8gMCBhdMOpIDAgZGUgMCByZWdpc3Ryb3NcIixcblx0XHRcdFx0XHRcdFwic0luZm9GaWx0ZXJlZFwiOiBcIihGaWx0cmFkb3MgZGUgX01BWF8gcmVnaXN0cm9zKVwiLFxuXHRcdFx0XHRcdFx0XCJzSW5mb1Bvc3RGaXhcIjogXCJcIixcblx0XHRcdFx0XHRcdFwic0luZm9UaG91c2FuZHNcIjogXCIuXCIsXG5cdFx0XHRcdFx0XHRcInNMZW5ndGhNZW51XCI6IFwiX01FTlVfICZuYnNwOyByZXN1bHRhZG9zIHBvciBww6FnaW5hXCIsXG5cdFx0XHRcdFx0XHRcInNMb2FkaW5nUmVjb3Jkc1wiOiBcIkNhcnJlZ2FuZG8uLi5cIixcblx0XHRcdFx0XHRcdFwic1Byb2Nlc3NpbmdcIjogXCJQcm9jZXNzYW5kby4uLlwiLFxuXHRcdFx0XHRcdFx0XCJzWmVyb1JlY29yZHNcIjogXCJOZW5odW0gcmVnaXN0cm8gZW5jb250cmFkb1wiLFxuXHRcdFx0XHRcdFx0XCJzU2VhcmNoXCI6IFwiUGVzcXVpc2FyICZuYnNwOyZuYnNwO1wiLFxuXHRcdFx0XHRcdFx0XCJvUGFnaW5hdGVcIjoge1xuXHRcdFx0XHRcdFx0XHRcInNOZXh0XCI6IFwiUHLDs3hpbW9cIixcblx0XHRcdFx0XHRcdFx0XCJzUHJldmlvdXNcIjogXCJBbnRlcmlvclwiLFxuXHRcdFx0XHRcdFx0XHRcInNGaXJzdFwiOiBcIlByaW1laXJvXCIsXG5cdFx0XHRcdFx0XHRcdFwic0xhc3RcIjogXCLDmmx0aW1vXCJcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcIm9BcmlhXCI6IHtcblx0XHRcdFx0XHRcdFx0XCJzU29ydEFzY2VuZGluZ1wiOiBcIjogT3JkZW5hciBjb2x1bmFzIGRlIGZvcm1hIGFzY2VuZGVudGVcIixcblx0XHRcdFx0XHRcdFx0XCJzU29ydERlc2NlbmRpbmdcIjogXCI6IE9yZGVuYXIgY29sdW5hcyBkZSBmb3JtYSBkZXNjZW5kZW50ZVwiXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb25zb2xlLmxvZygnW0lORk9dIHN0dWRlbnRzVGFibGUgYWxyZWFkeSBsb2FkZWQuJyk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmIChjaGVja1VybChcImdyYWRlc1wiKSkge1xuXHRcdFx0Y29uc29sZS5sb2coJ1tJTkZPXSBlbmdpbmVQYWdlIGNhbGxlZCBhdDogZ3JhZGVzLicpO1xuXG5cdFx0XHR0YWJsZSA9ICQoJyNncmFkZXMtdGFibGUnKTtcblx0XHRcdGlmICh0YWJsZS5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdHZhciB0ID0gdGFibGUuZGF0YVRhYmxlKHtcblx0XHRcdFx0XHRyZXNwb25zaXZlOiB0cnVlLFxuXHRcdFx0XHRcdFwib3JkZXJcIjogW1sgMCwgXCJhc2NcIiBdXSxcblx0XHRcdFx0XHRcImNvbHVtbkRlZnNcIjogWyB7IFwidGFyZ2V0c1wiOiBbMSwgMl0sIFwib3JkZXJhYmxlXCI6IGZhbHNlIH0gXSxcblx0XHRcdFx0XHRsYW5ndWFnZToge1xuXHRcdFx0XHRcdFx0XCJzRW1wdHlUYWJsZVwiOiBcIk5lbmh1bSByZWdpc3RybyBlbmNvbnRyYWRvXCIsXG5cdFx0XHRcdFx0XHRcInNJbmZvXCI6IFwiTW9zdHJhbmRvIGRlIF9TVEFSVF8gYXTDqSBfRU5EXyBkZSBfVE9UQUxfIHJlZ2lzdHJvc1wiLFxuXHRcdFx0XHRcdFx0XCJzSW5mb0VtcHR5XCI6IFwiTW9zdHJhbmRvIDAgYXTDqSAwIGRlIDAgcmVnaXN0cm9zXCIsXG5cdFx0XHRcdFx0XHRcInNJbmZvRmlsdGVyZWRcIjogXCIoRmlsdHJhZG9zIGRlIF9NQVhfIHJlZ2lzdHJvcylcIixcblx0XHRcdFx0XHRcdFwic0luZm9Qb3N0Rml4XCI6IFwiXCIsXG5cdFx0XHRcdFx0XHRcInNJbmZvVGhvdXNhbmRzXCI6IFwiLlwiLFxuXHRcdFx0XHRcdFx0XCJzTGVuZ3RoTWVudVwiOiBcIl9NRU5VXyAmbmJzcDsgcmVzdWx0YWRvcyBwb3IgcMOhZ2luYVwiLFxuXHRcdFx0XHRcdFx0XCJzTG9hZGluZ1JlY29yZHNcIjogXCJDYXJyZWdhbmRvLi4uXCIsXG5cdFx0XHRcdFx0XHRcInNQcm9jZXNzaW5nXCI6IFwiUHJvY2Vzc2FuZG8uLi5cIixcblx0XHRcdFx0XHRcdFwic1plcm9SZWNvcmRzXCI6IFwiTmVuaHVtIHJlZ2lzdHJvIGVuY29udHJhZG9cIixcblx0XHRcdFx0XHRcdFwic1NlYXJjaFwiOiBcIlBlc3F1aXNhciAmbmJzcDsmbmJzcDtcIixcblx0XHRcdFx0XHRcdFwib1BhZ2luYXRlXCI6IHtcblx0XHRcdFx0XHRcdFx0XCJzTmV4dFwiOiBcIlByw7N4aW1vXCIsXG5cdFx0XHRcdFx0XHRcdFwic1ByZXZpb3VzXCI6IFwiQW50ZXJpb3JcIixcblx0XHRcdFx0XHRcdFx0XCJzRmlyc3RcIjogXCJQcmltZWlyb1wiLFxuXHRcdFx0XHRcdFx0XHRcInNMYXN0XCI6IFwiw5psdGltb1wiXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XCJvQXJpYVwiOiB7XG5cdFx0XHRcdFx0XHRcdFwic1NvcnRBc2NlbmRpbmdcIjogXCI6IE9yZGVuYXIgY29sdW5hcyBkZSBmb3JtYSBhc2NlbmRlbnRlXCIsXG5cdFx0XHRcdFx0XHRcdFwic1NvcnREZXNjZW5kaW5nXCI6IFwiOiBPcmRlbmFyIGNvbHVuYXMgZGUgZm9ybWEgZGVzY2VuZGVudGVcIlxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29uc29sZS5sb2coJ1tJTkZPXSBzdHVkZW50c1RhYmxlIGFscmVhZHkgbG9hZGVkLicpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSBpZiAoY2hlY2tVcmwoXCJub3JtYWxzXCIpKSB7XG5cdFx0XHRjb25zb2xlLmxvZygnW0lORk9dIGVuZ2luZVBhZ2UgY2FsbGVkIGF0OiBub3JtYWxzLicpO1xuXG5cdFx0XHR0YWJsZSA9ICQoJyNub3JtYWxzLXRhYmxlJyk7XG5cdFx0XHRpZiAodGFibGUubGVuZ3RoID4gMCkge1xuXHRcdFx0XHR2YXIgdCA9IHRhYmxlLmRhdGFUYWJsZSh7XG5cdFx0XHRcdFx0cmVzcG9uc2l2ZTogdHJ1ZSxcblx0XHRcdFx0XHRcIm9yZGVyXCI6IFtbIDAsIFwiYXNjXCIgXV0sXG5cdFx0XHRcdFx0XCJjb2x1bW5EZWZzXCI6IFsgeyBcInRhcmdldHNcIjogWzEsIDJdLCBcIm9yZGVyYWJsZVwiOiBmYWxzZSB9IF0sXG5cdFx0XHRcdFx0bGFuZ3VhZ2U6IHtcblx0XHRcdFx0XHRcdFwic0VtcHR5VGFibGVcIjogXCJOZW5odW0gcmVnaXN0cm8gZW5jb250cmFkb1wiLFxuXHRcdFx0XHRcdFx0XCJzSW5mb1wiOiBcIk1vc3RyYW5kbyBkZSBfU1RBUlRfIGF0w6kgX0VORF8gZGUgX1RPVEFMXyByZWdpc3Ryb3NcIixcblx0XHRcdFx0XHRcdFwic0luZm9FbXB0eVwiOiBcIk1vc3RyYW5kbyAwIGF0w6kgMCBkZSAwIHJlZ2lzdHJvc1wiLFxuXHRcdFx0XHRcdFx0XCJzSW5mb0ZpbHRlcmVkXCI6IFwiKEZpbHRyYWRvcyBkZSBfTUFYXyByZWdpc3Ryb3MpXCIsXG5cdFx0XHRcdFx0XHRcInNJbmZvUG9zdEZpeFwiOiBcIlwiLFxuXHRcdFx0XHRcdFx0XCJzSW5mb1Rob3VzYW5kc1wiOiBcIi5cIixcblx0XHRcdFx0XHRcdFwic0xlbmd0aE1lbnVcIjogXCJfTUVOVV8gJm5ic3A7IHJlc3VsdGFkb3MgcG9yIHDDoWdpbmFcIixcblx0XHRcdFx0XHRcdFwic0xvYWRpbmdSZWNvcmRzXCI6IFwiQ2FycmVnYW5kby4uLlwiLFxuXHRcdFx0XHRcdFx0XCJzUHJvY2Vzc2luZ1wiOiBcIlByb2Nlc3NhbmRvLi4uXCIsXG5cdFx0XHRcdFx0XHRcInNaZXJvUmVjb3Jkc1wiOiBcIk5lbmh1bSByZWdpc3RybyBlbmNvbnRyYWRvXCIsXG5cdFx0XHRcdFx0XHRcInNTZWFyY2hcIjogXCJQZXNxdWlzYXIgJm5ic3A7Jm5ic3A7XCIsXG5cdFx0XHRcdFx0XHRcIm9QYWdpbmF0ZVwiOiB7XG5cdFx0XHRcdFx0XHRcdFwic05leHRcIjogXCJQcsOzeGltb1wiLFxuXHRcdFx0XHRcdFx0XHRcInNQcmV2aW91c1wiOiBcIkFudGVyaW9yXCIsXG5cdFx0XHRcdFx0XHRcdFwic0ZpcnN0XCI6IFwiUHJpbWVpcm9cIixcblx0XHRcdFx0XHRcdFx0XCJzTGFzdFwiOiBcIsOabHRpbW9cIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFwib0FyaWFcIjoge1xuXHRcdFx0XHRcdFx0XHRcInNTb3J0QXNjZW5kaW5nXCI6IFwiOiBPcmRlbmFyIGNvbHVuYXMgZGUgZm9ybWEgYXNjZW5kZW50ZVwiLFxuXHRcdFx0XHRcdFx0XHRcInNTb3J0RGVzY2VuZGluZ1wiOiBcIjogT3JkZW5hciBjb2x1bmFzIGRlIGZvcm1hIGRlc2NlbmRlbnRlXCJcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdbSU5GT10gbm9ybWFsc1RhYmxlIGFscmVhZHkgbG9hZGVkLicpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSBpZiAoY2hlY2tVcmwoXCJzdWJqZWN0c1wiKSkge1xuXHRcdFx0Y29uc29sZS5sb2coJ1tJTkZPXSBlbmdpbmVQYWdlIGNhbGxlZCBhdDogc3ViamVjdHMuJyk7XG5cblx0XHRcdHRhYmxlID0gJCgnI3N1YmplY3RzLXRhYmxlJyk7XG5cdFx0XHRpZiAodGFibGUubGVuZ3RoID4gMCkge1xuXHRcdFx0XHR2YXIgdCA9IHRhYmxlLmRhdGFUYWJsZSh7XG5cdFx0XHRcdFx0cmVzcG9uc2l2ZTogdHJ1ZSxcblx0XHRcdFx0XHRcIm9yZGVyXCI6IFtbIDAsIFwiYXNjXCIgXV0sXG5cdFx0XHRcdFx0XCJjb2x1bW5EZWZzXCI6IFsgeyBcInRhcmdldHNcIjogWzEsIDJdLCBcIm9yZGVyYWJsZVwiOiBmYWxzZSB9IF0sXG5cdFx0XHRcdFx0bGFuZ3VhZ2U6IHtcblx0XHRcdFx0XHRcdFwic0VtcHR5VGFibGVcIjogXCJOZW5odW0gcmVnaXN0cm8gZW5jb250cmFkb1wiLFxuXHRcdFx0XHRcdFx0XCJzSW5mb1wiOiBcIk1vc3RyYW5kbyBkZSBfU1RBUlRfIGF0w6kgX0VORF8gZGUgX1RPVEFMXyByZWdpc3Ryb3NcIixcblx0XHRcdFx0XHRcdFwic0luZm9FbXB0eVwiOiBcIk1vc3RyYW5kbyAwIGF0w6kgMCBkZSAwIHJlZ2lzdHJvc1wiLFxuXHRcdFx0XHRcdFx0XCJzSW5mb0ZpbHRlcmVkXCI6IFwiKEZpbHRyYWRvcyBkZSBfTUFYXyByZWdpc3Ryb3MpXCIsXG5cdFx0XHRcdFx0XHRcInNJbmZvUG9zdEZpeFwiOiBcIlwiLFxuXHRcdFx0XHRcdFx0XCJzSW5mb1Rob3VzYW5kc1wiOiBcIi5cIixcblx0XHRcdFx0XHRcdFwic0xlbmd0aE1lbnVcIjogXCJfTUVOVV8gJm5ic3A7IHJlc3VsdGFkb3MgcG9yIHDDoWdpbmFcIixcblx0XHRcdFx0XHRcdFwic0xvYWRpbmdSZWNvcmRzXCI6IFwiQ2FycmVnYW5kby4uLlwiLFxuXHRcdFx0XHRcdFx0XCJzUHJvY2Vzc2luZ1wiOiBcIlByb2Nlc3NhbmRvLi4uXCIsXG5cdFx0XHRcdFx0XHRcInNaZXJvUmVjb3Jkc1wiOiBcIk5lbmh1bSByZWdpc3RybyBlbmNvbnRyYWRvXCIsXG5cdFx0XHRcdFx0XHRcInNTZWFyY2hcIjogXCJQZXNxdWlzYXIgJm5ic3A7Jm5ic3A7XCIsXG5cdFx0XHRcdFx0XHRcIm9QYWdpbmF0ZVwiOiB7XG5cdFx0XHRcdFx0XHRcdFwic05leHRcIjogXCJQcsOzeGltb1wiLFxuXHRcdFx0XHRcdFx0XHRcInNQcmV2aW91c1wiOiBcIkFudGVyaW9yXCIsXG5cdFx0XHRcdFx0XHRcdFwic0ZpcnN0XCI6IFwiUHJpbWVpcm9cIixcblx0XHRcdFx0XHRcdFx0XCJzTGFzdFwiOiBcIsOabHRpbW9cIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFwib0FyaWFcIjoge1xuXHRcdFx0XHRcdFx0XHRcInNTb3J0QXNjZW5kaW5nXCI6IFwiOiBPcmRlbmFyIGNvbHVuYXMgZGUgZm9ybWEgYXNjZW5kZW50ZVwiLFxuXHRcdFx0XHRcdFx0XHRcInNTb3J0RGVzY2VuZGluZ1wiOiBcIjogT3JkZW5hciBjb2x1bmFzIGRlIGZvcm1hIGRlc2NlbmRlbnRlXCJcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdbSU5GT10gc3R1ZGVudHNUYWJsZSBhbHJlYWR5IGxvYWRlZC4nKTtcblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKGNoZWNrVXJsKFwiZXhhbXMvbmV3XCIpKSB7XG5cdFx0XHRjb25zb2xlLmxvZygnW0lORk9dIGVuZ2luZVBhZ2UgY2FsbGVkIGF0OiBleGFtL25ldy4nKTtcblxuXHRcdFx0dmFyIGVuZ2luZURhdGVwaWNrZXJzID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCQoJyNwYWdlIC5pbnB1dC1ncm91cC5kYXRlJykuZGF0ZXBpY2tlcih7XG5cdFx0XHRcdFx0dG9kYXlCdG46IFwibGlua2VkXCIsXG5cdFx0XHRcdFx0a2V5Ym9hcmROYXZpZ2F0aW9uOiBmYWxzZSxcblx0XHRcdFx0XHRmb3JjZVBhcnNlOiBmYWxzZSxcblx0XHRcdFx0XHRjYWxlbmRhcldlZWtzOiB0cnVlLFxuXHRcdFx0XHRcdGF1dG9jbG9zZTogdHJ1ZSxcblx0XHRcdFx0XHRmb3JtYXQ6ICdkZC9tbS95eXl5Jyxcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cblx0XHRcdHZhciBlbmdpbmVTZWxlY3RzID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCQoJyNwYWdlIC5jaG9zZW4tc2VsZWN0JykuY2hvc2VuKHt3aWR0aDogJ2luaGVyaXQnfSk7XG5cdFx0XHR9XG5cblx0XHRcdHZhciBlbmdpbmVJQ2hlY2tzID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCQoJyNwYWdlIC5pLWNoZWNrcycpLmlDaGVjayh7XG5cdFx0XHRcdFx0Y2hlY2tib3hDbGFzczogJ2ljaGVja2JveF9zcXVhcmUtZ3JlZW4nLFxuXHRcdFx0XHRcdHJhZGlvQ2xhc3M6ICdpcmFkaW9fc3F1YXJlLWdyZWVuJyxcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cblx0XHRcdGVuZ2luZURhdGVwaWNrZXJzKCk7XG5cdFx0XHRlbmdpbmVJQ2hlY2tzKCk7XG5cdFx0XHRlbmdpbmVTZWxlY3RzKCk7XG5cblx0XHRcdCQoJyNleGFtX2RhdGVzJykub24oJ2NvY29vbjphZnRlci1pbnNlcnQnLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0ZW5naW5lRGF0ZXBpY2tlcnMoKTtcblx0XHRcdH0pO1xuXG5cdFx0XHQkKCcjZXhhbV9xdWVzdGlvbnMnKS5vbignY29jb29uOmFmdGVyLWluc2VydCcsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRlbmdpbmVTZWxlY3RzKCk7XG5cdFx0XHRcdGVuZ2luZUlDaGVja3MoKTtcblx0XHRcdH0pO1xuXG5cdFx0XHQkKCcuYWRkLXF1ZXN0aW9uJykudHJpZ2dlcignY2xpY2snKTtcblx0XHR9IGVsc2UgaWYgKGNoZWNrVXJsKFwiKGV4YW1zKS9bMC05XStcIikpIHtcblx0XHRcdGNvbnNvbGUubG9nKCdbSU5GT10gZW5naW5lUGFnZSBjYWxsZWQgYXQ6IGV4YW1zL1swLTldKy4nKTtcblxuXHRcdFx0ZXhhbVRhYmxlID0gJCgnI2V4YW0tdGFibGUnKTtcblx0XHRcdGlmIChleGFtVGFibGUubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRqUXVlcnkuZXh0ZW5kKCBqUXVlcnkuZm4uZGF0YVRhYmxlRXh0Lm9Tb3J0LCB7XG5cdFx0XHRcdFx0XCJvbmx5LWZsb2F0LXByZVwiOiBmdW5jdGlvbiAoIGEgKSB7XG5cdFx0XHRcdFx0XHRyZXN1bHQgPSBwYXJzZUZsb2F0KGEubWF0Y2goL1swLTldKlxcLlswLTldKlxcJS9nKVswXS5yZXBsYWNlKFwiJVwiLCBcIlwiKSk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XCJvbmx5LWZsb2F0LWFzY1wiOiBmdW5jdGlvbiAoIGEsIGIgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gKChhIDwgYikgPyAtMSA6ICgoYSA+IGIpID8gMSA6IDApKTtcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFwib25seS1mbG9hdC1kZXNjXCI6IGZ1bmN0aW9uICggYSwgYiApIHtcblx0XHRcdFx0XHRcdHJldHVybiAoKGEgPCBiKSA/IDEgOiAoKGEgPiBiKSA/IC0xIDogMCkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHRcdHRhcmdldHMgPSBbMyxdXG5cdFx0XHRcdGZvciAoaSA9IDA7IGkgPCBwYXJzZUludChleGFtVGFibGUuYXR0cignZGF0YS1zdWJqZWN0cycpKTsgaSsrKSB7XG5cdFx0XHRcdFx0dGFyZ2V0cy5wdXNoKDMgKyAxICsgaSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0dmFyIHQgPSBleGFtVGFibGUuZGF0YVRhYmxlKHtcblx0XHRcdFx0XHRyZXNwb25zaXZlOiB0cnVlLFxuXHRcdFx0XHRcdFwib3JkZXJcIjogW1sgMywgXCJkZXNjXCIgXSxdLFxuXHRcdFx0XHRcdFwiYW9Db2x1bW5EZWZzXCI6IFtcblx0XHRcdFx0XHRcdHsgXCJzVHlwZVwiOiAnb25seS1mbG9hdCcsIFwiYXNTb3J0aW5nXCI6IFsgXCJkZXNjXCIsIFwiYXNjXCJdLCBcImFUYXJnZXRzXCI6IHRhcmdldHMsIH0sXG5cdFx0XHRcdFx0XHR7IFwib3JkZXJhYmxlXCI6IGZhbHNlLCBcInRhcmdldHNcIjogWzJdLCB9XG5cdFx0XHRcdFx0XSxcblx0XHRcdFx0XHRsYW5ndWFnZToge1xuXHRcdFx0XHRcdFx0XCJzRW1wdHlUYWJsZVwiOiBcIk5lbmh1bSByZWdpc3RybyBlbmNvbnRyYWRvXCIsXG5cdFx0XHRcdFx0XHRcInNJbmZvXCI6IFwiTW9zdHJhbmRvIGRlIF9TVEFSVF8gYXTDqSBfRU5EXyBkZSBfVE9UQUxfIHJlZ2lzdHJvc1wiLFxuXHRcdFx0XHRcdFx0XCJzSW5mb0VtcHR5XCI6IFwiTW9zdHJhbmRvIDAgYXTDqSAwIGRlIDAgcmVnaXN0cm9zXCIsXG5cdFx0XHRcdFx0XHRcInNJbmZvRmlsdGVyZWRcIjogXCIoRmlsdHJhZG9zIGRlIF9NQVhfIHJlZ2lzdHJvcylcIixcblx0XHRcdFx0XHRcdFwic0luZm9Qb3N0Rml4XCI6IFwiXCIsXG5cdFx0XHRcdFx0XHRcInNJbmZvVGhvdXNhbmRzXCI6IFwiLlwiLFxuXHRcdFx0XHRcdFx0XCJzTGVuZ3RoTWVudVwiOiBcIl9NRU5VXyAmbmJzcDsgcmVzdWx0YWRvcyBwb3IgcMOhZ2luYVwiLFxuXHRcdFx0XHRcdFx0XCJzTG9hZGluZ1JlY29yZHNcIjogXCJDYXJyZWdhbmRvLi4uXCIsXG5cdFx0XHRcdFx0XHRcInNQcm9jZXNzaW5nXCI6IFwiUHJvY2Vzc2FuZG8uLi5cIixcblx0XHRcdFx0XHRcdFwic1plcm9SZWNvcmRzXCI6IFwiTmVuaHVtIHJlZ2lzdHJvIGVuY29udHJhZG9cIixcblx0XHRcdFx0XHRcdFwic1NlYXJjaFwiOiBcIlBlc3F1aXNhciAmbmJzcDsmbmJzcDtcIixcblx0XHRcdFx0XHRcdFwib1BhZ2luYXRlXCI6IHtcblx0XHRcdFx0XHRcdFx0XCJzTmV4dFwiOiBcIlByw7N4aW1vXCIsXG5cdFx0XHRcdFx0XHRcdFwic1ByZXZpb3VzXCI6IFwiQW50ZXJpb3JcIixcblx0XHRcdFx0XHRcdFx0XCJzRmlyc3RcIjogXCJQcmltZWlyb1wiLFxuXHRcdFx0XHRcdFx0XHRcInNMYXN0XCI6IFwiw5psdGltb1wiXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XCJvQXJpYVwiOiB7XG5cdFx0XHRcdFx0XHRcdFwic1NvcnRBc2NlbmRpbmdcIjogXCI6IE9yZGVuYXIgY29sdW5hcyBkZSBmb3JtYSBhc2NlbmRlbnRlXCIsXG5cdFx0XHRcdFx0XHRcdFwic1NvcnREZXNjZW5kaW5nXCI6IFwiOiBPcmRlbmFyIGNvbHVuYXMgZGUgZm9ybWEgZGVzY2VuZGVudGVcIlxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29uc29sZS5sb2coJ1tJTkZPXSBleGFtVGFibGUgYWxyZWFkeSBsb2FkZWQuJyk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmIChjaGVja1VybChcImV4YW1zXCIpKSB7XG5cdFx0XHRjb25zb2xlLmxvZygnW0lORk9dIGVuZ2luZVBhZ2UgY2FsbGVkIGF0OiBleGFtcy4nKTtcblxuXHRcdFx0ZXhhbXNUYWJsZSA9ICQoJyNleGFtcy10YWJsZScpO1xuXHRcdFx0aWYgKGV4YW1zVGFibGUubGVuZ3RoID4gMCkge1xuXHRcdFx0XHR2YXIgdCA9IGV4YW1zVGFibGUuZGF0YVRhYmxlKHtcblx0XHRcdFx0XHRyZXNwb25zaXZlOiB0cnVlLFxuXHRcdFx0XHRcdFwiY29sdW1uRGVmc1wiOiBbIHsgXCJ0YXJnZXRzXCI6IFsyLCAzLCA0LCA1LCA2XSwgXCJvcmRlcmFibGVcIjogZmFsc2UgfSBdLFxuXHRcdFx0XHRcdGxhbmd1YWdlOiB7XG5cdFx0XHRcdFx0XHRcInNFbXB0eVRhYmxlXCI6IFwiTmVuaHVtIHJlZ2lzdHJvIGVuY29udHJhZG9cIixcblx0XHRcdFx0XHRcdFwic0luZm9cIjogXCJNb3N0cmFuZG8gZGUgX1NUQVJUXyBhdMOpIF9FTkRfIGRlIF9UT1RBTF8gcmVnaXN0cm9zXCIsXG5cdFx0XHRcdFx0XHRcInNJbmZvRW1wdHlcIjogXCJNb3N0cmFuZG8gMCBhdMOpIDAgZGUgMCByZWdpc3Ryb3NcIixcblx0XHRcdFx0XHRcdFwic0luZm9GaWx0ZXJlZFwiOiBcIihGaWx0cmFkb3MgZGUgX01BWF8gcmVnaXN0cm9zKVwiLFxuXHRcdFx0XHRcdFx0XCJzSW5mb1Bvc3RGaXhcIjogXCJcIixcblx0XHRcdFx0XHRcdFwic0luZm9UaG91c2FuZHNcIjogXCIuXCIsXG5cdFx0XHRcdFx0XHRcInNMZW5ndGhNZW51XCI6IFwiX01FTlVfICZuYnNwOyByZXN1bHRhZG9zIHBvciBww6FnaW5hXCIsXG5cdFx0XHRcdFx0XHRcInNMb2FkaW5nUmVjb3Jkc1wiOiBcIkNhcnJlZ2FuZG8uLi5cIixcblx0XHRcdFx0XHRcdFwic1Byb2Nlc3NpbmdcIjogXCJQcm9jZXNzYW5kby4uLlwiLFxuXHRcdFx0XHRcdFx0XCJzWmVyb1JlY29yZHNcIjogXCJOZW5odW0gcmVnaXN0cm8gZW5jb250cmFkb1wiLFxuXHRcdFx0XHRcdFx0XCJzU2VhcmNoXCI6IFwiUGVzcXVpc2FyICZuYnNwOyZuYnNwO1wiLFxuXHRcdFx0XHRcdFx0XCJvUGFnaW5hdGVcIjoge1xuXHRcdFx0XHRcdFx0XHRcInNOZXh0XCI6IFwiUHLDs3hpbW9cIixcblx0XHRcdFx0XHRcdFx0XCJzUHJldmlvdXNcIjogXCJBbnRlcmlvclwiLFxuXHRcdFx0XHRcdFx0XHRcInNGaXJzdFwiOiBcIlByaW1laXJvXCIsXG5cdFx0XHRcdFx0XHRcdFwic0xhc3RcIjogXCLDmmx0aW1vXCJcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcIm9BcmlhXCI6IHtcblx0XHRcdFx0XHRcdFx0XCJzU29ydEFzY2VuZGluZ1wiOiBcIjogT3JkZW5hciBjb2x1bmFzIGRlIGZvcm1hIGFzY2VuZGVudGVcIixcblx0XHRcdFx0XHRcdFx0XCJzU29ydERlc2NlbmRpbmdcIjogXCI6IE9yZGVuYXIgY29sdW5hcyBkZSBmb3JtYSBkZXNjZW5kZW50ZVwiXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb25zb2xlLmxvZygnW0lORk9dIGV4YW1zVGFibGUgYWxyZWFkeSBsb2FkZWQuJyk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmIChjaGVja1VybChcIihleGFtcy8pWzAtOV0rKC9lZGl0X3F1ZXN0aW9ucylbYS16QS1aMC05XFwvXFw/XFw9XFwlXFwmXFxcXCtcXC5cXCVcXC1cXF9dKlwiKSkge1xuXHRcdFx0Y29uc29sZS5sb2coJ1tJTkZPXSBlbmdpbmVQYWdlIGNhbGxlZCBhdDogZXhhbXMvWzAtOV0rL2VkaXRfcXVlc3Rpb25zLicpO1xuXG5cdFx0XHR2YXIgZW5naW5lU2VsZWN0cyA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHQkKCcjcGFnZSAuY2hvc2VuLXNlbGVjdCcpLmNob3Nlbih7d2lkdGg6ICdpbmhlcml0J30pO1xuXHRcdFx0fVxuXG5cdFx0XHR2YXIgZW5naW5lSUNoZWNrcyA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHQkKCcjcGFnZSAuaS1jaGVja3MnKS5pQ2hlY2soe1xuXHRcdFx0XHRcdGNoZWNrYm94Q2xhc3M6ICdpY2hlY2tib3hfc3F1YXJlLWdyZWVuJyxcblx0XHRcdFx0XHRyYWRpb0NsYXNzOiAnaXJhZGlvX3NxdWFyZS1ncmVlbicsXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXG5cdFx0XHRlbmdpbmVJQ2hlY2tzKCk7XG5cdFx0XHRlbmdpbmVTZWxlY3RzKCk7XG5cblx0XHRcdCQoJyNxdWVzdGlvbnMgLnF1ZXN0aW9uIC5rbm93bGVkZ2UtYXJlYS1zZWxlY3QnKS5jaGFuZ2UoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHNlbGVjdCA9ICQodGhpcyk7XG5cdFx0XHRcdHF1ZXN0aW9uID0gc2VsZWN0LmNsb3Nlc3QoJy5xdWVzdGlvbicpO1xuXHRcdFx0XHRxdWVzdGlvbi5maW5kKCcua25vd2xlZGdlLW9iamVjdC1zZWxlY3Qgb3B0aW9uJykucHJvcCgnc2VsZWN0ZWQnLCBmYWxzZSk7XG5cdFx0XHRcdHF1ZXN0aW9uLmZpbmQoJy5za2lsbC1zZWxlY3Qgb3B0aW9uJykucHJvcCgnc2VsZWN0ZWQnLCBmYWxzZSk7XG5cdFx0XHRcdHF1ZXN0aW9uLmZpbmQoJy5jaG9zZW4tY29udGFpbmVyJykucmVtb3ZlKCk7XG5cdFx0XHRcdHF1ZXN0aW9uLmZpbmQoJy5rbm93bGVkZ2Utb2JqZWN0LXNlbGVjdC5jaG9zZW4tc2VsZWN0JykuY2hvc2VuKCdkZXN0cm95Jyk7XG5cdFx0XHRcdHF1ZXN0aW9uLmZpbmQoJy5za2lsbC1zZWxlY3QuY2hvc2VuLXNlbGVjdCcpLmNob3NlbignZGVzdHJveScpO1xuXHRcdFx0XHRxdWVzdGlvbi5maW5kKCcua25vd2xlZGdlLW9iamVjdC1zZWxlY3QnKS5hZGRDbGFzcygnaGlkZGVuJykucmVtb3ZlQ2xhc3MoJ2Nob3Nlbi1zZWxlY3QnKTtcblx0XHRcdFx0cXVlc3Rpb24uZmluZCgnLnNraWxsLXNlbGVjdCcpLmFkZENsYXNzKCdoaWRkZW4nKS5yZW1vdmVDbGFzcygnY2hvc2VuLXNlbGVjdCcpO1xuXG5cdFx0XHRcdHF1ZXN0aW9uLmZpbmQoJy5mcm9tLWtub3dsZWRnZS1hcmVhLScgKyBzZWxlY3QudmFsKCkpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKS5hZGRDbGFzcygnY2hvc2VuLXNlbGVjdCcpLmNob3Nlbih7d2lkdGg6ICdpbmhlcml0J30pO1xuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIGlmIChjaGVja1VybChcIihleGFtcy8pWzAtOV0rKC9lZGl0KVthLXpBLVowLTlcXC9cXD9cXD1cXCVcXCZcXFxcK1xcLlxcJVxcLVxcX10qXCIpKSB7XG5cdFx0XHRjb25zb2xlLmxvZygnW0lORk9dIGVuZ2luZVBhZ2UgY2FsbGVkIGF0OiBleGFtcy9bMC05XSsvZWRpdC4nKTtcblxuXHRcdFx0dmFyIGVuZ2luZURhdGVwaWNrZXJzID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCQoJyNwYWdlIC5pbnB1dC1ncm91cC5kYXRlJykuZGF0ZXBpY2tlcih7XG5cdFx0XHRcdFx0dG9kYXlCdG46IFwibGlua2VkXCIsXG5cdFx0XHRcdFx0a2V5Ym9hcmROYXZpZ2F0aW9uOiBmYWxzZSxcblx0XHRcdFx0XHRmb3JjZVBhcnNlOiBmYWxzZSxcblx0XHRcdFx0XHRjYWxlbmRhcldlZWtzOiB0cnVlLFxuXHRcdFx0XHRcdGF1dG9jbG9zZTogdHJ1ZSxcblx0XHRcdFx0XHRmb3JtYXQ6ICdkZC9tbS95eXl5Jyxcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cblx0XHRcdHZhciBlbmdpbmVJQ2hlY2tzID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCQoJyNwYWdlIC5pLWNoZWNrcycpLmlDaGVjayh7XG5cdFx0XHRcdFx0Y2hlY2tib3hDbGFzczogJ2ljaGVja2JveF9zcXVhcmUtZ3JlZW4nLFxuXHRcdFx0XHRcdHJhZGlvQ2xhc3M6ICdpcmFkaW9fc3F1YXJlLWdyZWVuJyxcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cblx0XHRcdGVuZ2luZURhdGVwaWNrZXJzKCk7XG5cdFx0XHRlbmdpbmVJQ2hlY2tzKCk7XG5cblx0XHRcdCQoJyNkYXRlcycpLm9uKCdjb2Nvb246YWZ0ZXItaW5zZXJ0JywgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGVuZ2luZURhdGVwaWNrZXJzKCk7XG5cdFx0XHR9KTtcblx0XHR9IGVsc2UgaWYgKGNoZWNrVXJsKFwiKGV4YW1zLylbMC05XFwvXSooc2hvd19zdGF0aXN0aWNfcmVwb3J0KVthLXpBLVowLTlcXC9cXD9cXD1cXCVcXCZcXFxcK1xcLlxcJVxcLVxcX10qXCIpKSB7XG5cdFx0XHRjb25zb2xlLmxvZygnW0lORk9dIGVuZ2luZVBhZ2UgY2FsbGVkIGF0OiBleGFtcy9bMC05XSsvc2hvd19zdGF0aXN0aWNfcmVwb3J0LicpO1xuXG5cdFx0XHR2YXIgcmVzb3VyY2UxID0gJCgndGFibGUjc3RhdGlzdGljLXJlcG9ydC1yZXNvdXJjZV9fMSB0cicpLmdldCgpLm1hcChmdW5jdGlvbihyb3cpIHtcblx0XHRcdFx0cmV0dXJuICQocm93KS5maW5kKCd0ZCcpLmdldCgpLm1hcChmdW5jdGlvbihjZWxsKSB7XG5cdFx0XHRcdFx0cmV0dXJuICQoY2VsbCkuaHRtbCgpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdFx0dmFyIHJlc291cmNlMiA9ICQoJ3RhYmxlI3N0YXRpc3RpYy1yZXBvcnQtcmVzb3VyY2VfXzIgdHInKS5nZXQoKS5tYXAoZnVuY3Rpb24ocm93KSB7XG5cdFx0XHRcdHJldHVybiAkKHJvdykuZmluZCgndGQnKS5nZXQoKS5tYXAoZnVuY3Rpb24oY2VsbCkge1xuXHRcdFx0XHRcdHJldHVybiAkKGNlbGwpLmh0bWwoKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHRcdHZhciByZXNvdXJjZTJfX2NhdGVnb3JpZXMgPSAkKCd0YWJsZSNzdGF0aXN0aWMtcmVwb3J0LXJlc291cmNlX18yIHRkW2RhdGEtY2F0XScpLmdldCgpLm1hcChmdW5jdGlvbihjZWxsKSB7XG5cdFx0XHRcdHJldHVybiAkKGNlbGwpLmF0dHIoJ2RhdGEtY2F0Jyk7XG5cdFx0XHR9KTtcblxuXHRcdFx0Y29uc29sZS5sb2cocmVzb3VyY2UyX19jYXRlZ29yaWVzKVxuXG5cdFx0XHRncmFwaDEgPSAkKFwiI3N0YXRpc3RpYy1yZXBvcnQtZ3JhcGgxXCIpO1xuXHRcdFx0ZW5naW5lR3JhcGhzKGdyYXBoMSwgcmVzb3VyY2UxLCBcIkFjZXJ0b3NcIiwgW1wiMFwiLCBcIjEwXCIsIFwiMjBcIiwgXCIzMFwiLCBcIjQwXCIsIFwiNTBcIiwgXCI2MFwiLCBcIjcwXCIsIFwiODBcIiwgXCI5MFwiLCBcIjEwMFwiXSwgJ05vdGFzJywgJ1BvcmNlbnRhZ2VtIGRlIEFsdW5vcycsICclJyk7XG5cdFx0XHRncmFwaDIgPSAkKFwiI3N0YXRpc3RpYy1yZXBvcnQtZ3JhcGgyXCIpO1xuXHRcdFx0ZW5naW5lR3JhcGhzKGdyYXBoMiwgcmVzb3VyY2UyLCBcIkFjZXJ0b3MgcG9yIFF1ZXN0w6NvXCIsIHJlc291cmNlMl9fY2F0ZWdvcmllcywgJ1F1ZXN0w7VlcycsICdQb3JjZW50YW0gZGUgQWx1bm9zJywgJyUnKTtcblxuXHRcdFx0JCgnLm5lc3RhYmxlLWxpc3QnKS5uZXN0YWJsZSgpO1xuXHRcdFx0JCgnW2RhdGEtYWN0aW9uPVwiY29sbGFwc2VcIicpLnRyaWdnZXIoJ2NsaWNrJyk7XG5cdFx0fSBlbHNlIGlmIChjaGVja1VybChcIihleGFtcy8pWzAtOV0rKC9uZXdfYW5zd2VycylcIikpe1xuXHRcdFx0Y29uc29sZS5sb2coJ1tJTkZPXSBlbmdpbmVQYWdlIGNhbGxlZCBhdDogZXhhbXMvWzAtOV0rL25ld19hbnN3ZXJzLicpO1xuXG5cdFx0XHR2YXIgbmV3QW5zd2Vyc0Ryb3B6b25lID0gbmV3IERyb3B6b25lKFwiI25ldy1hbnN3ZXJzLWRyb3B6b25lXCIsIHtcblx0XHRcdFx0cGFyYW1OYW1lOiBcImFuc3dlcnNcIixcblx0XHRcdFx0YXV0b1Byb2Nlc3NRdWV1ZTogZmFsc2UsXG5cdFx0XHR9KTtcblx0XHRcdG5ld0Fuc3dlcnNEcm9wem9uZS5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJidXR0b25bdHlwZT1zdWJtaXRdXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihlKSB7XG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0bmV3QW5zd2Vyc0Ryb3B6b25lLnByb2Nlc3NRdWV1ZSgpO1xuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnNvbGUubG9nKCdbSU5GT10gZW5naW5lUGFnZSBjYWxsZWQgYXQgZ2VuZXJpYyBwYWdlLicpO1xuXG5cdFx0XHRpZiAoJCgndGFibGUjZGFzaGJvYXJkLXNpbXVsYXRlZC10ZXN0LWdyYXBoLXJlc291cmNlJykubGVuZ3RoID4gMCkge1xuXHRcdFx0XHR2YXIgcmVzb3VyY2UgPSAkKCd0YWJsZSNkYXNoYm9hcmQtc2ltdWxhdGVkLXRlc3QtZ3JhcGgtcmVzb3VyY2UgdHInKS5nZXQoKS5tYXAoZnVuY3Rpb24ocm93KSB7XG5cdFx0XHRcdFx0cmV0dXJuICQocm93KS5maW5kKCd0ZCcpLmdldCgpLm1hcChmdW5jdGlvbihjZWxsKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gJChjZWxsKS5odG1sKCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdGNhdGVnb3JpZXMgPSBbXTtcblx0XHRcdFx0Zm9yIChpID0gMjsgaSA8IHJlc291cmNlLmxlbmd0aDsgKytpKSB7XG5cdFx0XHRcdFx0Y2F0ZWdvcmllcy5wdXNoKHJlc291cmNlW2ldWzBdKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRkYXRhID0gW107XG5cdFx0XHRcdGZvciAoaiA9IDE7IGogPCByZXNvdXJjZVswXS5sZW5ndGg7ICsraikge1xuXHRcdFx0XHRcdGRhdGFbai0xXSA9IHt9O1xuXHRcdFx0XHRcdGRhdGFbai0xXVtcImRhdGFcIl0gPSBbXTtcblx0XHRcdFx0XHRkYXRhW2otMV1bXCJuYW1lXCJdID0gcmVzb3VyY2VbMF1bal07XG5cdFx0XHRcdFx0ZGF0YVtqLTFdW1wiY29sb3JcIl0gPSByZXNvdXJjZVsxXVtqXTtcblxuXHRcdFx0XHRcdGZvciAoayA9IDI7IGsgPCByZXNvdXJjZS5sZW5ndGg7ICsraykge1xuXHRcdFx0XHRcdFx0ZGF0YVtqLTFdW1wiZGF0YVwiXS5wdXNoKHBhcnNlRmxvYXQocmVzb3VyY2Vba11bal0pKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQkKCcjZGFzaGJvYXJkLXNpbXVsYXRlZC10ZXN0LWdyYXBoJykuaGlnaGNoYXJ0cyh7XG5cdFx0XHRcdFx0Y2hhcnQ6IHtcblx0XHRcdFx0XHRcdHR5cGU6ICdjb2x1bW4nLFxuXHRcdFx0XHRcdFx0aGVpZ2h0OiAyMjAsXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHR0aXRsZTogeyB0ZXh0OiAnICcgIH0sXG5cdFx0XHRcdFx0bGVnZW5kOiB7XG5cdFx0XHRcdFx0XHRsYXlvdXQ6ICdob3Jpem9udGFsJyxcblx0XHRcdFx0XHRcdGFsaWduOiAnY2VudGVyJyxcblx0XHRcdFx0XHRcdHZlcnRpY2FsQWxpZ246ICd0b3AnLFxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0Y3JlZGl0czogZmFsc2UsXG5cdFx0XHRcdFx0eEF4aXM6IHtcblx0XHRcdFx0XHRcdGNhdGVnb3JpZXM6IGNhdGVnb3JpZXMsXG5cdFx0XHRcdFx0XHRjcm9zc2hhaXI6IHRydWVcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHlBeGlzOiB7XG5cdFx0XHRcdFx0XHRtaW46IDAsXG5cdFx0XHRcdFx0XHRtYXg6IDEwMCxcblx0XHRcdFx0XHRcdHRpY2tJbnRlcnZhbDogMjAsXG5cdFx0XHRcdFx0XHR0aXRsZToge1xuXHRcdFx0XHRcdFx0XHR0ZXh0OiAnUG9yY2VudGFnZW0gZGUgYWNlcnRvcydcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHRvb2x0aXA6IHtcblx0XHRcdFx0XHRcdGhlYWRlckZvcm1hdDogJzxzcGFuIHN0eWxlPVwiZm9udC1zaXplOjEwcHhcIj57cG9pbnQua2V5fTwvc3Bhbj48dGFibGU+Jyxcblx0XHRcdFx0XHRcdHBvaW50Rm9ybWF0OiAnPHRyPjx0ZCBzdHlsZT1cImNvbG9yOntzZXJpZXMuY29sb3J9O3BhZGRpbmc6MFwiPntzZXJpZXMubmFtZX06IDwvdGQ+JyArXG5cdFx0XHRcdFx0XHQnPHRkIHN0eWxlPVwicGFkZGluZzowXCI+PGI+e3BvaW50Lnk6LjFmfSAlPC9iPjwvdGQ+PC90cj4nLFxuXHRcdFx0XHRcdFx0Zm9vdGVyRm9ybWF0OiAnPC90YWJsZT4nLFxuXHRcdFx0XHRcdFx0c2hhcmVkOiB0cnVlLFxuXHRcdFx0XHRcdFx0dXNlSFRNTDogdHJ1ZVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0cGxvdE9wdGlvbnM6IHtcblx0XHRcdFx0XHRcdGNvbHVtbjoge1xuXHRcdFx0XHRcdFx0XHRwb2ludFBhZGRpbmc6IDAuMixcblx0XHRcdFx0XHRcdFx0Ym9yZGVyV2lkdGg6IDBcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHNlcmllczogZGF0YVxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCQoJyNmbG90LWNoYXJ0MScpLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0dmFyIGQxID0gW1sxMjYyMzA0MDAwMDAwLCA2XSwgWzEyNjQ5ODI0MDAwMDAsIDMwNTddLCBbMTI2NzQwMTYwMDAwMCwgMjA0MzRdLCBbMTI3MDA4MDAwMDAwMCwgMzE5ODJdLCBbMTI3MjY3MjAwMDAwMCwgMjY2MDJdLCBbMTI3NTM1MDQwMDAwMCwgMjc4MjZdLCBbMTI3Nzk0MjQwMDAwMCwgMjQzMDJdLCBbMTI4MDYyMDgwMDAwMCwgMjQyMzddLCBbMTI4MzI5OTIwMDAwMCwgMjEwMDRdLCBbMTI4NTg5MTIwMDAwMCwgMTIxNDRdLCBbMTI4ODU2OTYwMDAwMCwgMTA1NzddLCBbMTI5MTE2MTYwMDAwMCwgMTAyOTVdXTtcblx0XHRcdFx0dmFyIGQyID0gW1sxMjYyMzA0MDAwMDAwLCA1XSwgWzEyNjQ5ODI0MDAwMDAsIDIwMF0sIFsxMjY3NDAxNjAwMDAwLCAxNjA1XSwgWzEyNzAwODAwMDAwMDAsIDYxMjldLCBbMTI3MjY3MjAwMDAwMCwgMTE2NDNdLCBbMTI3NTM1MDQwMDAwMCwgMTkwNTVdLCBbMTI3Nzk0MjQwMDAwMCwgMzAwNjJdLCBbMTI4MDYyMDgwMDAwMCwgMzkxOTddLCBbMTI4MzI5OTIwMDAwMCwgMzcwMDBdLCBbMTI4NTg5MTIwMDAwMCwgMjcwMDBdLCBbMTI4ODU2OTYwMDAwMCwgMjEwMDBdLCBbMTI5MTE2MTYwMDAwMCwgMTcwMDBdXTtcblxuXHRcdFx0XHR2YXIgZGF0YTEgPSBbXG5cdFx0XHRcdHsgbGFiZWw6IFwiRGF0YSAxXCIsIGRhdGE6IGQxLCBjb2xvcjogJyMxN2EwODQnfSxcblx0XHRcdFx0eyBsYWJlbDogXCJEYXRhIDJcIiwgZGF0YTogZDIsIGNvbG9yOiAnIzEyN2U2OCcgfVxuXHRcdFx0XHRdO1xuXHRcdFx0XHQkLnBsb3QoJChcIiNmbG90LWNoYXJ0MVwiKSwgZGF0YTEsIHtcblx0XHRcdFx0XHR4YXhpczoge1xuXHRcdFx0XHRcdFx0dGlja0RlY2ltYWxzOiAwXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRzZXJpZXM6IHtcblx0XHRcdFx0XHRcdGxpbmVzOiB7XG5cdFx0XHRcdFx0XHRcdHNob3c6IHRydWUsXG5cdFx0XHRcdFx0XHRcdGZpbGw6IHRydWUsXG5cdFx0XHRcdFx0XHRcdGZpbGxDb2xvcjoge1xuXHRcdFx0XHRcdFx0XHRcdGNvbG9yczogW3tcblx0XHRcdFx0XHRcdFx0XHRcdG9wYWNpdHk6IDFcblx0XHRcdFx0XHRcdFx0XHR9LCB7XG5cdFx0XHRcdFx0XHRcdFx0XHRvcGFjaXR5OiAxXG5cdFx0XHRcdFx0XHRcdFx0fV1cblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRwb2ludHM6IHtcblx0XHRcdFx0XHRcdFx0d2lkdGg6IDAuMSxcblx0XHRcdFx0XHRcdFx0c2hvdzogZmFsc2Vcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRncmlkOiB7XG5cdFx0XHRcdFx0XHRzaG93OiBmYWxzZSxcblx0XHRcdFx0XHRcdGJvcmRlcldpZHRoOiAwXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRsZWdlbmQ6IHtcblx0XHRcdFx0XHRcdHNob3c6IGZhbHNlLFxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cdGluaXQgPSBmdW5jdGlvbigpIHtcblx0XHRlbmdpbmVTaWRlTWVudSgpO1xuXHRcdGVuZ2luZVBhZ2UoKTtcblx0XHRlbmdpbmVGb3JtVmFsaWRhdGlvbnMoKTtcblx0fSxcblxuXHRhamF4TG9hZCA9IGZ1bmN0aW9uKGh0bWwsIHN0YXR1cywgeGhyKSB7XG5cdFx0JGNvdW50ZXIrKztcblx0XHRjb25zb2xlLmxvZyhcIi0gLS0gLS0tIC0tLS0gLS0tLS0gXCIgKyAkY291bnRlciArIFwiwrogYWpheCBjYWxsIC0tLS0tIC0tLS0gLS0tIC0tIC1cIik7XG5cdFx0Y29uc29sZS5sb2coXCJbSU5GT10gQWpheCBSZXF1ZXN0IFN0YXR1czogXCIgKyBzdGF0dXMpO1xuXHRcdGNvbnNvbGUubG9nKFwiW0lORk9dIEFqYXggUmVxdWVzdCBYSFI6IFwiICsgeGhyKTtcblx0XHRpZiAoIHN0YXR1cyA9PSBcImVycm9yXCIgKSB7XG5cdFx0XHR2YXIgbXNnID0gXCJTb3JyeSBidXQgdGhlcmUgd2FzIGFuIGVycm9yOiBcIjtcblx0XHRcdGFsZXJ0KG1zZyArIHhoci5zdGF0dXMgKyBcIiBcIiArIHhoci5zdGF0dXNUZXh0KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JHByZWxvYWRlci5oaWRlKCA1MDAgKTtcblx0XHRcdGRvY3VtZW50LnRpdGxlID0gaHRtbFxuXHRcdFx0XHQubWF0Y2goLzx0aXRsZT4oLio/KTxcXC90aXRsZT4vKVsxXVxuXHRcdFx0XHQudHJpbSgpXG5cdFx0XHRcdC5kZWNvZGVIVE1MKCk7XG5cdFx0XHRpbml0KCk7XG5cdFx0fVxuXHR9LFxuXG5cdGxvYWRQYWdlID0gZnVuY3Rpb24oaHJlZikge1xuXHRcdCRwYWdlLmxvYWQoaHJlZiArICcgI3BhZ2U+KicsIGFqYXhMb2FkKTtcblx0fTtcblxuXHRpbml0KCk7XG5cblx0JCh3aW5kb3cpLm9uKFwicG9wc3RhdGVcIiwgZnVuY3Rpb24oZSkge1xuXHRcdGlmIChlLm9yaWdpbmFsRXZlbnQuc3RhdGUgIT09IG51bGwpIHtcblx0XHRcdGxvYWRQYWdlKGxvY2F0aW9uLmhyZWYpO1xuXHRcdH1cblx0fSk7XG5cblx0JChkb2N1bWVudCkub24oXCJjbGlja1wiLCBcImEsIFtkYXRhLWhyZWZdXCIsIGZ1bmN0aW9uKGV2KSB7XG5cdFx0dmFyIGhyZWYgPSAkKHRoaXMpLmF0dHIoXCJocmVmXCIpO1xuXHRcdHZhciBkYXRhQWpheCA9ICQodGhpcykuYXR0cihcImRhdGEtYWpheFwiKTtcblxuXHRcdGlmIChkYXRhQWpheCA9PSBcImZhbHNlXCIgfHwgaHJlZiA9PSB1bmRlZmluZWQgfHwgaHJlZiA9PSAnIycpIHsgcmV0dXJuOyB9XG5cblx0XHRldi5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cdFx0aWYgKGhyZWYuaW5kZXhPZihkb2N1bWVudC5kb21haW4pID4gLTEgfHwgaHJlZi5pbmRleE9mKCc6JykgPT09IC0xKSB7XG5cdFx0XHQkcHJlbG9hZGVyLnNob3coIDUwMCApO1xuXHRcdFx0aGlzdG9yeS5wdXNoU3RhdGUoe30sICcnLCBocmVmKTtcblx0XHRcdGxvYWRQYWdlKGhyZWYpO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdbSU5GT10gQXQ6IGNsaWNrLmRhdGEtYWpheCcpO1xuXHRcdH1cblx0fSk7XG59KTtcbiIsIihmdW5jdGlvbigpIHtcbiAgICB2YXIgY2xpY2thYmxlID0ge1xuICAgICAgICBlbGVtZW50czogZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtaHJlZl0nKSxcblxuICAgICAgICByZWRpcmVjdF90bzogZnVuY3Rpb24oaHJlZiwgdGFyZ2V0KSB7XG4gICAgICAgICAgICB0YXJnZXQgPSB0YXJnZXQgfHwgXCJcIjtcbiAgICAgICAgICAgIGNsaWNrYWJsZS5zaW11bGF0ZV9hbmNob3IoaHJlZiwgdGFyZ2V0KTtcbiAgICAgICAgfSxcblxuICAgICAgICBzaW11bGF0ZV9hbmNob3I6IGZ1bmN0aW9uKGhyZWYsIHRhcmdldCkge1xuICAgICAgICAgICAgdmFyIGFuY2hvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xuICAgICAgICAgICAgYW5jaG9yLnNldEF0dHJpYnV0ZSgnaHJlZicsIGhyZWYpO1xuICAgICAgICAgICAgYW5jaG9yLnNldEF0dHJpYnV0ZSgndGFyZ2V0JywgdGFyZ2V0KTtcbiAgICAgICAgICAgIGFuY2hvci5jbGljaygpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLmVsZW1lbnRzW2ldO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQodGhpcykuYXR0cignZGF0YS10YXJnZXQnKSA9PSBcIl9ibGFua1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgd2luID0gd2luZG93Lm9wZW4oJCh0aGlzKS5hdHRyKCdkYXRhLWhyZWYnKSwgJ19ibGFuaycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSAkKHRoaXMpLmF0dHIoJ2RhdGEtaHJlZicpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIGNsaWNrYWJsZS5yZWRpcmVjdF90byhcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIHRoaXMuZ2V0QXR0cmlidXRlKCdkYXRhLWhyZWYnKSxcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIHRoaXMuZ2V0QXR0cmlidXRlKCdkYXRhLXRhcmdldCcpXG4gICAgICAgICAgICAgICAgICAgIC8vICk7XG4gICAgICAgICAgICAgICAgfSwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIGNsaWNrYWJsZS5pbml0KCk7XG59KSgpO1xuIiwiRHJvcHpvbmUuYXV0b0Rpc2NvdmVyID0gZmFsc2U7XG5cbi8qXG4gKlxuICogRG9jdW1lbnQgcmVhZHlcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtcbiAgICB2YXIgY29uZmlnID0ge1xuICAgICAgICAnLmNob3Nlbi1zZWxlY3QnICAgICAgICAgICA6IHt3aWR0aDpcImluaGVyaXRcIn0sXG4gICAgICAgICcuY2hvc2VuLXNlbGVjdC1kZXNlbGVjdCcgIDoge2FsbG93X3NpbmdsZV9kZXNlbGVjdDp0cnVlfSxcbiAgICAgICAgJy5jaG9zZW4tc2VsZWN0LW5vLXNpbmdsZScgOiB7ZGlzYWJsZV9zZWFyY2hfdGhyZXNob2xkOjEwfSxcbiAgICAgICAgJy5jaG9zZW4tc2VsZWN0LW5vLXJlc3VsdHMnOiB7bm9fcmVzdWx0c190ZXh0OidPb3BzLCBub3RoaW5nIGZvdW5kISd9LFxuICAgICAgICAnLmNob3Nlbi1zZWxlY3Qtd2lkdGgnICAgICA6IHt3aWR0aDpcIjk1JVwifVxuICAgIH1cbiAgICBmb3IgKHZhciBzZWxlY3RvciBpbiBjb25maWcpIHtcbiAgICAgICAgJChzZWxlY3RvcikuY2hvc2VuKGNvbmZpZ1tzZWxlY3Rvcl0pO1xuICAgIH1cbn0pO1xuXG4kKGRvY3VtZW50KS5vbignY2xpY2snLCAnW2RhdGEtb3JkZXItdGhlLXRhYmxlXScsIGZ1bmN0aW9uKCl7XG5cdG9yZGVuYXRvciA9ICQodGhpcyk7XG5cdHZhbHVlID0gb3JkZW5hdG9yLmF0dHIoJ2RhdGEtb3JkZXItdGhlLXRhYmxlJyk7XG5cblx0JCgnW2RhdGEtb3JkZXItdGhlLXRhYmxlXScpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xuXHRvcmRlbmF0b3IuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG5cblx0JCgnW2RhdGEtcG9zLScgKyB2YWx1ZSArICddJykuZWFjaChmdW5jdGlvbihpbmRleCkge1xuXHRcdCQodGhpcykuaHRtbCgkKHRoaXMpLmF0dHIoJ2RhdGEtcG9zLScgKyB2YWx1ZSkpO1xuXHR9KTtcbn0pO1xuXG4kKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnBhZ2luYXRpb24gYScsIGZ1bmN0aW9uKCl7XG5cdG9yZGVuYXRvciA9ICQoJ1tkYXRhLW9yZGVyLXRoZS10YWJsZV0uYWN0aXZlJyk7XG5cblx0aWYgKG9yZGVuYXRvci5sZW5ndGgpIHtcblx0XHR2YWx1ZSA9IG9yZGVuYXRvci5hdHRyKCdkYXRhLW9yZGVyLXRoZS10YWJsZScpO1xuXG5cdFx0JCgnW2RhdGEtcG9zLScgKyB2YWx1ZSArICddJykuZWFjaChmdW5jdGlvbihpbmRleCkge1xuXHRcdFx0JCh0aGlzKS5odG1sKCQodGhpcykuYXR0cignZGF0YS1wb3MtJyArIHZhbHVlKSk7XG5cdFx0fSk7XG5cdH1cbn0pO1xuXG5cblxuIiwialF1ZXJ5LmV4dGVuZChqUXVlcnkudmFsaWRhdG9yLm1lc3NhZ2VzLCB7XG4gICAgcmVxdWlyZWQ6IFwiRXN0ZSBjYW1wbyDDqSBkZSBwcmVlbmNoaW1lbnRvIG9icmlnYXTDs3Jpby5cIixcbiAgICByZW1vdGU6IFwiUGxlYXNlIGZpeCB0aGlzIGZpZWxkLlwiLFxuICAgIGVtYWlsOiBcIlBsZWFzZSBlbnRlciBhIHZhbGlkIGVtYWlsIGFkZHJlc3MuXCIsXG4gICAgdXJsOiBcIlBsZWFzZSBlbnRlciBhIHZhbGlkIFVSTC5cIixcbiAgICBkYXRlOiBcIlBsZWFzZSBlbnRlciBhIHZhbGlkIGRhdGUuXCIsXG4gICAgZGF0ZUlTTzogXCJQbGVhc2UgZW50ZXIgYSB2YWxpZCBkYXRlIChJU08pLlwiLFxuICAgIG51bWJlcjogXCJQbGVhc2UgZW50ZXIgYSB2YWxpZCBudW1iZXIuXCIsXG4gICAgZGlnaXRzOiBcIlBsZWFzZSBlbnRlciBvbmx5IGRpZ2l0cy5cIixcbiAgICBjcmVkaXRjYXJkOiBcIlBsZWFzZSBlbnRlciBhIHZhbGlkIGNyZWRpdCBjYXJkIG51bWJlci5cIixcbiAgICBlcXVhbFRvOiBcIlBsZWFzZSBlbnRlciB0aGUgc2FtZSB2YWx1ZSBhZ2Fpbi5cIixcbiAgICBhY2NlcHQ6IFwiUGxlYXNlIGVudGVyIGEgdmFsdWUgd2l0aCBhIHZhbGlkIGV4dGVuc2lvbi5cIixcbiAgICBtYXhsZW5ndGg6IGpRdWVyeS52YWxpZGF0b3IuZm9ybWF0KFwiUGxlYXNlIGVudGVyIG5vIG1vcmUgdGhhbiB7MH0gY2hhcmFjdGVycy5cIiksXG4gICAgbWlubGVuZ3RoOiBqUXVlcnkudmFsaWRhdG9yLmZvcm1hdChcIlBsZWFzZSBlbnRlciBhdCBsZWFzdCB7MH0gY2hhcmFjdGVycy5cIiksXG4gICAgcmFuZ2VsZW5ndGg6IGpRdWVyeS52YWxpZGF0b3IuZm9ybWF0KFwiUGxlYXNlIGVudGVyIGEgdmFsdWUgYmV0d2VlbiB7MH0gYW5kIHsxfSBjaGFyYWN0ZXJzIGxvbmcuXCIpLFxuICAgIHJhbmdlOiBqUXVlcnkudmFsaWRhdG9yLmZvcm1hdChcIlBsZWFzZSBlbnRlciBhIHZhbHVlIGJldHdlZW4gezB9IGFuZCB7MX0uXCIpLFxuICAgIG1heDogalF1ZXJ5LnZhbGlkYXRvci5mb3JtYXQoXCJQbGVhc2UgZW50ZXIgYSB2YWx1ZSBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gezB9LlwiKSxcbiAgICBtaW46IGpRdWVyeS52YWxpZGF0b3IuZm9ybWF0KFwiUGxlYXNlIGVudGVyIGEgdmFsdWUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIHswfS5cIilcbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9